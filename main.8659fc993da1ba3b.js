"use strict";var FG=Object.defineProperty,LG=Object.defineProperties,VG=Object.getOwnPropertyDescriptors,oF=Object.getOwnPropertySymbols,UG=Object.prototype.hasOwnProperty,BG=Object.prototype.propertyIsEnumerable,aF=(tt,Ie,O)=>Ie in tt?FG(tt,Ie,{enumerable:!0,configurable:!0,writable:!0,value:O}):tt[Ie]=O,uF=(tt,Ie)=>{for(var O in Ie||(Ie={}))UG.call(Ie,O)&&aF(tt,O,Ie[O]);if(oF)for(var O of oF(Ie))BG.call(Ie,O)&&aF(tt,O,Ie[O]);return tt},lF=(tt,Ie)=>LG(tt,VG(Ie));(self.webpackChunkangularFirebase=self.webpackChunkangularFirebase||[]).push([[179],{2011:(tt,Ie,O)=>{O.d(Ie,{Dh:()=>le,GT:()=>_e,cc:()=>Re,hO:()=>ze,on:()=>W,pX:()=>ae,xv:()=>ye});var f=O(5e3),B=O(127),N=O(5813);tt=O.hmd(tt);const oe=["ngOnDestroy"],ae=(Se,qe,We,Me={})=>new Proxy(Se,{get:(Ne,be)=>We.runOutsideAngular(()=>{var Ke;if(Se[be])return(null===(Ke=null==Me?void 0:Me.spy)||void 0===Ke?void 0:Ke.get)&&Me.spy.get(be,Se[be]),Se[be];if(oe.indexOf(be)>-1)return()=>{};const ne=qe.toPromise().then(he=>{const De=he&&he[be];return"function"==typeof De?De.bind(he):De&&De.then?De.then(Q=>We.run(()=>Q)):We.run(()=>De)});return new Proxy(()=>{},{get:(he,De)=>ne[De],apply:(he,De,Q)=>ne.then(re=>{var se;const ve=re&&re(...Q);return(null===(se=null==Me?void 0:Me.spy)||void 0===se?void 0:se.apply)&&Me.spy.apply(be,Q,ve),ve})})})}),_e=(Se,qe)=>{qe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Me=>{Object.defineProperty(Se.prototype,Me,Object.getOwnPropertyDescriptor(We.prototype||We,Me))})})};class fe{constructor(qe){return qe}}const le=new f.OlP("angularfire2.app.options"),ye=new f.OlP("angularfire2.app.name");function W(Se,qe,We){const Ne="object"==typeof We&&We||{};Ne.name=Ne.name||"string"==typeof We&&We||"[DEFAULT]";const Ke=B.Z.apps.filter(ne=>ne&&ne.name===Ne.name)[0]||qe.runOutsideAngular(()=>B.Z.initializeApp(Se,Ne));try{JSON.stringify(Se)!==JSON.stringify(Ke.options)&&H("error",`${Ke.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new fe(Ke)}const H=(Se,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Se](...qe)},ie={provide:fe,useFactory:W,deps:[le,f.R0b,[new f.FiY,ye]]};let ze=(()=>{class Se{constructor(We){B.Z.registerVersion("angularfire",N.q4.full,"core"),B.Z.registerVersion("angularfire",N.q4.full,"app-compat"),B.Z.registerVersion("angular",f.q4F.full,We.toString())}static initializeApp(We,Me){return{ngModule:Se,providers:[{provide:le,useValue:We},{provide:ye,useValue:Me}]}}}return Se.\u0275fac=function(We){return new(We||Se)(f.LFG(f.Lbi))},Se.\u0275mod=f.oAB({type:Se}),Se.\u0275inj=f.cJS({providers:[ie]}),Se})();function Re(Se,qe,We,Me,Ne){const[,be,Ke]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===Se)||[];if(be)return function Ve(Se,qe){try{return Se.toString()===qe.toString()}catch(We){return Se===qe}}(Ne,Ke)||(ge("error",`${qe} was already initialized on the ${We} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ne,was:Ke})),be;{const ne=Me();return globalThis.\u0275AngularfireInstanceCache.push([Se,ne,Ne]),ne}}const Ge=!!tt.hot,ge=(Se,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Se](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(tt,Ie,O)=>{O.d(Ie,{q4:()=>Xl,iC:()=>Ka,fc:()=>ha,HU:()=>tc,vb:()=>jd,JM:()=>qa});var f=O(5e3),B=O(5867),N=O(5861),oe=O(9681),ae=O(2090),_e=O(4859),fe=O(1877),le=O(8766);const ye="@firebase/installations",W="0.5.9",ie=`w:${W}`,ze="FIS_v2",qe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(b){return b instanceof ae.ZR&&b.code.includes("request-failed")}function Me({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ne(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function be(b,T){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(b,T){const V=(yield T.json()).error;return qe.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ne({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function he(b,{refreshToken:T}){const M=ne(b);return M.append("Authorization",function se(b){return`${ze} ${b}`}(T)),M}function De(b){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function ve(b,T){return de.apply(this,arguments)}function de(){return(de=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const V=Me(b),X=ne(b),ue=T.getImmediate({optional:!0});if(ue){const Tt=yield ue.getHeartbeatsHeader();Tt&&X.append("x-firebase-client",Tt)}const ot={method:"POST",headers:X,body:JSON.stringify({fid:M,authVersion:ze,appId:b.appId,sdkVersion:ie})},st=yield De(()=>fetch(V,ot));if(st.ok){const Tt=yield st.json();return{fid:Tt.fid||M,registrationStatus:2,refreshToken:Tt.refreshToken,authToken:Ne(Tt.authToken)}}throw yield be("Create Installation",st)})).apply(this,arguments)}function Be(b){return new Promise(T=>{setTimeout(T,b)})}const zt=/^[cdef][\w-]{21}$/;function Ye(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function hn(b){return function ht(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return zt.test(M)?M:""}catch(b){return""}}function On(b){return`${b.appName}!${b.appId}`}const fn=new Map;function rn(b,T){const M=On(b);Sn(M,T),function Li(b,T){const M=function xn(){return!xr&&"BroadcastChannel"in self&&(xr=new BroadcastChannel("[Firebase] FID Change"),xr.onmessage=b=>{Sn(b.data.key,b.data.fid)}),xr}();M&&M.postMessage({key:b,fid:T}),function Xi(){0===fn.size&&xr&&(xr.close(),xr=null)}()}(M,T)}function Sn(b,T){const M=fn.get(b);if(M)for(const V of M)V(T)}let xr=null;const Fn="firebase-installations-store";let es=null;function gt(){return es||(es=(0,le.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Fn)}})),es}function Br(b,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(b,T){const M=On(b),X=(yield gt()).transaction(Fn,"readwrite"),ue=X.objectStore(Fn),Ue=yield ue.get(M);return yield ue.put(T,M),yield X.done,(!Ue||Ue.fid!==T.fid)&&rn(b,T.fid),T})).apply(this,arguments)}function sn(b){return br.apply(this,arguments)}function br(){return(br=(0,N.Z)(function*(b){const T=On(b),V=(yield gt()).transaction(Fn,"readwrite");yield V.objectStore(Fn).delete(T),yield V.done})).apply(this,arguments)}function rr(b,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,N.Z)(function*(b,T){const M=On(b),X=(yield gt()).transaction(Fn,"readwrite"),ue=X.objectStore(Fn),Ue=yield ue.get(M),ot=T(Ue);return void 0===ot?yield ue.delete(M):yield ue.put(ot,M),yield X.done,ot&&(!Ue||Ue.fid!==ot.fid)&&rn(b,ot.fid),ot})).apply(this,arguments)}function Dn(b){return ir.apply(this,arguments)}function ir(){return(ir=(0,N.Z)(function*(b){let T;const M=yield rr(b.appConfig,V=>{const X=bs(V),ue=jt(b,X);return T=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function bs(b){return ts(b||{fid:Ye(),registrationStatus:0})}function jt(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(qe.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function ct(b,T){return it.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:di(b)}:{installationEntry:T}}function it(){return(it=(0,N.Z)(function*(b,T){try{const M=yield ve(b,T);return Br(b.appConfig,M)}catch(M){throw We(M)&&409===M.customData.serverCode?yield sn(b.appConfig):yield Br(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function di(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,N.Z)(function*(b){let T=yield Ht(b.appConfig);for(;1===T.registrationStatus;)yield Be(100),T=yield Ht(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield Dn(b);return V||M}return T})).apply(this,arguments)}function Ht(b){return rr(b,T=>{if(!T)throw qe.create("installation-not-found");return ts(T)})}function ts(b){return function Ln(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function pn(b,T){return j.apply(this,arguments)}function j(){return(j=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const V=q(b,M),X=he(b,M),ue=T.getImmediate({optional:!0});if(ue){const Tt=yield ue.getHeartbeatsHeader();Tt&&X.append("x-firebase-client",Tt)}const ot={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:ie,appId:b.appId}})},st=yield De(()=>fetch(V,ot));if(st.ok)return Ne(yield st.json());throw yield be("Generate Auth Token",st)})).apply(this,arguments)}function q(b,{fid:T}){return`${Me(b)}/${T}/authTokens:generate`}function Z(b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(b,T=!1){let M;const V=yield rr(b.appConfig,ue=>{if(!Rt(ue))throw qe.create("not-registered");const Ue=ue.authToken;if(!T&&ln(Ue))return ue;if(1===Ue.requestStatus)return M=$(b,T),ue;{if(!navigator.onLine)throw qe.create("app-offline");const ot=Zn(ue);return M=Xe(b,ot),ot}});return M?yield M:V.authToken})).apply(this,arguments)}function $(b,T){return J.apply(this,arguments)}function J(){return(J=(0,N.Z)(function*(b,T){let M=yield ke(b.appConfig);for(;1===M.authToken.requestStatus;)yield Be(100),M=yield ke(b.appConfig);const V=M.authToken;return 0===V.requestStatus?Z(b,T):V})).apply(this,arguments)}function ke(b){return rr(b,T=>{if(!Rt(T))throw qe.create("not-registered");return function ce(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Xe(b,T){return ft.apply(this,arguments)}function ft(){return(ft=(0,N.Z)(function*(b,T){try{const M=yield pn(b,T),V=Object.assign(Object.assign({},T),{authToken:M});return yield Br(b.appConfig,V),M}catch(M){if(!We(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Br(b.appConfig,V)}else yield sn(b.appConfig);throw M}})).apply(this,arguments)}function Rt(b){return void 0!==b&&2===b.registrationStatus}function ln(b){return 2===b.requestStatus&&!function Ct(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function Zn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function z(){return(z=(0,N.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:V}=yield Dn(T);return V?V.catch(console.error):Z(T).catch(console.error),M.fid})).apply(this,arguments)}function Qe(){return(Qe=(0,N.Z)(function*(b,T=!1){const M=b;return yield lt(M),(yield Z(M,T)).token})).apply(this,arguments)}function lt(b){return xt.apply(this,arguments)}function xt(){return(xt=(0,N.Z)(function*(b){const{registrationPromise:T}=yield Dn(b);T&&(yield T)})).apply(this,arguments)}function xa(b){return qe.create("missing-app-config-values",{valueName:b})}const Qr="installations",kt=b=>{const T=b.getProvider("app").getImmediate(),M=function fr(b){if(!b||!b.options)throw xa("App Configuration");if(!b.name)throw xa("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw xa(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},yn=b=>{const T=b.getProvider("app").getImmediate(),M=(0,oe._getProvider)(T,Qr).getImmediate();return{getId:()=>function Y(b){return z.apply(this,arguments)}(M),getToken:X=>function Ae(b){return Qe.apply(this,arguments)}(M,X)}};(function Hr(){(0,oe._registerComponent)(new _e.wA(Qr,kt,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("installations-internal",yn,"PRIVATE"))})(),(0,oe.registerVersion)(ye,W),(0,oe.registerVersion)(ye,W,"esm2017");const Ds="@firebase/remote-config",Vn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class hd{constructor(T,M,V,X){this.client=T,this.storage=M,this.storageCache=V,this.logger=X}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,X=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${X}.`),X}fetch(T){var M=this;return(0,N.Z)(function*(){const[V,X]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(X&&M.isCachedDataFresh(T.cacheMaxAgeMillis,V))return X;T.eTag=X&&X.eTag;const ue=yield M.client.fetch(T),Ue=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ue.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ue),ue})()}}function Su(b=navigator){return b.languages&&b.languages[0]||b.language}class Qn{constructor(T,M,V,X,ue,Ue){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=V,this.projectId=X,this.apiKey=ue,this.appId=Ue}fetch(T){var M=this;return(0,N.Z)(function*(){const[V,X]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},st={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:X,app_id:M.appId,language_code:Su()},Tt={method:"POST",headers:ot,body:JSON.stringify(st)},Yt=fetch(Ue,Tt),It=new Promise((lr,Gi)=>{T.signal.addEventListener(()=>{const Ro=new Error("The operation was aborted.");Ro.name="AbortError",Gi(Ro)})});let ar;try{yield Promise.race([Yt,It]),ar=yield Yt}catch(lr){let Gi="fetch-client-network";throw"AbortError"===lr.name&&(Gi="fetch-timeout"),Vn.create(Gi,{originalErrorMessage:lr.message})}let ur=ar.status;const so=ar.headers.get("ETag")||void 0;let Ls,Ei;if(200===ar.status){let lr;try{lr=yield ar.json()}catch(Gi){throw Vn.create("fetch-client-parse",{originalErrorMessage:Gi.message})}Ls=lr.entries,Ei=lr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ei?ur=500:"NO_CHANGE"===Ei?ur=304:("NO_TEMPLATE"===Ei||"EMPTY_CONFIG"===Ei)&&(Ls={}),304!==ur&&200!==ur)throw Vn.create("fetch-status",{httpStatus:ur});return{status:ur,eTag:so,config:Ls}})()}}class Ss{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:V}){var X=this;return(0,N.Z)(function*(){yield function fd(b,T){return new Promise((M,V)=>{const X=Math.max(T-Date.now(),0),ue=setTimeout(M,X);b.addEventListener(()=>{clearTimeout(ue),V(Vn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ue=yield X.client.fetch(T);return yield X.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function xg(b){if(!(b instanceof ae.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Ue={throttleEndTimeMillis:Date.now()+(0,ae.$s)(V),backoffCount:V+1};return yield X.storage.setThrottleMetadata(Ue),X.attemptFetch(T,Ue)}})()}}class Mg{constructor(T,M,V,X,ue){this.app=T,this._client=M,this._storageCache=V,this._storage=X,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ra(b,T){const M=b.target.error||void 0;return Vn.create(T,{originalErrorMessage:M&&M.message})}const Qo="app_namespace_store";class md{constructor(T,M,V,X=function Pg(){return new Promise((b,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{T(Ra(V,"storage-open"))},M.onsuccess=V=>{b(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Qo,{keyPath:"compositeKey"})}}catch(M){T(Vn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=V,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const V=yield M.openDbPromise;return new Promise((X,ue)=>{const ot=V.transaction([Qo],"readonly").objectStore(Qo),st=M.createCompositeKey(T);try{const Tt=ot.get(st);Tt.onerror=Yt=>{ue(Ra(Yt,"storage-get"))},Tt.onsuccess=Yt=>{const It=Yt.target.result;X(It?It.value:void 0)}}catch(Tt){ue(Vn.create("storage-get",{originalErrorMessage:Tt&&Tt.message}))}})})()}set(T,M){var V=this;return(0,N.Z)(function*(){const X=yield V.openDbPromise;return new Promise((ue,Ue)=>{const st=X.transaction([Qo],"readwrite").objectStore(Qo),Tt=V.createCompositeKey(T);try{const Yt=st.put({compositeKey:Tt,value:M});Yt.onerror=It=>{Ue(Ra(It,"storage-set"))},Yt.onsuccess=()=>{ue()}}catch(Yt){Ue(Vn.create("storage-set",{originalErrorMessage:Yt&&Yt.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const V=yield M.openDbPromise;return new Promise((X,ue)=>{const ot=V.transaction([Qo],"readwrite").objectStore(Qo),st=M.createCompositeKey(T);try{const Tt=ot.delete(st);Tt.onerror=Yt=>{ue(Ra(Yt,"storage-delete"))},Tt.onsuccess=()=>{X()}}catch(Tt){ue(Vn.create("storage-delete",{originalErrorMessage:Tt&&Tt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Jo{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),X=T.storage.getActiveConfig(),ue=yield M;ue&&(T.lastFetchStatus=ue);const Ue=yield V;Ue&&(T.lastSuccessfulFetchTimestampMillis=Ue);const ot=yield X;ot&&(T.activeConfig=ot)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Y_(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(b){return!1}})).apply(this,arguments)}!function kg(){(0,oe._registerComponent)(new _e.wA("remote-config",function b(T,{instanceIdentifier:M}){const V=T.getProvider("app").getImmediate(),X=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,ae.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ue,appId:ot}=V.options;if(!ue)throw Vn.create("registration-project-id");if(!Ue)throw Vn.create("registration-api-key");if(!ot)throw Vn.create("registration-app-id");const st=new md(ot,V.name,M=M||"firebase"),Tt=new Jo(st),Yt=new fe.Yd(Ds);Yt.logLevel=fe.in.ERROR;const It=new Qn(X,oe.SDK_VERSION,M,ue,Ue,ot),ar=new Ss(It,st),ur=new hd(ar,st,Tt,Yt),so=new Mg(V,ur,Tt,st,Yt);return function gn(b){const T=(0,ae.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(so),so},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ds,"0.3.8"),(0,oe.registerVersion)(Ds,"0.3.8","esm2017")}();const Qs="/firebase-messaging-sw.js",gi="/firebase-cloud-messaging-push-scope",Xo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Pa="google.c.a.c_id",bf="google.c.a.c_l",Og="google.c.a.ts",_o="google.c.a.e";var xs=(()=>{return(b=xs||(xs={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",xs;var b})();function Bi(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yd(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),X=new Uint8Array(V.length);for(let ue=0;ue<V.length;++ue)X[ue]=V.charCodeAt(ue);return X}const Nr="fcm_token_details_db",vd="fcm_token_object_Store";function wd(b){return Au.apply(this,arguments)}function Au(){return Au=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Nr))return null;let T=null;return(yield(0,le.X3)(Nr,5,{upgrade:(V=(0,N.Z)(function*(X,ue,Ue,ot){var st;if(ue<2||!X.objectStoreNames.contains(vd))return;const Tt=ot.objectStore(vd),Yt=yield Tt.index("fcmSenderId").get(b);if(yield Tt.clear(),Yt)if(2===ue){const It=Yt;if(!It.auth||!It.p256dh||!It.endpoint)return;T={token:It.fcmToken,createTime:null!==(st=It.createTime)&&void 0!==st?st:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:Bi(It.vapidKey)}}}else if(3===ue){const It=Yt;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Bi(It.auth),p256dh:Bi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Bi(It.vapidKey)}}}else if(4===ue){const It=Yt;T={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:Bi(It.auth),p256dh:Bi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:Bi(It.vapidKey)}}}}),function(ue,Ue,ot,st){return V.apply(this,arguments)})})).close(),yield(0,le.Lj)(Nr),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),xu(T)?T:null;var V}),Au.apply(this,arguments)}function xu(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Rs="firebase-messaging-store";let Fl=null;function vn(){return Fl||(Fl=(0,le.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Rs)}})),Fl}function ka(b){return Js.apply(this,arguments)}function Js(){return(Js=(0,N.Z)(function*(b){const T=pr(b),V=yield(yield vn()).transaction(Rs).objectStore(Rs).get(T);if(V)return V;{const X=yield wd(b.appConfig.senderId);if(X)return yield mn(b,X),X}})).apply(this,arguments)}function mn(b,T){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,N.Z)(function*(b,T){const M=pr(b),X=(yield vn()).transaction(Rs,"readwrite");return yield X.objectStore(Rs).put(T,M),yield X.done,T})).apply(this,arguments)}function Oa(b){return yo.apply(this,arguments)}function yo(){return(yo=(0,N.Z)(function*(b){const T=pr(b),V=(yield vn()).transaction(Rs,"readwrite");yield V.objectStore(Rs).delete(T),yield V.done})).apply(this,arguments)}function pr({appConfig:b}){return b.appId}const Un=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ms(b,T){return gr.apply(this,arguments)}function gr(){return(gr=(0,N.Z)(function*(b,T){const M=yield eo(b),V=vo(T),X={method:"POST",headers:M,body:JSON.stringify(V)};let ue;try{ue=yield(yield fetch(Xs(b.appConfig),X)).json()}catch(Ue){throw Un.create("token-subscribe-failed",{errorInfo:Ue})}if(ue.error)throw Un.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw Un.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function ea(b,T){return rs.apply(this,arguments)}function rs(){return(rs=(0,N.Z)(function*(b,T){const M=yield eo(b),V=vo(T.subscriptionOptions),X={method:"PATCH",headers:M,body:JSON.stringify(V)};let ue;try{ue=yield(yield fetch(`${Xs(b.appConfig)}/${T.token}`,X)).json()}catch(Ue){throw Un.create("token-update-failed",{errorInfo:Ue})}if(ue.error)throw Un.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw Un.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Ll(b,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,N.Z)(function*(b,T){const V={method:"DELETE",headers:yield eo(b)};try{const ue=yield(yield fetch(`${Xs(b.appConfig)}/${T}`,V)).json();if(ue.error)throw Un.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(X){throw Un.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function Xs({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function eo(b){return wt.apply(this,arguments)}function wt(){return(wt=(0,N.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function vo({p256dh:b,auth:T,endpoint:M,vapidKey:V}){const X={web:{endpoint:M,auth:T,p256dh:b}};return V!==Xo&&(X.web.applicationPubKey=V),X}const Pu=6048e5;function Ed(b){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(b){const T=yield ku(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Bi(T.getKey("auth")),p256dh:Bi(T.getKey("p256dh"))},V=yield ka(b.firebaseDependencies);if(V){if(Id(V.subscriptionOptions,M))return Date.now()>=V.createTime+Pu?Df(b,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Ll(b.firebaseDependencies,V.token)}catch(X){console.warn(X)}return Pe(b.firebaseDependencies,M)}return Pe(b.firebaseDependencies,M)})).apply(this,arguments)}function Cd(b){return ta.apply(this,arguments)}function ta(){return(ta=(0,N.Z)(function*(b){const T=yield ka(b.firebaseDependencies);T&&(yield Ll(b.firebaseDependencies,T.token),yield Oa(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Df(b,T){return to.apply(this,arguments)}function to(){return(to=(0,N.Z)(function*(b,T){try{const M=yield ea(b.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield mn(b.firebaseDependencies,V),M}catch(M){throw yield Cd(b),M}})).apply(this,arguments)}function Pe(b,T){return $t.apply(this,arguments)}function $t(){return($t=(0,N.Z)(function*(b,T){const V={token:yield Ms(b,T),createTime:Date.now(),subscriptionOptions:T};return yield mn(b,V),V.token})).apply(this,arguments)}function ku(b,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,N.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yd(T)})})).apply(this,arguments)}function Id(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Ns(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function is(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const V=T.notification.body;V&&(b.notification.body=V);const X=T.notification.image;X&&(b.notification.image=X)}(T,b),function Vl(b,T){!T.data||(b.data=T.data)}(T,b),function La(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const M=T.fcmOptions.link;M&&(b.fcmOptions.link=M);const V=T.fcmOptions.analytics_label;V&&(b.fcmOptions.analyticsLabel=V)}(T,b),T}function Tf(b){return"object"==typeof b&&!!b&&Pa in b}function bd(b,T){const M=[];for(let V=0;V<b.length;V++)M.push(b.charAt(V)),V<T.length&&M.push(T.charAt(V));return M.join("")}function wo(b){return Un.create("missing-app-config-values",{valueName:b})}bd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class mr{constructor(T,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Dd(b){if(!b||!b.options)throw wo("App Configuration Object");if(!b.name)throw wo("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const V of T)if(!M[V])throw wo(V);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:X,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function ss(b){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Qs,{scope:gi}),b.swRegistration.update().catch(()=>{})}catch(T){throw Un.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function ra(b,T){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,N.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield ss(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Un.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Sf(b,T){return ia.apply(this,arguments)}function ia(){return(ia=(0,N.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=Xo)})).apply(this,arguments)}function Va(){return(Va=(0,N.Z)(function*(b,T){if(!navigator)throw Un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Un.create("permission-blocked");return yield Sf(b,null==T?void 0:T.vapidKey),yield ra(b,null==T?void 0:T.serviceWorkerRegistration),Ed(b)})).apply(this,arguments)}function Ul(b,T,M){return sa.apply(this,arguments)}function sa(){return(sa=(0,N.Z)(function*(b,T,M){const V=Sd(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[Pa],message_name:M[bf],message_time:M[Og],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sd(b){switch(b){case xs.NOTIFICATION_CLICKED:return"notification_open";case xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bl(){return(Bl=(0,N.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===xs.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Ns(M)):b.onMessageHandler.next(Ns(M)));const V=M.data;Tf(V)&&"1"===V[_o]&&(yield Ul(b,M.messageType,V))})).apply(this,arguments)}const Ua="@firebase/messaging",Eo=b=>{const T=new mr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ad(b,T){return Bl.apply(this,arguments)}(T,M)),T},xd=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:V=>function Td(b,T){return Va.apply(this,arguments)}(T,V)}};function Ou(){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(){try{yield(0,ae.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Af(){(0,oe._registerComponent)(new _e.wA("messaging",Eo,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("messaging-internal",xd,"PRIVATE")),(0,oe.registerVersion)(Ua,"0.9.13"),(0,oe.registerVersion)(Ua,"0.9.13","esm2017")}();const Rd="analytics",Fg="firebase_id",ja="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ha="https://www.googletagmanager.com/gtag/js",sr=new fe.Yd("@firebase/analytics");function Nd(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function Lg(b,T){const M=document.createElement("script");M.src=`${Ha}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function oa(b,T,M,V,X,ue){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,N.Z)(function*(b,T,M,V,X,ue){const Ue=V[X];try{if(Ue)yield T[Ue];else{const st=(yield Nd(M)).find(Tt=>Tt.measurementId===X);st&&(yield T[st.appId])}}catch(ot){sr.error(ot)}b("config",X,ue)})).apply(this,arguments)}function Hl(b,T,M,V,X){return Io.apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(b,T,M,V,X){try{let ue=[];if(X&&X.send_to){let Ue=X.send_to;Array.isArray(Ue)||(Ue=[Ue]);const ot=yield Nd(M);for(const st of Ue){const Tt=ot.find(It=>It.measurementId===st),Yt=Tt&&T[Tt.appId];if(!Yt){ue=[];break}ue.push(Yt)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),b("event",V,X||{})}catch(ue){sr.error(ue)}})).apply(this,arguments)}function wn(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Ha))return T;return null}const ti=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),aa=new class Wl{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function ua(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function la(b){return on.apply(this,arguments)}function on(){return(on=(0,N.Z)(function*(b){var T;const{appId:M,apiKey:V}=b,X={method:"GET",headers:ua(V)},ue=ja.replace("{app-id}",M),Ue=yield fetch(ue,X);if(200!==Ue.status&&304!==Ue.status){let ot="";try{const st=yield Ue.json();(null===(T=st.error)||void 0===T?void 0:T.message)&&(ot=st.error.message)}catch(st){}throw ti.create("config-fetch-failed",{httpStatus:Ue.status,responseMessage:ot})}return Ue.json()})).apply(this,arguments)}function or(b){return mt.apply(this,arguments)}function mt(){return(mt=(0,N.Z)(function*(b,T=aa,M){const{appId:V,apiKey:X,measurementId:ue}=b.options;if(!V)throw ti.create("no-app-id");if(!X){if(ue)return{measurementId:ue,appId:V};throw ti.create("no-api-key")}const Ue=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ot=new zl;return setTimeout((0,N.Z)(function*(){ot.abort()}),void 0!==M?M:6e4),Lu({appId:V,apiKey:X,measurementId:ue},Ue,ot,T)})).apply(this,arguments)}function Lu(b,T,M){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},V,X=aa){const{appId:ue,measurementId:Ue}=b;try{yield Mf(V,T)}catch(ot){if(Ue)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${ot.message}]`),{appId:ue,measurementId:Ue};throw ot}try{const ot=yield la(b);return X.deleteThrottleMetadata(ue),ot}catch(ot){if(!ql(ot)){if(X.deleteThrottleMetadata(ue),Ue)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${ot.message}]`),{appId:ue,measurementId:Ue};throw ot}const st=503===Number(ot.customData.httpStatus)?(0,ae.$s)(M,X.intervalMillis,30):(0,ae.$s)(M,X.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+st,backoffCount:M+1};return X.setThrottleMetadata(ue,Tt),sr.debug(`Calling attemptFetch again in ${st} millis`),Lu(b,Tt,V,X)}})).apply(this,arguments)}function Mf(b,T){return new Promise((M,V)=>{const X=Math.max(T-Date.now(),0),ue=setTimeout(M,X);b.addEventListener(()=>{clearTimeout(ue),V(ti.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function ql(b){if(!(b instanceof ae.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class zl{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function kd(){return mi.apply(this,arguments)}function mi(){return(mi=(0,N.Z)(function*(){if(!(0,ae.hl)())return sr.warn(ti.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(b){return sr.warn(ti.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Fs(){return(Fs=(0,N.Z)(function*(b,T,M,V,X,ue,Ue){var ot;const st=or(b);st.then(ur=>{M[ur.measurementId]=ur.appId,b.options.measurementId&&ur.measurementId!==b.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>sr.error(ur)),T.push(st);const Tt=kd().then(ur=>{if(ur)return V.getId()}),[Yt,It]=yield Promise.all([st,Tt]);wn()||Lg(ue,Yt.measurementId),X("js",new Date);const ar=null!==(ot=null==Ue?void 0:Ue.config)&&void 0!==ot?ot:{};return ar.origin="firebase",ar.update=!0,null!=It&&(ar[Fg]=It),X("config",Yt.measurementId,ar),Yt.measurementId})).apply(this,arguments)}class bo{constructor(T){this.app=T}_delete(){return delete _i[this.app.options.appId],Promise.resolve()}}let _i={},Do=[];const Kl={};let ca,Pn,ji="dataLayer",as=!1;function To(b,T,M){!function Vu(){const b=[];if((0,ae.ru)()&&b.push("This is a browser extension environment."),(0,ae.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((V,X)=>`(${X+1}) ${V}`).join(" "),M=ti.create("invalid-analytics-context",{errorInfo:T});sr.warn(M.message)}}();const V=b.options.appId;if(!V)throw ti.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ti.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_i[V])throw ti.create("already-exists",{id:V});if(!as){!function ks(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(ji);const{wrappedGtag:ue,gtagCore:Ue}=function Vg(b,T,M,V,X){let ue=function(...Ue){window[V].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ue=window[X]),window[X]=function $l(b,T,M,V){function ue(){return(ue=(0,N.Z)(function*(Ue,ot,st){try{"event"===Ue?yield Hl(b,T,M,ot,st):"config"===Ue?yield oa(b,T,M,V,ot,st):b("set",ot)}catch(Tt){sr.error(Tt)}})).apply(this,arguments)}return function X(Ue,ot,st){return ue.apply(this,arguments)}}(ue,b,T,M),{gtagCore:ue,wrappedGtag:window[X]}}(_i,Do,Kl,ji,"gtag");Pn=ue,ca=Ue,as=!0}return _i[V]=function kr(b,T,M,V,X,ue,Ue){return Fs.apply(this,arguments)}(b,Do,Kl,T,ca,ji,M),new bo(b)}function $a(){return($a=(0,N.Z)(function*(b,T,M,V,X){if(X&&X.global)b("event",M,V);else{const ue=yield T;b("event",M,Object.assign(Object.assign({},V),{send_to:ue}))}})).apply(this,arguments)}function da(){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,N.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(b){return!1}})).apply(this,arguments)}const Ql="@firebase/analytics";!function Vd(){(0,oe._registerComponent)(new _e.wA(Rd,(T,{options:M})=>To(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new _e.wA("analytics-internal",function b(T){try{const M=T.getProvider(Rd).getImmediate();return{logEvent:(V,X,ue)=>function Of(b,T,M,V){b=(0,ae.m9)(b),function Od(b,T,M,V,X){return $a.apply(this,arguments)}(Pn,_i[b.app.options.appId],T,M,V).catch(X=>sr.error(X))}(M,V,X,ue)}}catch(M){throw ti.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(Ql,"0.7.9"),(0,oe.registerVersion)(Ql,"0.7.9","esm2017")}();var Jl=O(4408),Ff=O(7565);const us=new class kn extends Ff.v{}(class ro extends Jl.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,M,V):T.flush(this)}});var Lf=O(4986),Ud=O(8505),Or=O(5363),$r=O(9468);const Xl=new f.GfV("7.3.0"),ls="__angularfire_symbol__analyticsIsSupportedValue",cs="__angularfire_symbol__analyticsIsSupported",ds="__angularfire_symbol__remoteConfigIsSupportedValue",xo="__angularfire_symbol__remoteConfigIsSupported",ec="__angularfire_symbol__messagingIsSupportedValue",Vf="__angularfire_symbol__messagingIsSupported";function qa(b,T,M){if(T){if(1===T.length)return T[0];const ue=T.filter(Ue=>Ue.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[cs]||(globalThis[cs]=da().then(b=>globalThis[ls]=b).catch(()=>globalThis[ls]=!1)),globalThis[Vf]||(globalThis[Vf]=Ou().then(b=>globalThis[ec]=b).catch(()=>globalThis[ec]=!1)),globalThis[xo]||(globalThis[xo]=Y_().then(b=>globalThis[ds]=b).catch(()=>globalThis[ds]=!1));const jd=(b,T)=>{const M=T?[T]:(0,B.C6)(),V=[];return M.forEach(X=>{X.container.getProvider(b).instances.forEach(Ue=>{V.includes(Ue)||V.push(Ue)})}),V};function io(){}class Bu{constructor(T,M=us){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,V){const X=this.zone;return this.delegate.schedule(function(Ue){X.runGuarded(()=>{T.apply(this,[Ue])})},M,V)}}class jf{constructor(T){this.zone=T,this.task=null}call(T,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",io,{},io,io)),M.pipe((0,Ud.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tc=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Bu(Zone.current)),this.insideAngular=M.run(()=>new Bu(Zone.current,Lf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function wi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function ha(b){return b.pipe((0,Or.Q)(wi().outsideAngular))}function Ka(b){return wi(),function hs(b){return function(M){return(M=M.lift(new jf(b.ngZone))).pipe((0,$r.R)(b.outsideAngular),(0,Or.Q)(b.insideAngular))}}(wi())(b)}},2587:(tt,Ie,O)=>{O.d(Ie,{$:()=>Xs,A:()=>H,B:()=>Re,G:()=>yn,H:()=>cn,J:()=>Ss,L:()=>ln,M:()=>Ma,N:()=>Na,P:()=>cs,Q:()=>Pa,R:()=>Vd,T:()=>bf,U:()=>Xo,V:()=>xs,W:()=>Bi,X:()=>wd,Y:()=>Nu,Z:()=>Ms,_:()=>ea,a:()=>Fu,a0:()=>Ed,a1:()=>Cd,a2:()=>Df,a3:()=>Pe,a4:()=>ku,a5:()=>Id,a6:()=>is,a7:()=>Vl,a8:()=>Tf,a9:()=>bd,aA:()=>Ro,aB:()=>so,aC:()=>b,aD:()=>rc,aE:()=>$e,aI:()=>ua,aL:()=>_o,aa:()=>ss,ab:()=>ra,ac:()=>Sf,af:()=>Ul,ag:()=>Sd,ah:()=>Ad,ak:()=>Rs,al:()=>jl,an:()=>Ha,ao:()=>Pd,ap:()=>Hn,aq:()=>De,ar:()=>Vt,as:()=>lt,at:()=>We,au:()=>Zd,av:()=>ju,aw:()=>Me,ax:()=>ne,ay:()=>re,az:()=>Ct,b:()=>ti,c:()=>qa,d:()=>jf,e:()=>io,f:()=>V,g:()=>Tt,h:()=>Ue,i:()=>To,j:()=>ar,k:()=>Gg,l:()=>us,m:()=>sy,n:()=>Wf,o:()=>le,r:()=>Lf,s:()=>Ff,u:()=>Xl});var f=O(5861),B=O(2090),N=O(9681),oe=O(655),ae=O(1877),_e=O(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function ze(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new ae.Yd("@firebase/auth");function qe(w,...g){Se.logLevel<=ae.in.ERROR&&Se.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function We(w,...g){throw Ke(w,...g)}function Me(w,...g){return Ke(w,...g)}function Ne(w,g,_){const C=Object.assign(Object.assign({},Ve()),{[g]:_});return new B.LL("auth","Firebase",C).create(g,{appName:w.name})}function be(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&We(w,"argument-error"),Ne(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(w,...g){if("string"!=typeof w){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(_,...C)}return Ge.create(w,...g)}function ne(w,g,..._){if(!w)throw Ke(g,..._)}function he(w){const g="INTERNAL ASSERTION FAILED: "+w;throw qe(g),new Error(g)}function De(w,g){w||he(g)}const Q=new Map;function re(w){De(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(De(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function de(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Be(){return"http:"===ht()||"https:"===ht()}function ht(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ye{constructor(g,_){this.shortDelay=g,this.longDelay=_,De(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function zt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Be()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(w,g){De(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class On{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Ye(3e4,6e4);function Lt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Zt(w,g,_,C){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(w,g,_,C,x={}){return Li(w,x,(0,f.Z)(function*(){let F={},te={};C&&("GET"===g?te=C:F={body:JSON.stringify(C)});const Oe=(0,B.xO)(Object.assign({key:w.config.apiKey},te)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),On.fetch()(ci(w,w.config.apiHost,_,Oe),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Li(w,g,_){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(w,g,_){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},fn),g);try{const x=new Vi(w),F=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const te=yield F.json();if("needConfirmation"in te)throw Fn(w,"account-exists-with-different-credential",te);if(F.ok&&!("errorMessage"in te))return te;{const Oe=F.ok?te.errorMessage:te.error.message,[nt,_t]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw Fn(w,"credential-already-in-use",te);if("EMAIL_EXISTS"===nt)throw Fn(w,"email-already-in-use",te);if("USER_DISABLED"===nt)throw Fn(w,"user-disabled",te);const Gt=C[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw Ne(w,Gt,_t);We(w,Gt)}}catch(x){if(x instanceof B.ZR)throw x;We(w,"network-request-failed")}})).apply(this,arguments)}function xn(w,g,_,C){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(w,g,_,C,x={}){const F=yield Zt(w,g,_,C,x);return"mfaPendingCredential"in F&&We(w,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function ci(w,g,_,C){const x=`${g}${_}?${C}`;return w.config.emulator?hn(w.config,x):`${w.config.apiScheme}://${x}`}class Vi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Me(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(w,g,_){const C={appName:w.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Me(w,g,C);return x.customData._tokenResponse=_,x}function gt(){return(gt=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Br(w,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sn(w,g){return br.apply(this,arguments)}function br(){return(br=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function rr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ir(){return(ir=(0,f.Z)(function*(w,g=!1){const _=(0,B.m9)(w),C=yield _.getIdToken(g),x=jt(C);ne(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const F="object"==typeof x.firebase?x.firebase:void 0,te=null==F?void 0:F.sign_in_provider;return{claims:x,token:C,authTime:rr(bs(x.auth_time)),issuedAtTime:rr(bs(x.iat)),expirationTime:rr(bs(x.exp)),signInProvider:te||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function bs(w){return 1e3*Number(w)}function jt(w){const[g,_,C]=w.split(".");if(void 0===g||void 0===_||void 0===C)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,B.tV)(_);return x?JSON.parse(x):(qe("Failed to decode base64 JWT payload"),null)}catch(x){return qe("Caught error parsing JWT payload as JSON",x),null}}function it(w,g){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof B.ZR&&hi(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function hi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Ht{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class ts{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ln(w){return pn.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(w){var g;const _=w.auth,C=yield w.getIdToken(),x=yield it(w,sn(_,{idToken:C}));ne(null==x?void 0:x.users.length,_,"internal-error");const F=x.users[0];w._notifyReloadListener(F);const te=(null===(g=F.providerUserInfo)||void 0===g?void 0:g.length)?Ee(F.providerUserInfo):[],Oe=Z(w.providerData,te),Gt=!!w.isAnonymous&&!(w.email&&F.passwordHash||(null==Oe?void 0:Oe.length)),Wn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Oe,metadata:new ts(F.createdAt,F.lastLoginAt),isAnonymous:Gt};Object.assign(w,Wn)})).apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(w){const g=(0,B.m9)(w);yield Ln(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Z(w,g){return[...w.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}function Ee(w){return w.map(g=>{var{providerId:_}=g,C=(0,oe._T)(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function J(){return(J=(0,f.Z)(function*(w,g){const _=yield Li(w,{},(0,f.Z)(function*(){const C=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:F}=w.config,te=ci(w,x,"/v1/token",`key=${F}`),Oe=yield w._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",On.fetch()(te,{method:"POST",headers:Oe,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(void 0!==g.idToken,"internal-error"),ne(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function ct(w){const g=jt(w);return ne(g,"internal-error"),ne(void 0!==g.exp,"internal-error"),ne(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,f.Z)(function*(){return ne(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,f.Z)(function*(){const{accessToken:x,refreshToken:F,expiresIn:te}=yield function $(w,g){return J.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(x,F,Number(te))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:x,expirationTime:F}=_,te=new ke;return C&&(ne("string"==typeof C,"internal-error",{appName:g}),te.refreshToken=C),x&&(ne("string"==typeof x,"internal-error",{appName:g}),te.accessToken=x),F&&(ne("number"==typeof F,"internal-error",{appName:g}),te.expirationTime=F),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ke,this.toJSON())}_performRefresh(){return he("not implemented")}}function Xe(w,g){ne("string"==typeof w||void 0===w,"internal-error",{appName:g})}class ft{constructor(g){var{uid:_,auth:C,stsTokenManager:x}=g,F=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ht(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new ts(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,f.Z)(function*(){const C=yield it(_,_.stsTokenManager.getToken(_.auth,g));return ne(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function Dn(w){return ir.apply(this,arguments)}(this,g)}reload(){return function j(w){return q.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ft(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,f.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Ln(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,f.Z)(function*(){const _=yield g.getIdToken();return yield it(g,function es(w,g){return gt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,x,F,te,Oe,nt,_t,Gt;const Wn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Ci=null!==(x=_.email)&&void 0!==x?x:void 0,oo=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,Qa=null!==(te=_.photoURL)&&void 0!==te?te:void 0,ly=null!==(Oe=_.tenantId)&&void 0!==Oe?Oe:void 0,qf=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,Mo=null!==(_t=_.createdAt)&&void 0!==_t?_t:void 0,zg=null!==(Gt=_.lastLoginAt)&&void 0!==Gt?Gt:void 0,{uid:Yd,emailVerified:Kg,isAnonymous:zf,providerData:Qd,stsTokenManager:lc}=_;ne(Yd&&lc,g,"internal-error");const Kf=ke.fromJSON(this.name,lc);ne("string"==typeof Yd,g,"internal-error"),Xe(Wn,g.name),Xe(Ci,g.name),ne("boolean"==typeof Kg,g,"internal-error"),ne("boolean"==typeof zf,g,"internal-error"),Xe(oo,g.name),Xe(Qa,g.name),Xe(ly,g.name),Xe(qf,g.name),Xe(Mo,g.name),Xe(zg,g.name);const qu=new ft({uid:Yd,auth:g,email:Ci,emailVerified:Kg,displayName:Wn,isAnonymous:zf,photoURL:Qa,phoneNumber:oo,tenantId:ly,stsTokenManager:Kf,createdAt:Mo,lastLoginAt:zg});return Qd&&Array.isArray(Qd)&&(qu.providerData=Qd.map(cy=>Object.assign({},cy))),qf&&(qu._redirectEventId=qf),qu}static _fromIdTokenResponse(g,_,C=!1){return(0,f.Z)(function*(){const x=new ke;x.updateFromServerResponse(_);const F=new ft({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield Ln(F),F})()}}const ln=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,f.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,f.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,f.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return w.type="NONE",w})();function Ct(w,g,_){return`firebase:${w}:${g}:${_}`}class Zn{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:x,name:F}=this.auth;this.fullUserKey=Ct(this.userKey,x.apiKey,F),this.fullPersistenceKey=Ct("persistence",x.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?ft._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,f.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,f.Z)(function*(){if(!_.length)return new Zn(re(ln),g,C);const x=(yield Promise.all(_.map(function(){var _t=(0,f.Z)(function*(Gt){if(yield Gt._isAvailable())return Gt});return function(Gt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let F=x[0]||re(ln);const te=Ct(C,g.config.apiKey,g.name);let Oe=null;for(const _t of _)try{const Gt=yield _t._get(te);if(Gt){const Wn=ft._fromJSON(g,Gt);_t!==F&&(Oe=Wn),F=_t;break}}catch(Gt){}const nt=x.filter(_t=>_t._shouldAllowMigration);return F._shouldAllowMigration&&nt.length?(F=nt[0],Oe&&(yield F._set(te,Oe.toJSON())),yield Promise.all(_.map(function(){var _t=(0,f.Z)(function*(Gt){if(Gt!==F)try{yield Gt._remove(te)}catch(Wn){}});return function(Gt){return _t.apply(this,arguments)}}())),new Zn(F,g,C)):new Zn(F,g,C)})()}}function ce(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Qe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Y(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(xt(g))return"Blackberry";if(qt(g))return"Webos";if(z(g))return"Safari";if((g.includes("chrome/")||Ae(g))&&!g.includes("edge/"))return"Chrome";if(lt(g))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Y(w=(0,B.z$)()){return/firefox\//i.test(w)}function z(w=(0,B.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ae(w=(0,B.z$)()){return/crios\//i.test(w)}function Qe(w=(0,B.z$)()){return/iemobile/i.test(w)}function lt(w=(0,B.z$)()){return/android/i.test(w)}function xt(w=(0,B.z$)()){return/blackberry/i.test(w)}function qt(w=(0,B.z$)()){return/webos/i.test(w)}function Vt(w=(0,B.z$)()){return/iphone|ipad|ipod/i.test(w)}function Hn(w=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Rr(w=(0,B.z$)()){return Vt(w)||lt(w)||qt(w)||xt(w)||/windows phone/i.test(w)||Qe(w)}function fr(w,g=[]){let _;switch(w){case"Browser":_=ce((0,B.z$)());break;case"Worker":_=`${ce((0,B.z$)())}-${w}`;break;default:_=w}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${C}`}class xa{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const C=F=>new Promise((te,Oe)=>{try{te(g(F))}catch(nt){Oe(nt)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,f.Z)(function*(){if(_.auth.currentUser===g)return;const C=[];try{for(const x of _.queue)yield x(g),x.onAbort&&C.push(x.onAbort)}catch(x){C.reverse();for(const F of C)try{F()}catch(te){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x.message})}})()}}class Qr{constructor(g,_,C){this.app=g,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kt(this),this.idTokenSubscription=new kt(this),this.beforeStateQueue=new xa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=re(_)),this._initializationPromise=this.queue((0,f.Z)(function*(){var x,F;if(!C._deleted&&(C.persistenceManager=yield Zn.create(C,g),!C._deleted)){if(null===(x=C._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch(te){}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(F=C.currentUser)||void 0===F?void 0:F.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,f.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let F=x,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Oe=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,nt=null==F?void 0:F._redirectEventId,_t=yield _.tryRedirectSignIn(g);(!Oe||Oe===nt)&&(null==_t?void 0:_t.user)&&(F=_t.user,te=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(F)}catch(Oe){F=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Oe))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return ne(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(g){var _=this;return(0,f.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(x){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,f.Z)(function*(){try{yield Ln(g)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ft(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,f.Z)(function*(){const C=g?(0,B.m9)(g):null;return C&&ne(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g,_=!1){var C=this;return(0,f.Z)(function*(){if(!C._deleted)return g&&ne(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(g)),C.queue((0,f.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,f.Z)(function*(){yield _.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,f.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,f.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&re(g)||_._popupRedirectResolver;ne(C,_,"argument-error"),_.redirectPersistenceManager=yield Zn.create(_,[re(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,f.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,f.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,f.Z)(function*(){if(g===_.currentUser)return _.queue((0,f.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,x){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(te,this,"internal-error"),te.then(()=>F(this.currentUser)),"function"==typeof _?g.addObserver(_,C,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,f.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=fr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var _;const C={"X-Client-Version":g.clientVersion};g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function $e(w){return(0,B.m9)(w)}class kt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yn(w,g,_){const C=$e(w);ne(C._canInitEmulator,C,"emulator-config-failed"),ne(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),F=Hr(g),{host:te,port:Oe}=function Ds(w){const g=Hr(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const F=x[1];return{host:F,port:$n(C.substr(F.length+1))}}{const[F,te]=C.split(":");return{host:F,port:$n(te)}}}(g);C.config.emulator={url:`${F}//${te}${null===Oe?"":`:${Oe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:te,port:Oe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Ts(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Hr(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function $n(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class cn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return he("not implemented")}_getIdTokenResponse(g){return he("not implemented")}_linkToIdToken(g,_){return he("not implemented")}_getReauthenticationResolver(g){return he("not implemented")}}function po(w,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:resetPassword",Lt(w,g))})).apply(this,arguments)}function Mt(w,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ko(w,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",Lt(w,g))})).apply(this,arguments)}function Yn(){return(Yn=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPassword",Lt(w,g))})).apply(this,arguments)}function Zs(w,g){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:sendOobCode",Lt(w,g))})).apply(this,arguments)}function Mr(w,g){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function cd(w,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function Ui(w,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function dd(w,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(w,g){return Zs(w,g)})).apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Lt(w,g))})).apply(this,arguments)}function hd(){return(hd=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithEmailLink",Lt(w,g))})).apply(this,arguments)}class Su extends cn{constructor(g,_,C,x=null){super("password",C),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Su(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new Su(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return function Yo(w,g){return Yn.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ys(w,g){return pi.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:We(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,f.Z)(function*(){switch(C.signInMethod){case"password":return Mt(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Cf(w,g){return hd.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:We(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Qn(w,g){return fd.apply(this,arguments)}function fd(){return(fd=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithIdp",Lt(w,g))})).apply(this,arguments)}class Ss extends cn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ss(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):We("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=_,F=(0,oe._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const te=new Ss(C,x);return te.idToken=F.idToken||void 0,te.accessToken=F.accessToken||void 0,te.secret=F.secret,te.nonce=F.nonce,te.pendingToken=F.pendingToken||null,te}_getIdTokenResponse(g){return Qn(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Qn(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Qn(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function Rg(w,g){return pd.apply(this,arguments)}function pd(){return(pd=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:sendVerificationCode",Lt(w,g))})).apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Lt(w,g))})).apply(this,arguments)}function gd(){return(gd=(0,f.Z)(function*(w,g){const _=yield xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Lt(w,g));if(_.temporaryProof)throw Fn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ng={USER_NOT_FOUND:"user-not-found"};function md(){return(md=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Lt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ng)})).apply(this,arguments)}class Jo extends cn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Jo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Jo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Mg(w,g){return Ra.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Qo(w,g){return gd.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Pg(w,g){return md.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:F}=g;return C||_||x||F?new Jo({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:F}):null}}class As{constructor(g){var _,C,x,F,te,Oe;const nt=(0,B.zd)((0,B.pd)(g)),_t=null!==(_=nt.apiKey)&&void 0!==_?_:null,Gt=null!==(C=nt.oobCode)&&void 0!==C?C:null,Wn=function kg(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);ne(_t&&Gt&&Wn,"argument-error"),this.apiKey=_t,this.operation=Wn,this.code=Gt,this.continueUrl=null!==(F=nt.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(te=nt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Oe=nt.tenantId)&&void 0!==Oe?Oe:null}static parseLink(g){const _=function If(w){const g=(0,B.zd)((0,B.pd)(w)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,C=(0,B.zd)((0,B.pd)(w)).deep_link_id;return(C?(0,B.zd)((0,B.pd)(C)).link:null)||C||_||g||w}(g);try{return new As(_)}catch(C){return null}}}let Ma=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,C){return Su._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=As.parseLink(C);return ne(x,"argument-error"),Su._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Qs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class gi extends Qs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Xo extends gi{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ne("providerId"in _&&"signInMethod"in _,"argument-error"),Ss._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),Ss._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Xo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Xo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:F,nonce:te,providerId:Oe}=g;if(!C&&!x&&!_&&!F||!Oe)return null;try{return new Xo(Oe)._credential({idToken:_,accessToken:C,nonce:te,pendingToken:F})}catch(nt){return null}}}let Na=(()=>{class w extends gi{constructor(){super("facebook.com")}static credential(_){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Pa=(()=>{class w extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return w.credential(C,x)}catch(F){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),bf=(()=>{class w extends gi{constructor(){super("github.com")}static credential(_){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(C){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class _o extends cn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Qn(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Qn(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Qn(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:F}=_;return C&&x&&F&&C===x?new _o(C,F):null}static _create(g,_){return new _o(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xs extends Qs{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return xs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return xs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=_o.fromJSON(g);return ne(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return _o._create(C,_)}catch(x){return null}}}let Bi=(()=>{class w extends gi{constructor(){super("twitter.com")}static credential(_,C){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return w.credential(C,x)}catch(F){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function yd(w,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signUp",Lt(w,g))})).apply(this,arguments)}class Pr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,x=!1){return(0,f.Z)(function*(){const F=yield ft._fromIdTokenResponse(g,C,x),te=vd(C);return new Pr({user:F,providerId:te,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=vd(C);return new Pr({user:g,providerId:x,_tokenResponse:C,operationType:_})})()}}function vd(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function wd(w){return Au.apply(this,arguments)}function Au(){return(Au=(0,f.Z)(function*(w){var g;const _=$e(w);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new Pr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield yd(_,{returnSecureToken:!0}),x=yield Pr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class xu extends B.ZR{constructor(g,_,C,x){var F;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:g.name,tenantId:null!==(F=g.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,x){return new xu(g,_,C,x)}}function Ru(w,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?xu._fromErrorAndOperation(w,F,g,C):F})}function Ol(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Rs(w,g){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w);yield Js(!0,_,g);const{providerUserInfo:C}=yield Br(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Ol(C||[]);return _.providerData=_.providerData.filter(F=>x.has(F.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function vn(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,f.Z)(function*(w,g,_=!1){const C=yield it(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return Pr._forOperation(w,"link",C)})).apply(this,arguments)}function Js(w,g,_){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(w,g,_){yield Ln(g);const x=!1===w?"provider-already-linked":"no-such-provider";ne(Ol(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function Mu(w,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(w,g,_=!1){const{auth:C}=w,x="reauthenticate";try{const F=yield it(w,Ru(C,x,g,w),_);ne(F.idToken,C,"internal-error");const te=jt(F.idToken);ne(te,C,"internal-error");const{sub:Oe}=te;return ne(w.uid===Oe,C,"user-mismatch"),Pr._forOperation(w,x,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&We(C,"user-mismatch"),F}})).apply(this,arguments)}function yo(w,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(w,g,_=!1){const C="signIn",x=yield Ru(w,C,g),F=yield Pr._fromIdTokenResponse(w,C,x);return _||(yield w._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Nu(w,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(w,g){return yo($e(w),g)})).apply(this,arguments)}function Ms(w,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w);return yield Js(!1,_,g.providerId),vn(_,g)})).apply(this,arguments)}function ea(w,g){return rs.apply(this,arguments)}function rs(){return(rs=(0,f.Z)(function*(w,g){return Mu((0,B.m9)(w),g)})).apply(this,arguments)}function Ll(w,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(w,g){return xn(w,"POST","/v1/accounts:signInWithCustomToken",Lt(w,g))})).apply(this,arguments)}function Xs(w,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(w,g){const _=$e(w),C=yield Ll(_,{token:g,returnSecureToken:!0}),x=yield Pr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class wt{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?vo._fromServerResponse(g,_):We(g,"internal-error")}}class vo extends wt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new vo(_)}}function Pu(w,g,_){var C;ne((null===(C=_.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),ne(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ne(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ne(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Ed(w,g,_){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&Pu(C,x,_),yield cd(C,x)})).apply(this,arguments)}function Cd(w,g,_){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(w,g,_){yield po((0,B.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Df(w,g){return to.apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(w,g){yield Ko((0,B.m9)(w),{oobCode:g})})).apply(this,arguments)}function Pe(w,g){return $t.apply(this,arguments)}function $t(){return($t=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w),C=yield po(_,{oobCode:g}),x=C.requestType;switch(ne(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(C.mfaInfo,_,"internal-error");default:ne(C.email,_,"internal-error")}let F=null;return C.mfaInfo&&(F=wt._fromServerResponse($e(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:F},operation:x}})).apply(this,arguments)}function ku(w,g){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,f.Z)(function*(w,g){const{data:_}=yield Pe((0,B.m9)(w),g);return _.email})).apply(this,arguments)}function Id(w,g,_){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,f.Z)(function*(w,g,_){const C=$e(w),x=yield yd(C,{returnSecureToken:!0,email:g,password:_}),F=yield Pr._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(F.user),F})).apply(this,arguments)}function is(w,g,_){return Nu((0,B.m9)(w),Ma.credential(g,_))}function Vl(w,g,_){return La.apply(this,arguments)}function La(){return(La=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};ne(_.handleCodeInApp,C,"argument-error"),_&&Pu(C,x,_),yield Ui(C,x)})).apply(this,arguments)}function Tf(w,g){const _=As.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function bd(w,g,_){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w),x=Ma.credentialWithLink(g,_||de());return ne(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Nu(C,x)})).apply(this,arguments)}function wo(w,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:createAuthUri",Lt(w,g))})).apply(this,arguments)}function ss(w,g){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(w,g){const C={identifier:g,continueUri:Be()?de():"http://localhost"},{signinMethods:x}=yield wo((0,B.m9)(w),C);return x||[]})).apply(this,arguments)}function ra(w,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,f.Z)(function*(w,g){const _=(0,B.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Pu(_.auth,x,g);const{email:F}=yield Mr(_.auth,x);F!==w.email&&(yield w.reload())})).apply(this,arguments)}function Sf(w,g,_){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&Pu(C.auth,F,_);const{email:te}=yield dd(C.auth,F);te!==w.email&&(yield w.reload())})).apply(this,arguments)}function Td(w,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ul(w,g){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,B.m9)(w),F={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield it(C,Td(C.auth,F));C.displayName=te.displayName||null,C.photoURL=te.photoUrl||null;const Oe=C.providerData.find(({providerId:nt})=>"password"===nt);Oe&&(Oe.displayName=C.displayName,Oe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(te)})).apply(this,arguments)}function Sd(w,g){return Bl((0,B.m9)(w),g,null)}function Ad(w,g){return Bl((0,B.m9)(w),null,g)}function Bl(w,g,_){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(w,g,_){const{auth:C}=w,F={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(F.email=g),_&&(F.password=_);const te=yield it(w,Mt(C,F));yield w._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Eo{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class xd extends Eo{constructor(g,_,C,x){super(g,_,C),this.username=x}}class Af extends Eo{constructor(g,_){super(g,"facebook.com",_)}}class Ou extends xd{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class ei extends Eo{constructor(g,_){super(g,"google.com",_)}}class xf extends xd{constructor(g,_,C){super(g,"twitter.com",_,C)}}function jl(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ba(w){var g,_;if(!w)return null;const{providerId:C}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},F=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&(null==w?void 0:w.idToken)){const te=null===(_=null===(g=jt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new Eo(F,"anonymous"!==te&&"custom"!==te?te:null)}if(!C)return null;switch(C){case"facebook.com":return new Af(F,x);case"github.com":return new Ou(F,x);case"google.com":return new ei(F,x);case"twitter.com":return new xf(F,x,w.screenName||null);case"custom":case"anonymous":return new Eo(F,null);default:return new Eo(F,C,x)}}(_)}class Ps{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Ps("enroll",g)}static _fromMfaPendingCredential(g){return new Ps("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ps._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return Ps._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ja{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=$e(g),x=_.customData._serverResponse,F=(x.mfaInfo||[]).map(Oe=>wt._fromServerResponse(C,Oe));ne(x.mfaPendingCredential,C,"internal-error");const te=Ps._fromMfaPendingCredential(x.mfaPendingCredential);return new ja(te,F,function(){var Oe=(0,f.Z)(function*(nt){const _t=yield nt._process(C,te);delete x.mfaInfo,delete x.mfaPendingCredential;const Gt=Object.assign(Object.assign({},x),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(_.operationType){case"signIn":const Wn=yield Pr._fromIdTokenResponse(C,_.operationType,Gt);return yield C._updateCurrentUser(Wn.user),Wn;case"reauthenticate":return ne(_.user,C,"internal-error"),Pr._forOperation(_.user,_.operationType,Gt);default:We(C,"internal-error")}});return function(nt){return Oe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,f.Z)(function*(){return _.signInResolver(g)})()}}function Ha(w,g){var _;const C=(0,B.m9)(w),x=g;return ne(g.customData.operationType,C,"argument-error"),ne(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),ja._fromError(C,x)}function sr(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:start",Lt(w,g))}class ks{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>wt._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new ks(g)}getSession(){var g=this;return(0,f.Z)(function*(){return Ps._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,f.Z)(function*(){const x=g,F=yield C.getSession(),te=yield it(C.user,x._process(C.user.auth,F,_));return yield C.user._updateTokensIfNecessary(te),C.user.reload()})()}unenroll(g){var _=this;return(0,f.Z)(function*(){const C="string"==typeof g?g:g.uid,x=yield _.user.getIdToken(),F=yield it(_.user,function Lg(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(w,g))}(_.user.auth,{idToken:x,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==C),yield _.user._updateTokensIfNecessary(F);try{yield _.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const oa=new WeakMap;function Pd(w){const g=(0,B.m9)(w);return oa.has(g)||oa.set(g,ks._fromUser(g)),oa.get(g)}const Hl="__sak";class Io{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Hl,"1"),this.storage.removeItem(Hl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ti=(()=>{class w extends Io{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $l(){const w=(0,B.z$)();return z(w)||Vt(w)}()&&function ns(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Rr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),F=this.localCache[C];x!==F&&_(C,F,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Oe,nt,_t)=>{this.notifyListeners(Oe,_t)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(x);if(_.newValue!==Oe)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const F=()=>{const Oe=this.storage.getItem(x);!C&&this.localCache[x]===Oe||this.notifyListeners(x,Oe)},te=this.storage.getItem(x);!function Ut(){return(0,B.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const F of Array.from(x))F(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,F=this;return(0,f.Z)(function*(){yield x().call(F,_,C),F.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,f.Z)(function*(){const F=yield C().call(x,_);return x.localCache[_]=JSON.stringify(F),F})()}_remove(_){var C=()=>super._remove,x=this;return(0,f.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),Fu=(()=>{class w extends Io{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return w.type="SESSION",w})();let aa=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(F=>F.isListeningto(_));if(C)return C;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,f.Z)(function*(){const x=_,{eventId:F,eventType:te,data:Oe}=x.data,nt=C.handlersMap[te];if(!(null==nt?void 0:nt.size))return;x.ports[0].postMessage({status:"ack",eventId:F,eventType:te});const _t=Array.from(nt).map(function(){var Wn=(0,f.Z)(function*(Ci){return Ci(x.origin,Oe)});return function(Ci){return Wn.apply(this,arguments)}}()),Gt=yield function Wl(w){return Promise.all(w.map(function(){var g=(0,f.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(_t);x.ports[0].postMessage({status:"done",eventId:F,eventType:te,response:Gt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ua(w="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return w+_}class la{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var x=this;return(0,f.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let te,Oe;return new Promise((nt,_t)=>{const Gt=ua("",20);F.port1.start();const Wn=setTimeout(()=>{_t(new Error("unsupported_event"))},C);Oe={messageChannel:F,onMessage(Ci){const oo=Ci;if(oo.data.eventId===Gt)switch(oo.data.status){case"ack":clearTimeout(Wn),te=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),nt(oo.data.response);break;default:clearTimeout(Wn),clearTimeout(te),_t(new Error("invalid_response"))}}},x.handlers.add(Oe),F.port1.addEventListener("message",Oe.onMessage),x.target.postMessage({eventType:g,eventId:Gt,data:_},[F.port2])}).finally(()=>{Oe&&x.removeMessageHandler(Oe)})})()}}function on(){return window}function mt(){return void 0!==on().WorkerGlobalScope&&"function"==typeof on().importScripts}function no(){return(no=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const zl="firebaseLocalStorageDb",mi="firebaseLocalStorage",kr="fbase_key";class Fs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function bo(w,g){return w.transaction([mi],g?"readwrite":"readonly").objectStore(mi)}function Do(){const w=indexedDB.open(zl,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(mi,{keyPath:kr})}catch(x){_(x)}}),w.addEventListener("success",(0,f.Z)(function*(){const C=w.result;C.objectStoreNames.contains(mi)?g(C):(C.close(),yield function _i(){const w=indexedDB.deleteDatabase(zl);return new Fs(w).toPromise()}(),g(yield Do()))}))})}function Kl(w,g,_){return ji.apply(this,arguments)}function ji(){return(ji=(0,f.Z)(function*(w,g,_){const C=bo(w,!0).put({[kr]:g,value:_});return new Fs(C).toPromise()})).apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(w,g){const _=bo(w,!1).get(g),C=yield new Fs(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Pn(w,g){const _=bo(w,!0).delete(g);return new Fs(_).toPromise()}const To=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,f.Z)(function*(){return _.db||(_.db=yield Do()),_.db})()}_withRetries(_){var C=this;return(0,f.Z)(function*(){let x=0;for(;;)try{const F=yield C._openDb();return yield _(F)}catch(F){if(x++>3)throw F;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,f.Z)(function*(){return mt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,f.Z)(function*(){_.receiver=aa._getInstance(function ql(){return mt()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,f.Z)(function*(x,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(x,F){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,f.Z)(function*(x,F){return["keyChanged"]});return function(x,F){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,f.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function Lu(){return no.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new la(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(C=F[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=F[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,f.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Mf(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Do();return yield Kl(_,Hl,"1"),yield Pn(_,Hl),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,f.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,f.Z)(function*(){return x._withPendingWrite((0,f.Z)(function*(){return yield x._withRetries(F=>Kl(F,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,f.Z)(function*(){const x=yield C._withRetries(F=>function os(w,g){return ca.apply(this,arguments)}(F,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,f.Z)(function*(){return C._withPendingWrite((0,f.Z)(function*(){return yield C._withRetries(x=>Pn(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,f.Z)(function*(){const C=yield _._withRetries(te=>{const Oe=bo(te,!1).getAll();return new Fs(Oe).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],F=new Set;for(const{fbase_key:te,value:Oe}of C)F.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(Oe)&&(_.notifyListeners(te,Oe),x.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!F.has(te)&&(_.notifyListeners(te,null),x.push(te));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const F of Array.from(x))F(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Od(w,g){return Zt(w,"POST","/v2/accounts/mfaSignIn:start",Lt(w,g))}function Hi(){return(Hi=(0,f.Z)(function*(w){return(yield Zt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function So(w){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=g,C.onerror=x=>{const F=Me("internal-error");F.customData=x,_(F)},C.type="text/javascript",C.charset="UTF-8",function Yl(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(C)})}function Ga(w){return`__${w}${Math.floor(1e6*Math.random())}`}const yi=1e12;class Fd{constructor(g){this.auth=g,this.counter=yi,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Uu(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||yi;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||yi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,f.Z)(function*(){var C;return null===(C=_._widgets.get(g||yi))||void 0===C||C.execute(),""})()}}class Uu{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ne(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function da(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wa=Ga("rcb"),Nf=new Ye(3e4,6e4);class Pf{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!on().grecaptcha}load(g,_=""){return ne(function kf(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(on().grecaptcha):new Promise((C,x)=>{const F=on().setTimeout(()=>{x(Me(g,"network-request-failed"))},Nf.get());on()[Wa]=()=>{on().clearTimeout(F),delete on()[Wa];const Oe=on().grecaptcha;if(!Oe)return void x(Me(g,"internal-error"));const nt=Oe.render;Oe.render=(_t,Gt)=>{const Wn=nt(_t,Gt);return this.counter++,Wn},this.hostLanguage=_,C(Oe)},So(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:Wa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),x(Me(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!on().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Of{load(g){return(0,f.Z)(function*(){return new Fd(g)})()}clearedOneInstance(){}}const Ql="recaptcha",Ld={theme:"light",type:"image"};class Vd{constructor(g,_=Object.assign({},Ld),C){this.parameters=_,this.type=Ql,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$e(C),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ne(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Of:new Pf,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(F=>{const te=Oe=>{!Oe||(g.tokenChangeListeners.delete(te),F(Oe))};g.tokenChangeListeners.add(te),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=on()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){ne(Be()&&!mt(),g.auth,"internal-error"),yield function Jl(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function Zl(w){return Hi.apply(this,arguments)}(g.auth);ne(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ro{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Jo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Ff(w,g,_){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(w,g,_){const C=$e(w),x=yield Or(C,g,(0,B.m9)(_));return new ro(x,F=>Nu(C,F))})).apply(this,arguments)}function us(w,g,_){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w);yield Js(!1,C,"phone");const x=yield Or(C.auth,g,(0,B.m9)(_));return new ro(x,F=>Ms(C,F))})).apply(this,arguments)}function Lf(w,g,_){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w),x=yield Or(C.auth,g,(0,B.m9)(_));return new ro(x,F=>ea(C,F))})).apply(this,arguments)}function Or(w,g,_){return $r.apply(this,arguments)}function $r(){return($r=(0,f.Z)(function*(w,g,_){var C;const x=yield _.verify();try{let F;if(ne("string"==typeof x,w,"argument-error"),ne(_.type===Ql,w,"argument-error"),F="string"==typeof g?{phoneNumber:g}:g,"session"in F){const te=F.session;if("phoneNumber"in F)return ne("enroll"===te.type,w,"internal-error"),(yield sr(w,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ne("signin"===te.type,w,"internal-error");const Oe=(null===(C=F.multiFactorHint)||void 0===C?void 0:C.uid)||F.multiFactorUid;return ne(Oe,w,"missing-multi-factor-info"),(yield Od(w,{mfaPendingCredential:te.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Rg(w,{phoneNumber:F.phoneNumber,recaptchaToken:x});return te}}finally{_._reset()}})).apply(this,arguments)}function Xl(w,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(w,g){yield vn((0,B.m9)(w),g)})).apply(this,arguments)}let cs=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=$e(_)}verifyPhoneNumber(_,C){return Or(this.auth,_,(0,B.m9)(C))}static credential(_,C){return Jo._fromVerification(_,C)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?Jo._fromTokenResponse(C,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ds(w,g){return g?re(g):(ne(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class xo extends cn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Qn(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Qn(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Qn(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ec(w){return yo(w.auth,new xo(w),w.bypassAuthState)}function Vf(w){const{auth:g,user:_}=w;return ne(_,g,"internal-error"),Mu(_,new xo(w),w.bypassAuthState)}function Uf(w){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,f.Z)(function*(w){const{auth:g,user:_}=w;return ne(_,g,"internal-error"),vn(_,new xo(w),w.bypassAuthState)})).apply(this,arguments)}class vi{constructor(g,_,C,x,F=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,f.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(F){g.reject(F)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,f.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:F,tenantId:te,error:Oe,type:nt}=g;if(Oe)return void _.reject(Oe);const _t={auth:_.auth,requestUri:C,sessionId:x,tenantId:te||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(_t))}catch(Gt){_.reject(Gt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ec;case"linkViaPopup":case"linkViaRedirect":return Uf;case"reauthViaPopup":case"reauthViaRedirect":return Vf;default:We(this.auth,"internal-error")}}resolve(g){De(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){De(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bf=new Ye(2e3,1e4);function qa(w,g,_){return jd.apply(this,arguments)}function jd(){return(jd=(0,f.Z)(function*(w,g,_){const C=$e(w);be(w,g,Qs);const x=ds(C,_);return new wi(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function io(w,g,_){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w);be(C.auth,g,Qs);const x=ds(C.auth,_);return new wi(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function jf(w,g,_){return tc.apply(this,arguments)}function tc(){return(tc=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w);be(C.auth,g,Qs);const x=ds(C.auth,_);return new wi(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let wi=(()=>{class w extends vi{constructor(_,C,x,F,te){super(_,C,F,te),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,f.Z)(function*(){const C=yield _.execute();return ne(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,f.Z)(function*(){De(1===_.filter.length,"Popup operations only handle one event");const C=ua();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Me(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=(null===(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Bf.get())};_()}}return w.currentPopupAction=null,w})();const Fr=new Map;class ha extends vi{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,f.Z)(function*(){let C=Fr.get(_.auth._key());if(!C){try{const F=(yield function nc(w,g){return Ka.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(F)}catch(x){C=()=>Promise.reject(x)}Fr.set(_.auth._key(),C)}return _.bypassAuthState||Fr.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ka(){return(Ka=(0,f.Z)(function*(w,g){const _=M(g),C=T(w);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function hs(w,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(w,g){return T(w)._set(M(g),"true")})).apply(this,arguments)}function rc(){Fr.clear()}function b(w,g){Fr.set(w._key(),g)}function T(w){return re(w._redirectPersistence)}function M(w){return Ct("pendingRedirect",w.config.apiKey,w.name)}function V(w,g,_){return function X(w,g,_){return ue.apply(this,arguments)}(w,g,_)}function ue(){return(ue=(0,f.Z)(function*(w,g,_){const C=$e(w);be(w,g,Qs);const x=ds(C,_);return yield hs(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function Ue(w,g,_){return function ot(w,g,_){return st.apply(this,arguments)}(w,g,_)}function st(){return(st=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w);be(C.auth,g,Qs);const x=ds(C.auth,_);yield hs(x,C.auth);const F=yield Ei(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",F)})).apply(this,arguments)}function Tt(w,g,_){return function Yt(w,g,_){return It.apply(this,arguments)}(w,g,_)}function It(){return(It=(0,f.Z)(function*(w,g,_){const C=(0,B.m9)(w);be(C.auth,g,Qs);const x=ds(C.auth,_);yield Js(!1,C,g.providerId),yield hs(x,C.auth);const F=yield Ei(C);return x._openRedirect(C.auth,g,"linkViaRedirect",F)})).apply(this,arguments)}function ar(w,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,f.Z)(function*(w,g){return yield $e(w)._initializationPromise,so(w,g,!1)})).apply(this,arguments)}function so(w,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(w,g,_=!1){const C=$e(w),x=ds(C,g),te=yield new ha(C,x,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield C._persistUserIfCurrent(te.user),yield C._setRedirectUser(null,g)),te})).apply(this,arguments)}function Ei(w){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(w){const g=ua(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Ro{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ic(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $d(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!$d(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Me(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hd(g))}saveEventToCache(g){this.cachedEventUids.add(Hd(g)),this.lastProcessedEventTime=Date.now()}}function Hd(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function $d({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function ju(w){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(w,g={}){return Zt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Bg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hf=/^https?/;function fa(){return(fa=(0,f.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield ju(w);for(const _ of g)try{if(jg(_))return}catch(C){}We(w,"unauthorized-domain")})).apply(this,arguments)}function jg(w){const g=de(),{protocol:_,hostname:C}=new URL(g);if(w.startsWith("chrome-extension://")){const te=new URL(w);return""===te.hostname&&""===C?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===C}if(!Hf.test(_))return!1;if(Bg.test(w))return C===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const J_=new Ye(3e4,6e4);function sc(){const w=on().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let $u=null;function X_(w){return $u=$u||function oc(w){return new Promise((g,_)=>{var C,x,F;function te(){sc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{sc(),_(Me(w,"network-request-failed"))},timeout:J_.get()})}if(null===(x=null===(C=on().gapi)||void 0===C?void 0:C.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(F=on().gapi)||void 0===F?void 0:F.load)){const Oe=Ga("iframefcb");return on()[Oe]=()=>{gapi.load?te():_(Me(w,"network-request-failed"))},So(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(nt=>_(nt))}te()}}).catch(g=>{throw $u=null,g})}(w),$u}const ey=new Ye(5e3,15e3),Gd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L0(w){const g=w.config;ne(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?hn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},x=uc.get(w.config.apiHost);x&&(C.eid=x);const F=w._getFrameworks();return F.length&&(C.fw=F.join(",")),`${_}?${(0,B.xO)(C).slice(1)}`}function ty(){return ty=(0,f.Z)(function*(w){const g=yield X_(w),_=on().gapi;return ne(_,w,"internal-error"),g.open({where:document.body,url:L0(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gd,dontclear:!0},C=>new Promise(function(){var x=(0,f.Z)(function*(F,te){yield C.restyle({setHideOnLeave:!1});const Oe=Me(w,"network-request-failed"),nt=on().setTimeout(()=>{te(Oe)},ey.get());function _t(){on().clearTimeout(nt),F(C)}C.ping(_t).then(_t,()=>{te(Oe)})});return function(F,te){return x.apply(this,arguments)}}()))}),ty.apply(this,arguments)}const Wd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Zd(w,g,_,C,x,F){ne(w.config.authDomain,w,"auth-domain-config-required"),ne(w.config.apiKey,w,"invalid-api-key");const te={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:C,v:N.SDK_VERSION,eventId:x};if(g instanceof Qs){g.setDefaultLanguage(w.languageCode),te.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,_t]of Object.entries(F||{}))te[nt]=_t}if(g instanceof gi){const nt=g.getScopes().filter(_t=>""!==_t);nt.length>0&&(te.scopes=nt.join(","))}w.tenantId&&(te.tid=w.tenantId);const Oe=te;for(const nt of Object.keys(Oe))void 0===Oe[nt]&&delete Oe[nt];return`${function pa({config:w}){return w.emulator?hn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,B.xO)(Oe).slice(1)}`}const ga="webStorageSupport",Gg=class iy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fu,this._completeRedirectFn=so,this._overrideRedirectResult=b}_openPopup(g,_,C,x){var F=this;return(0,f.Z)(function*(){var te;De(null===(te=F.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Oe=Zd(g,_,C,de(),x);return function ny(w,g,_,C=500,x=600){const F=Math.max((window.screen.availHeight-x)/2,0).toString(),te=Math.max((window.screen.availWidth-C)/2,0).toString();let Oe="";const nt=Object.assign(Object.assign({},Wd),{width:C.toString(),height:x.toString(),top:F,left:te}),_t=(0,B.z$)().toLowerCase();_&&(Oe=Ae(_t)?"_blank":_),Y(_t)&&(g=g||"http://localhost",nt.scrollbars="yes");const Gt=Object.entries(nt).reduce((Ci,[oo,Qa])=>`${Ci}${oo}=${Qa},`,"");if(function Yr(w=(0,B.z$)()){var g;return Vt(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(_t)&&"_self"!==Oe)return function $g(w,g){const _=document.createElement("a");_.href=w,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",Oe),new Kd(null);const Wn=window.open(g||"",Oe,Gt);ne(Wn,w,"popup-blocked");try{Wn.focus()}catch(Ci){}return new Kd(Wn)}(g,Oe,ua())})()}_openRedirect(g,_,C,x){var F=this;return(0,f.Z)(function*(){return yield F._originValidation(g),function or(w){on().location.href=w}(Zd(g,_,C,de(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:F}=this.eventManagers[_];return x?Promise.resolve(x):(De(F,"If manager is not set, promise should be"),F)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(g){var _=this;return(0,f.Z)(function*(){const C=yield function V0(w){return ty.apply(this,arguments)}(g),x=new Ro(g);return C.register("authEvent",F=>(ne(null==F?void 0:F.authEvent,g,"invalid-auth-event"),{status:x.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(ga,{type:ga},x=>{var F;const te=null===(F=null==x?void 0:x[0])||void 0===F?void 0:F[ga];void 0!==te&&_(!!te),We(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Hu(w){return fa.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Rr()||z()||Vt()}};class qg extends class Wg{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new qg(g)}_finalizeEnroll(g,_,C){return function Nd(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(w,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function $a(w,g){return Zt(w,"POST","/v2/accounts/mfaSignIn:finalize",Lt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sy=(()=>{class w{constructor(){}static assertion(_){return qg._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var oy="@firebase/auth";class ay{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,f.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Wf(w=(0,N.getApp)()){const g=(0,N._getProvider)(w,"auth");return g.isInitialized()?g.getImmediate():function se(w,g){const _=(0,N._getProvider)(w,"auth");if(_.isInitialized()){const x=_.getImmediate(),F=_.getOptions();if((0,B.vZ)(F,null!=g?g:{}))return x;We(x,"already-initialized")}return _.initialize({options:g})}(w,{popupRedirectResolver:Gg,persistence:[To,ti,Fu]})}!function uy(w){(0,N._registerComponent)(new _e.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:F,authDomain:te}=C.options;return((Oe,nt)=>{ne(F&&!F.includes(":"),"invalid-api-key",{appName:Oe.name}),ne(!(null==te?void 0:te.includes(":")),"argument-error",{appName:Oe.name});const _t={apiKey:F,authDomain:te,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fr(w)},Gt=new Qr(Oe,nt,_t);return function ve(w,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map(re);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(Gt,_),Gt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new _e.wA("auth-internal",g=>{const _=$e(g.getProvider("auth").getImmediate());return new ay(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(oy,"0.20.2",function Gf(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(oy,"0.20.2","esm2017")}("Browser")},2090:(tt,Ie,O)=>{O.d(Ie,{$s:()=>Ht,BH:()=>ze,DV:()=>Zt,Dv:()=>br,G6:()=>ne,GJ:()=>rn,L:()=>le,LL:()=>de,Mn:()=>be,Pz:()=>Ft,Sg:()=>Re,UG:()=>ge,UI:()=>Li,US:()=>_e,Wj:()=>Dn,Yr:()=>Ke,ZB:()=>H,ZR:()=>ve,b$:()=>We,cI:()=>zt,d:()=>Me,dS:()=>bs,eu:()=>De,g5:()=>N,gK:()=>rr,gQ:()=>Fn,h$:()=>fe,hl:()=>he,hu:()=>B,jU:()=>Se,lb:()=>ir,m9:()=>pn,ne:()=>es,p$:()=>W,pd:()=>Vi,r3:()=>Lt,ru:()=>qe,tV:()=>ye,uI:()=>Ge,ug:()=>jt,vZ:()=>xr,w1:()=>Ne,w9:()=>fn,xO:()=>Xi,xb:()=>Sn,z$:()=>Ve,zI:()=>Q,zd:()=>ci});const B=function(j,q){if(!j)throw N(q)},N=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},oe=function(j){const q=[];let Z=0;for(let Ee=0;Ee<j.length;Ee++){let $=j.charCodeAt(Ee);$<128?q[Z++]=$:$<2048?(q[Z++]=$>>6|192,q[Z++]=63&$|128):55296==(64512&$)&&Ee+1<j.length&&56320==(64512&j.charCodeAt(Ee+1))?($=65536+((1023&$)<<10)+(1023&j.charCodeAt(++Ee)),q[Z++]=$>>18|240,q[Z++]=$>>12&63|128,q[Z++]=$>>6&63|128,q[Z++]=63&$|128):(q[Z++]=$>>12|224,q[Z++]=$>>6&63|128,q[Z++]=63&$|128)}return q},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,q){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let $=0;$<j.length;$+=3){const J=j[$],ke=$+1<j.length,Xe=ke?j[$+1]:0,ft=$+2<j.length,Rt=ft?j[$+2]:0;let Zn=(15&Xe)<<2|Rt>>6,ce=63&Rt;ft||(ce=64,ke||(Zn=64)),Ee.push(Z[J>>2],Z[(3&J)<<4|Xe>>4],Z[Zn],Z[ce])}return Ee.join("")},encodeString(j,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(j):this.encodeByteArray(oe(j),q)},decodeString(j,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(j):function(j){const q=[];let Z=0,Ee=0;for(;Z<j.length;){const $=j[Z++];if($<128)q[Ee++]=String.fromCharCode($);else if($>191&&$<224){const J=j[Z++];q[Ee++]=String.fromCharCode((31&$)<<6|63&J)}else if($>239&&$<365){const ft=((7&$)<<18|(63&j[Z++])<<12|(63&j[Z++])<<6|63&j[Z++])-65536;q[Ee++]=String.fromCharCode(55296+(ft>>10)),q[Ee++]=String.fromCharCode(56320+(1023&ft))}else{const J=j[Z++],ke=j[Z++];q[Ee++]=String.fromCharCode((15&$)<<12|(63&J)<<6|63&ke)}}return q.join("")}(this.decodeStringToByteArray(j,q))},decodeStringToByteArray(j,q){this.init_();const Z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let $=0;$<j.length;){const J=Z[j.charAt($++)],Xe=$<j.length?Z[j.charAt($)]:0;++$;const Rt=$<j.length?Z[j.charAt($)]:64;++$;const Ct=$<j.length?Z[j.charAt($)]:64;if(++$,null==J||null==Xe||null==Rt||null==Ct)throw Error();Ee.push(J<<2|Xe>>4),64!==Rt&&(Ee.push(Xe<<4&240|Rt>>2),64!==Ct&&Ee.push(Rt<<6&192|Ct))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},fe=function(j){const q=oe(j);return _e.encodeByteArray(q,!0)},le=function(j){return fe(j).replace(/\./g,"")},ye=function(j){try{return _e.decodeString(j,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function W(j){return H(void 0,j)}function H(j,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return q}for(const Z in q)!q.hasOwnProperty(Z)||!ie(Z)||(j[Z]=H(j[Z],q[Z]));return j}function ie(j){return"__proto__"!==j}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Z)=>{this.resolve=q,this.reject=Z})}wrapCallback(q){return(Z,Ee)=>{Z?this.reject(Z):this.resolve(Ee),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Z):q(Z,Ee))}}}function Re(j,q){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=q||"demo-project",$=j.iat||0,J=j.sub||j.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:$,exp:$+3600,auth_time:$,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},j);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ke)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function Se(){return"object"==typeof self&&self.self===self}function qe(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Ve().indexOf("Electron/")>=0}function Ne(){const j=Ve();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function be(){return Ve().indexOf("MSAppHost/")>=0}function Ke(){return!1}function ne(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function De(){return new Promise((j,q)=>{try{let Z=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(Ee);$.onsuccess=()=>{$.result.close(),Z||self.indexedDB.deleteDatabase(Ee),j(!0)},$.onupgradeneeded=()=>{Z=!1},$.onerror=()=>{var J;q((null===(J=$.error)||void 0===J?void 0:J.message)||"")}}catch(Z){q(Z)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ve extends Error{constructor(q,Z,Ee){super(Z),this.code=q,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(q,Z,Ee){this.service=q,this.serviceName=Z,this.errors=Ee}create(q,...Z){const Ee=Z[0]||{},$=`${this.service}/${q}`,J=this.errors[q],ke=J?function Be(j,q){return j.replace(ht,(Z,Ee)=>{const $=q[Ee];return null!=$?String($):`<${Ee}?>`})}(J,Ee):"Error";return new ve($,`${this.serviceName}: ${ke} (${$}).`,Ee)}}const ht=/\{\$([^}]+)}/g;function zt(j){return JSON.parse(j)}function Ft(j){return JSON.stringify(j)}const Ye=function(j){let q={},Z={},Ee={},$="";try{const J=j.split(".");q=zt(ye(J[0])||""),Z=zt(ye(J[1])||""),$=J[2],Ee=Z.d||{},delete Z.d}catch(J){}return{header:q,claims:Z,data:Ee,signature:$}},fn=function(j){const Z=Ye(j).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},rn=function(j){const q=Ye(j).claims;return"object"==typeof q&&!0===q.admin};function Lt(j,q){return Object.prototype.hasOwnProperty.call(j,q)}function Zt(j,q){if(Object.prototype.hasOwnProperty.call(j,q))return j[q]}function Sn(j){for(const q in j)if(Object.prototype.hasOwnProperty.call(j,q))return!1;return!0}function Li(j,q,Z){const Ee={};for(const $ in j)Object.prototype.hasOwnProperty.call(j,$)&&(Ee[$]=q.call(Z,j[$],$,j));return Ee}function xr(j,q){if(j===q)return!0;const Z=Object.keys(j),Ee=Object.keys(q);for(const $ of Z){if(!Ee.includes($))return!1;const J=j[$],ke=q[$];if(xn(J)&&xn(ke)){if(!xr(J,ke))return!1}else if(J!==ke)return!1}for(const $ of Ee)if(!Z.includes($))return!1;return!0}function xn(j){return null!==j&&"object"==typeof j}function Xi(j){const q=[];for(const[Z,Ee]of Object.entries(j))Array.isArray(Ee)?Ee.forEach($=>{q.push(encodeURIComponent(Z)+"="+encodeURIComponent($))}):q.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ee));return q.length?"&"+q.join("&"):""}function ci(j){const q={};return j.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[$,J]=Ee.split("=");q[decodeURIComponent($)]=decodeURIComponent(J)}}),q}function Vi(j){const q=j.indexOf("?");if(!q)return"";const Z=j.indexOf("#",q);return j.substring(q,Z>0?Z:void 0)}class Fn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,Z){Z||(Z=0);const Ee=this.W_;if("string"==typeof q)for(let Ct=0;Ct<16;Ct++)Ee[Ct]=q.charCodeAt(Z)<<24|q.charCodeAt(Z+1)<<16|q.charCodeAt(Z+2)<<8|q.charCodeAt(Z+3),Z+=4;else for(let Ct=0;Ct<16;Ct++)Ee[Ct]=q[Z]<<24|q[Z+1]<<16|q[Z+2]<<8|q[Z+3],Z+=4;for(let Ct=16;Ct<80;Ct++){const Zn=Ee[Ct-3]^Ee[Ct-8]^Ee[Ct-14]^Ee[Ct-16];Ee[Ct]=4294967295&(Zn<<1|Zn>>>31)}let Rt,ln,$=this.chain_[0],J=this.chain_[1],ke=this.chain_[2],Xe=this.chain_[3],ft=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Rt=Xe^J&(ke^Xe),ln=1518500249):(Rt=J^ke^Xe,ln=1859775393):Ct<60?(Rt=J&ke|Xe&(J|ke),ln=2400959708):(Rt=J^ke^Xe,ln=3395469782);const Zn=($<<5|$>>>27)+Rt+ft+ln+Ee[Ct]&4294967295;ft=Xe,Xe=ke,ke=4294967295&(J<<30|J>>>2),J=$,$=Zn}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+J&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+ft&4294967295}update(q,Z){if(null==q)return;void 0===Z&&(Z=q.length);const Ee=Z-this.blockSize;let $=0;const J=this.buf_;let ke=this.inbuf_;for(;$<Z;){if(0===ke)for(;$<=Ee;)this.compress_(q,$),$+=this.blockSize;if("string"==typeof q){for(;$<Z;)if(J[ke]=q.charCodeAt($),++ke,++$,ke===this.blockSize){this.compress_(J),ke=0;break}}else for(;$<Z;)if(J[ke]=q[$],++ke,++$,ke===this.blockSize){this.compress_(J),ke=0;break}}this.inbuf_=ke,this.total_+=Z}digest(){const q=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&Z,Z/=256;this.compress_(this.buf_);let Ee=0;for(let $=0;$<5;$++)for(let J=24;J>=0;J-=8)q[Ee]=this.chain_[$]>>J&255,++Ee;return q}}function es(j,q){const Z=new gt(j,q);return Z.subscribe.bind(Z)}class gt{constructor(q,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{q(this)}).catch(Ee=>{this.error(Ee)})}next(q){this.forEachObserver(Z=>{Z.next(q)})}error(q){this.forEachObserver(Z=>{Z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Z,Ee){let $;if(void 0===q&&void 0===Z&&void 0===Ee)throw new Error("Missing Observer.");$=function bn(j,q){if("object"!=typeof j||null===j)return!1;for(const Z of q)if(Z in j&&"function"==typeof j[Z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:Z,complete:Ee},void 0===$.next&&($.next=sn),void 0===$.error&&($.error=sn),void 0===$.complete&&($.complete=sn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(ke){}}),this.observers.push($),J}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,q)}sendOne(q,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Z(this.observers[q])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sn(){}const br=function(j,q,Z,Ee){let $;if(Ee<q?$="at least "+q:Ee>Z&&($=0===Z?"none":"no more than "+Z),$)throw new Error(j+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+$+".")};function rr(j,q){return`${j} failed: ${q} argument `}function Dn(j,q,Z,Ee){if((!Ee||Z)&&"function"!=typeof Z)throw new Error(rr(j,q)+"must be a valid function.")}function ir(j,q,Z,Ee){if((!Ee||Z)&&("object"!=typeof Z||null===Z))throw new Error(rr(j,q)+"must be a valid context object.")}const bs=function(j){const q=[];let Z=0;for(let Ee=0;Ee<j.length;Ee++){let $=j.charCodeAt(Ee);if($>=55296&&$<=56319){const J=$-55296;Ee++,B(Ee<j.length,"Surrogate pair missing trail surrogate."),$=65536+(J<<10)+(j.charCodeAt(Ee)-56320)}$<128?q[Z++]=$:$<2048?(q[Z++]=$>>6|192,q[Z++]=63&$|128):$<65536?(q[Z++]=$>>12|224,q[Z++]=$>>6&63|128,q[Z++]=63&$|128):(q[Z++]=$>>18|240,q[Z++]=$>>12&63|128,q[Z++]=$>>6&63|128,q[Z++]=63&$|128)}return q},jt=function(j){let q=0;for(let Z=0;Z<j.length;Z++){const Ee=j.charCodeAt(Z);Ee<128?q++:Ee<2048?q+=2:Ee>=55296&&Ee<=56319?(q+=4,Z++):q+=3}return q};function Ht(j,q=1e3,Z=2){const Ee=q*Math.pow(Z,j),$=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+$)}function pn(j){return j&&j._delegate?j._delegate:j}},1748:(tt,Ie,O)=>{var f=O(5e3);let B=null;function N(){return B}const fe=new f.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ye(){return(0,f.LFG)(H)}()},providedIn:"platform"}),n})();const W=new f.OlP("Location Initialized");let H=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new H((0,f.LFG)(fe))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Se(n){const e=(0,f.LFG)(fe).location;return new We((0,f.LFG)(le),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new f.OlP("appBaseHref");let We=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ve(ne(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function Ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Re,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(f.LFG(ge),f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function be(){return new Ne((0,f.LFG)(ge),(0,f.LFG)(le))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}class Yo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Yo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Zs(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Zs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Zs(n,e){n.context.$implicit=e.item}let Mr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new gn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class gn{constructor(){this.$implicit=null,this.ngIf=null}}function cd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let _o=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Pr(n){return"server"===n}let xu=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Ru((0,f.LFG)(fe),window)}),n})();class Ru{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Rs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ol(this.window.history)||Ol(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ol(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js extends class ka extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){B||(B=n)}(new Js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Mu(){return mn=mn||document.querySelector("base"),mn?mn.getAttribute("href"):null}();return null==t?null:function yo(n){Oa=Oa||document.createElement("a"),Oa.setAttribute("href",n);const e=Oa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){mn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function zo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Oa,mn=null;const pr=new f.OlP("TRANSITION_ID"),Un=[{provide:f.ip1,useFactory:function Nu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[pr,fe,f.zs3],multi:!0}];class Ms{static init(){(0,f.VLi)(new Ms)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let gr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const ea=new f.OlP("EventManagerPlugins");let rs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ea),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ll{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Xs=(()=>{class n extends Jr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(eo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(eo))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function eo(n){N().remove(n)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vo=/%COMP%/g;function to(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?to(n,i,t):(i=i.replace(vo,n),t.push(i))}return t}function Pe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ku=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Tn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new is(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Vl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=to(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rs),f.LFG(Xs),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Tn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=wt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=wt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pe(r)):this.eventManager.addEventListener(e,t,Pe(r))}}class is extends Tn{constructor(e,t,r,i){super(e),this.component=r;const a=to(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ta(n){return"_ngcontent-%COMP%".replace(vo,n)}(i+"-"+r.id),this.hostAttr=function Df(n){return"_nghost-%COMP%".replace(vo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Vl extends Tn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=to(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let La=(()=>{class n extends Ll{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Tf=["alt","control","meta","shift"],Dd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wo={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ss=(()=>{class n extends Ll{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Tf.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function na(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&wo.hasOwnProperty(e)&&(e=wo[e]))}return Dd[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Tf.forEach(a=>{a!=i&&mr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Td=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ra(){Js.makeCurrent(),Ms.init()},multi:!0},{provide:fe,useFactory:function Sf(){return(0,f.RDi)(document),document},deps:[]}]),Va=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Xr(){return new f.qLn},deps:[]},{provide:ea,useClass:La,multi:!0,deps:[fe,f.R0b,f.Lbi]},{provide:ea,useClass:ss,multi:!0,deps:[fe]},{provide:ku,useClass:ku,deps:[rs,Xs,f.AFp]},{provide:f.FYo,useExisting:ku},{provide:Jr,useExisting:Xs},{provide:Xs,useClass:Xs,deps:[fe]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:rs,useClass:rs,deps:[ea,f.R0b]},{provide:class vn{},useClass:gr,deps:[]}];let Ul=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:pr,useExisting:f.AFp},Un]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Va,imports:[_o,f.hGG]}),n})();"undefined"!=typeof window&&window;var wn=O(8996),Os=O(8306);const{isArray:ti}=Array,{getPrototypeOf:Gl,prototype:Fu,keys:Wl}=Object;function aa(n){if(1===n.length){const e=n[0];if(ti(e))return{args:e,keys:null};if(function ua(n){return n&&"object"==typeof n&&Gl(n)===Fu}(e)){const t=Wl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var la=O(8421),on=O(7669),or=O(5403),mt=O(4004);const{isArray:Lu}=Array;function Mf(n){return(0,mt.U)(e=>function no(n,e){return Lu(e)?n(...e):n(e)}(n,e))}function ql(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let kd=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),mi=(()=>{class n extends kd{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const kr=new f.OlP("NgValueAccessor"),_i={provide:kr,useExisting:(0,f.Gpc)(()=>ji),multi:!0},Kl=new f.OlP("CompositionEventMode");let ji=(()=>{class n extends kd{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Do(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Kl,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([_i]),f.qOj]}),n})();function os(n){return null==n||0===n.length}function ca(n){return null!=n&&"number"==typeof n.length}const Pn=new f.OlP("NgValidators"),as=new f.OlP("NgAsyncValidators"),Ug=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Vu{static min(e){return function To(n){return e=>{if(os(e.value)||os(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Od(n){return e=>{if(os(e.value)||os(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function $a(n){return os(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Zl(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Hi(n){return os(n.value)||Ug.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Yl(n){return e=>os(e.value)||!ca(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return So(e)}static pattern(e){return function Ga(n){if(!n)return $i;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(os(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Nf(e)}static composeAsync(e){return Pf(e)}}function So(n){return e=>ca(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function $i(n){return null}function Ao(n){return null!=n}function yi(n){const e=(0,f.QGY)(n)?(0,wn.D)(n):n;return(0,f.CqO)(e),e}function Fd(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Uu(n,e){return e.map(t=>t(n))}function Wa(n){return n.map(e=>function da(n){return!n.validate}(e)?e:t=>e.validate(t))}function Nf(n){if(!n)return null;const e=n.filter(Ao);return 0==e.length?null:function(t){return Fd(Uu(t,e))}}function Rn(n){return null!=n?Nf(Wa(n)):null}function Pf(n){if(!n)return null;const e=n.filter(Ao);return 0==e.length?null:function(t){return function zl(...n){const e=(0,on.jO)(n),{args:t,keys:r}=aa(n),i=new Os.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let m=l,v=l;for(let D=0;D<l;D++){let S=!1;(0,la.Xf)(t[D]).subscribe((0,or.x)(a,P=>{S||(S=!0,v--),h[D]=P},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?ql(r,h):h),a.complete())}))}});return e?i.pipe(Mf(e)):i}(Uu(t,e).map(yi)).pipe((0,mt.U)(Fd))}}function kf(n){return null!=n?Pf(Wa(n)):null}function Of(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ql(n){return n._rawValidators}function Ld(n){return n._rawAsyncValidators}function Vd(n){return n?Array.isArray(n)?n:[n]:[]}function Jl(n,e){return Array.isArray(n)?n.includes(e):n===e}function ro(n,e){const t=Vd(e);return Vd(n).forEach(i=>{Jl(t,i)||t.push(i)}),t}function Ff(n,e){return Vd(e).filter(t=>!Jl(n,t))}class kn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class us extends kn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gn extends kn{get formDirective(){return null}get path(){return null}}class Lf{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let $r=(()=>{class n extends Lf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(us,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Xl=(()=>{class n extends Lf{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gn,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function wi(n,e){return[...e.path,n]}function za(n,e){Ka(n,e),e.valueAccessor.writeValue(n.value),function Za(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function T(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function rc(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function nc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fr(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hs(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ha(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ka(n,e){const t=Ql(n);null!==e.validator?n.setValidators(Of(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ld(n);null!==e.asyncValidator?n.setAsyncValidators(Of(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ha(e._rawValidators,i),ha(e._rawAsyncValidators,i)}function hs(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Ql(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Ld(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return ha(e._rawValidators,r),ha(e._rawAsyncValidators,r),t}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function st(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function It(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===ji?t=a:function Tt(n){return Object.getPrototypeOf(n.constructor)===mi}(a)?r=a:i=a}),i||r||t||null}function ar(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ls="VALID",Ei="INVALID",lr="PENDING",Gi="DISABLED";function Hd(n){return(Ya(n)?n.validators:n)||null}function $d(n){return Array.isArray(n)?Rn(n):n||null}function ic(n,e){return(Ya(e)?e.asyncValidators:n)||null}function ju(n){return Array.isArray(n)?kf(n):n||null}function Ya(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Bg=n=>n instanceof oc,Hf=n=>n instanceof $u;function fa(n){return Bg(n)?n.value:n.getRawValue()}function jg(n,e){const t=Hf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function J_(n,e){Hf(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class sc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$d(this._rawValidators),this._composedAsyncValidatorFn=ju(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ls}get invalid(){return this.status===Ei}get pending(){return this.status==lr}get disabled(){return this.status===Gi}get enabled(){return this.status!==Gi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$d(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ju(e)}addValidators(e){this.setValidators(ro(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ro(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ff(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ff(e,this._rawAsyncValidators))}hasValidator(e){return Jl(this._rawValidators,e)}hasAsyncValidator(e){return Jl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=lr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gi,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ls,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ls||this.status===lr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gi:Ls}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=lr,this._hasOwnPendingAsyncValidator=!0;const t=yi(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Ro(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Hf(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof X_)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Gi:this.errors?Ei:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lr)?lr:this._anyControlsHaveStatus(Ei)?Ei:Ls}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ya(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class oc extends sc{constructor(e=null,t,r){super(Hd(t),ic(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ya(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ar(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ar(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class $u extends sc{constructor(e,t,r){super(Hd(t),ic(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){J_(this,e),Object.keys(e).forEach(r=>{jg(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=fa(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class X_ extends sc{constructor(e,t,r){super(Hd(t),ic(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){J_(this,e),e.forEach((r,i)=>{jg(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>fa(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Hg={provide:us,useExisting:(0,f.Gpc)(()=>zd)},$f=(()=>Promise.resolve(null))();let zd=(()=>{class n extends us{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new oc,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=It(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),st(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){za(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){$f.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;$f.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?wi(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gn,9),f.Y36(Pn,10),f.Y36(as,10),f.Y36(kr,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([Hg]),f.qOj,f.TTD]}),n})(),Kd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Zd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Wg=new f.OlP("NgModelWithFormControlWarning"),oy={provide:Gn,useExisting:(0,f.Gpc)(()=>Wu)};let Wu=(()=>{class n extends Gn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return za(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Fr(t.control||null,t,!1),ar(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Yt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Fr(r||null,t),Bg(i)&&(za(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function M(n,e){Ka(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function V(n,e){return hs(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ka(this.form,this),this._oldForm&&hs(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Pn,10),f.Y36(as,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([oy]),f.qOj,f.TTD]}),n})();const g={provide:us,useExisting:(0,f.Gpc)(()=>_)};let _=(()=>{class n extends us{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=It(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),st(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return wi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Gn,13),f.Y36(Pn,10),f.Y36(as,10),f.Y36(kr,10),f.Y36(Wg,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([g]),f.qOj,f.TTD]}),n})();let Mo=(()=>{class n{constructor(){this._validator=$i}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$i,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const dy={provide:Pn,useExisting:(0,f.Gpc)(()=>Zg),multi:!0};let Zg=(()=>{class n extends Mo{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function Qa(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>So(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[f._Bn([dy]),f.qOj]}),n})(),OD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Zd]]}),n})(),gM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[OD]}),n})(),Zf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wg,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[OD]}),n})();function Dt(...n){const e=(0,on.yG)(n);return(0,wn.D)(n,e)}var Xn=O(7579);class Wi extends Xn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zu=O(4671),LD=O(9672);function G0(n,e,t){n?(0,LD.f)(t,n,e):e()}var Yg=O(576);function Qg(n,e){const t=(0,Yg.m)(n)?n:()=>n,r=i=>i.error(t());return new Os.y(e?i=>e.schedule(r,0,i):r)}const Jg=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Xg=O(8189);function fy(...n){return function hy(){return(0,Xg.J)(1)}()((0,wn.D)(n,(0,on.yG)(n)))}function q0(n){return new Os.y(e=>{(0,la.Xf)(n()).subscribe(e)})}var Ku=O(515),z0=O(727),Ii=O(4482);function Yf(){return(0,Ii.e)((n,e)=>{let t=null;n._refCount++;const r=(0,or.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class UD extends Os.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ii.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new z0.w0;const t=this.getSubject();e.add(this.source.subscribe((0,or.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=z0.w0.EMPTY)}return e}refCount(){return Yf()(this)}}function Gr(n,e){return(0,Ii.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,or.x)(r,m=>{null==i||i.unsubscribe();let v=0;const D=a++;(0,la.Xf)(n(m,D)).subscribe(i=(0,or.x)(r,S=>r.next(e?e(m,S,D,v++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var py=O(5698);function em(...n){const e=(0,on.yG)(n);return(0,Ii.e)((t,r)=>{(e?fy(n,t,e):fy(n,t)).subscribe(r)})}function BD(n,e,t,r,i){return(a,l)=>{let h=t,m=e,v=0;a.subscribe((0,or.x)(l,D=>{const S=v++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function Zu(n,e){return(0,Ii.e)(BD(n,e,arguments.length>=2,!0))}function Ja(n,e){return(0,Ii.e)((t,r)=>{let i=0;t.subscribe((0,or.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Yu(n){return(0,Ii.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,or.x)(t,void 0,void 0,l=>{a=(0,la.Xf)(n(l,Yu(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var bi=O(5577);function Qf(n,e){return(0,Yg.m)(e)?(0,bi.z)(n,e,1):(0,bi.z)(n,1)}function gy(n){return n<=0?()=>Ku.E:(0,Ii.e)((e,t)=>{let r=[];e.subscribe((0,or.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function K0(n=jD){return(0,Ii.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function jD(){return new Jg}function Z0(n){return(0,Ii.e)((e,t)=>{let r=!1;e.subscribe((0,or.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Di(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ja((i,a)=>n(i,a,r)):zu.y,(0,py.q)(1),t?Z0(e):K0(()=>new Jg))}var ao=O(8505);class ma{constructor(e,t){this.id=e,this.url=t}}class Y0 extends ma{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ps extends ma{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tm extends ma{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class my extends ma{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class HD extends ma{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q0 extends ma{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jf extends ma{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class J0 extends ma{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X0 extends ma{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nm{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rm{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eE{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _M{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _y{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yy{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Kt="primary";class vy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function eh(n){return new vy(n)}const tE="ngNavigationCancelingError";function wy(n){const e=Error("NavigationCancelingError: "+n);return e[tE]=!0,e}function GD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function No(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!im(n[i],e[i]))return!1;return!0}function im(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ey(n){return Array.prototype.concat.apply([],n)}function sm(n){return n.length>0?n[n.length-1]:null}function ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Po(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,wn.D)(Promise.resolve(n)):Dt(n)}const cc={exact:function Xf(n,e,t){if(!Ju(n.segments,e.segments)||!ep(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Xf(n.children[r],e.children[r],t))return!1;return!0},subset:by},Cy={exact:function qD(n,e){return No(n,e)},subset:function zD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>im(n[t],e[t]))},ignored:()=>!0};function Iy(n,e,t){return cc[t.paths](n.root,e.root,t.matrixParams)&&Cy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function by(n,e,t){return Dy(n,e,e.segments,t)}function Dy(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ju(i,t)||e.hasChildren()||!ep(i,t,r))}if(n.segments.length===t.length){if(!Ju(n.segments,t)||!ep(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!by(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ju(n.segments,i)&&ep(n.segments,i,r)&&n.children[Kt])&&Dy(n.children[Kt],e,a,r)}}function ep(n,e,t){return e.every((r,i)=>Cy[t](n[i].parameters,r.parameters))}class Xa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eh(this.queryParams)),this._queryParamMap}toString(){return tp.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ni(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return um(this)}}class Qu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=eh(this.parameters)),this._parameterMap}toString(){return Ay(this)}}function Ju(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Sy{}class am{parse(e){const t=new XD(e);return new Xa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${th(e.root,!0)}`,r=function sE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${lm(t)}=${lm(i)}`).join("&"):`${lm(t)}=${lm(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function iE(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tp=new am;function um(n){return n.segments.map(e=>Ay(e)).join("/")}function th(n,e){if(!n.hasChildren())return um(n);if(e){const t=n.children[Kt]?th(n.children[Kt],!1):"",r=[];return ni(n.children,(i,a)=>{a!==Kt&&r.push(`${a}:${th(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ty(n,e){let t=[];return ni(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),ni(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[th(n.children[Kt],!1)]:[`${i}:${th(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${um(n)}/${t[0]}`:`${um(n)}/(${t.join("//")})`}}function rE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lm(n){return rE(n).replace(/%3B/gi,";")}function np(n){return rE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rp(n){return decodeURIComponent(n)}function KD(n){return rp(n.replace(/\+/g,"%20"))}function Ay(n){return`${np(n.path)}${function ZD(n){return Object.keys(n).map(e=>`;${np(e)}=${np(n[e])}`).join("")}(n.parameters)}`}const YD=/^[^\/()?;=#]+/;function cm(n){const e=n.match(YD);return e?e[0]:""}const ko=/^[^=?&#]+/,oE=/^[^&#]+/;class XD{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new Qt(e,t)),r}parseSegment(){const e=cm(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Qu(rp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=cm(this.remaining);i&&(r=i,this.capture(r))}e[rp(t)]=rp(r)}parseQueryParam(e){const t=function QD(n){const e=n.match(ko);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function JD(n){const e=n.match(oE);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=KD(t),a=KD(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cm(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Kt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Kt]:new Qt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class aE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dm(e,this._root).map(t=>t.value)}}function xy(n,e){if(n===e.value)return e;for(const t of e.children){const r=xy(n,t);if(r)return r}return null}function dm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=dm(n,t);if(r.length)return r.unshift(e),r}return[]}class eu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function nh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class uE extends aE{constructor(e,t){super(e),this.snapshot=t,Ny(this,e)}toString(){return this.snapshot.toString()}}function Nt(n,e){const t=function lE(n,e){const l=new gs([],{},{},"",{},Kt,e,null,n.root,-1,{});return new My("",new eu(l,[]))}(n,e),r=new Wi([new Qu("",{})]),i=new Wi({}),a=new Wi({}),l=new Wi({}),h=new Wi(""),m=new dc(r,i,l,h,a,Kt,e,t.root);return m.snapshot=t.root,new uE(new eu(m,[]),t)}class dc{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>eh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>eh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ry(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function hm(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gs{constructor(e,t,r,i,a,l,h,m,v,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=eh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=eh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class My extends aE{constructor(e,t){super(t),this.url=e,Ny(this,t)}toString(){return fm(this._root)}}function Ny(n,e){e.value._routerState=n,e.children.forEach(t=>Ny(n,t))}function fm(n){const e=n.children.length>0?` { ${n.children.map(fm).join(", ")} } `:"";return`${n.value}${e}`}function Oo(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,No(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),No(e.params,t.params)||n.params.next(t.params),function WD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!No(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),No(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ip(n,e){const t=No(n.params,e.params)&&function om(n,e){return Ju(n,e)&&n.every((t,r)=>No(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ip(n.parent,e.parent))}function hc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vM(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hc(n,r,i);return hc(n,r)})}(n,e,t);return new eu(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>hc(n,h)),l}}const r=function dE(n){return new dc(new Wi(n.url),new Wi(n.params),new Wi(n.queryParams),new Wi(n.fragment),new Wi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>hc(n,a));return new eu(r,i)}}function fc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xu(n){return"object"==typeof n&&null!=n&&n.outlets}function sp(n,e,t,r,i){let a={};if(r&&ni(r,(h,m)=>{a[m]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),n===e)return new Xa(t,a,i);const l=pm(n,e,t);return new Xa(l,a,i)}function pm(n,e,t){const r={};return ni(n.children,(i,a)=>{r[a]=i===e?t:pm(i,e,t)}),new Qt(n.segments,r)}class gm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Xu);if(i&&i!==sm(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Py{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ky(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return Oy(n,e,t);const r=function rT(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Xu(h))break;const m=`${h}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!pE(m,v,l))return a;r+=2}else{if(!pE(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Qt(n.segments.slice(0,r.pathIndex),{});return a.children[Kt]=new Qt(n.segments.slice(r.pathIndex),n.children),Oy(a,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?hE(n,e,t):r.match?Oy(n,0,i):hE(n,e,t)}function Oy(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function nT(n){return Xu(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return ni(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=ky(n.children[l],e,a))}),ni(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Qt(n.segments,i)}}function hE(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Xu(a)){const m=fE(a.outlets);return new Qt(r,m)}if(0===i&&fc(t[0])){r.push(new Qu(n.segments[e].path,Fy(t[0]))),i++;continue}const l=Xu(a)?a.outlets[Kt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&fc(h)?(r.push(new Qu(l,Fy(h))),i+=2):(r.push(new Qu(l,{})),i++)}return new Qt(r,{})}function fE(n){const e={};return ni(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=hE(new Qt([],{}),0,t))}),e}function Fy(n){const e={};return ni(n,(t,r)=>e[r]=`${t}`),e}function pE(n,e,t){return n==t.path&&No(e,t.parameters)}class CM{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Oo(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=nh(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),ni(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=nh(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=nh(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=nh(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new _y(a.value.snapshot))}),e.children.length&&this.forwardEvent(new _M(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Oo(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Oo(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function IM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class gE{constructor(e,t){this.routes=e,this.module=t}}function pc(n){return"function"==typeof n}function rh(n){return n instanceof Xa}const uo=Symbol("INITIAL_VALUE");function gc(){return Gr(n=>function VD(...n){const e=(0,on.yG)(n),t=(0,on.jO)(n),{args:r,keys:i}=aa(n);if(0===r.length)return(0,wn.D)([],e);const a=new Os.y(function $0(n,e,t=zu.y){return r=>{G0(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)G0(e,()=>{const v=(0,wn.D)(n[m],e);let D=!1;v.subscribe((0,or.x)(r,S=>{a[m]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ql(i,l):zu.y));return t?a.pipe(Mf(t)):a}(n.map(e=>e.pipe((0,py.q)(1),em(uo)))).pipe(Zu((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==uo?i:(a===uo&&(r=!0),r||!1!==a&&l!==t.length-1&&!rh(a)?i:a),e)},uo),Ja(e=>e!==uo),(0,mt.U)(e=>rh(e)?e:!0===e),(0,py.q)(1)))}class iT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ih,this.attachRef=null}}class ih{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new iT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let op=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=a||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new mE(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ih),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class mE{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dc?this.route:e===ih?this.childContexts:this.parent.get(e,t)}}let mm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[op],encapsulation:2}),n})();function _E(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];el(r,yE(e,r))}}function el(n,e){n.children&&_E(n.children,e)}function yE(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Vy(n){const e=n.children&&n.children.map(Vy),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=mm),t}function ms(n){return n.outlet||Kt}function vE(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}const Uy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _m(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Uy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||GD)(t,n,e);if(!a)return Object.assign({},Uy);const l={};ni(a.posParams,(m,v)=>{l[v]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function ym(n,e,t,r,i="corrected"){if(t.length>0&&function By(n,e,t){return t.some(r=>tl(n,e,r)&&ms(r)!==Kt)}(n,t,r)){const l=new Qt(e,function sh(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ms(a)!==Kt){const l=new Qt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ms(a)]=l}return i}(n,e,r,new Qt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function oh(n,e,t){return t.some(r=>tl(n,e,r))}(n,t,r)){const l=new Qt(n.segments,function ap(n,e,t,r,i,a){const l={};for(const h of r)if(tl(n,t,h)&&!i[ms(h)]){const m=new Qt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[ms(h)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Qt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function tl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function mc(n,e,t,r){return!!(ms(n)===r||r!==Kt&&tl(e,t,n))&&("**"===n.path||_m(e,n,t).matched)}function wE(n,e,t){return 0===e.length&&!n.children[t]}class up{constructor(e){this.segmentGroup=e||null}}class jy{constructor(e){this.urlTree=e}}function _c(n){return Qg(new up(n))}function vm(n){return Qg(new jy(n))}class CE{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=ym(this.urlTree.root,[],[],this.config).segmentGroup,t=new Qt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Kt).pipe((0,mt.U)(a=>this.createUrlTree(Em(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yu(a=>{if(a instanceof jy)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof up?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Kt).pipe((0,mt.U)(i=>this.createUrlTree(Em(i),e.queryParams,e.fragment))).pipe(Yu(i=>{throw i instanceof up?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Qt([],{[Kt]:e}):e;return new Xa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,mt.U)(a=>new Qt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,wn.D)(i).pipe(Qf(a=>{const l=r.children[a],h=vE(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,mt.U)(m=>({segment:m,outlet:a})))}),Zu((a,l)=>(a[l.outlet]=l.segment,a),{}),function Jd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ja((i,a)=>n(i,a,r)):zu.y,gy(1),t?Z0(e):K0(()=>new Jg))}())}expandSegment(e,t,r,i,a,l){return(0,wn.D)(r).pipe(Qf(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Yu(v=>{if(v instanceof up)return Dt(null);throw v}))),Di(h=>!!h),Yu((h,m)=>{if(h instanceof Jg||"EmptyError"===h.name)return wE(t,i,a)?Dt(new Qt([],{})):_c(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return mc(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):_c(t):_c(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vm(a):this.lineralizeSegments(r,a).pipe((0,bi.z)(l=>{const h=new Qt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=_m(t,i,a);if(!h)return _c(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?vm(S):this.lineralizeSegments(i,S).pipe((0,bi.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,mt.U)(S=>(r._loadedConfig=S,new Qt(i,{})))):Dt(new Qt(i,{}));const{matched:l,consumedSegments:h,remainingSegments:m}=_m(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,bi.z)(D=>{const S=D.module,P=D.routes,{segmentGroup:U,slicedSegments:K}=ym(t,h,m,P),we=new Qt(U.segments,U.children);if(0===K.length&&we.hasChildren())return this.expandChildren(S,P,we).pipe((0,mt.U)(pt=>new Qt(h,pt)));if(0===P.length&&0===K.length)return Dt(new Qt(h,{}));const Le=ms(r)===a;return this.expandSegment(S,we,P,K,Le?Kt:a,!0).pipe((0,mt.U)(vt=>new Qt(h.concat(vt.segments),vt.children)))})):_c(t)}getChildConfig(e,t,r){return t.children?Dt(new gE(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,bi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,mt.U)(a=>(t._loadedConfig=a,a))):function wm(n){return Qg(wy(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Dt(new gE([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Dt(i.map(l=>{const h=e.get(l);let m;if(function DM(n){return n&&pc(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!pc(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return Po(m)})).pipe(gc(),(0,ao.b)(l=>{if(!rh(l))return;const h=wy(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,mt.U)(l=>!0===l)):Dt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Dt(r);if(i.numberOfChildren>1||!i.children[Kt])return Qg(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Xa(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ni(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return ni(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new Qt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Em(n){const e={};for(const r of Object.keys(n.children)){const a=Em(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function xM(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}class bE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lp{constructor(e,t){this.component=e,this.route=t}}function oT(n,e,t){const r=n._root;return cp(r,e?e._root:null,t,[r.value])}function Ti(n,e,t){const r=function uT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function cp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=nh(e);return n.children.forEach(l=>{(function RM(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function MM(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ju(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ju(n.url,e.url)||!No(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ip(n,e)||!No(n.queryParams,e.queryParams);default:return!ip(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new bE(r)):(a.data=l.data,a._resolvedData=l._resolvedData),cp(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new lp(h.outlet.component,l))}else l&&ah(e,h,i),i.canActivateChecks.push(new bE(r)),cp(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),ni(a,(l,h)=>ah(l,t.getContext(h),i)),i}function ah(n,e,t){const r=nh(n),i=n.value;ni(r,(a,l)=>{ah(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new lp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class fT{}function $y(n){return new Os.y(e=>e.error(n))}class gT{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=ym(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Kt);if(null===t)return null;const r=new gs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new eu(r,t),a=new My(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=Ry(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=vE(e,a),m=this.processSegmentGroup(h,l,a);if(null===m)return null;r.push(...m)}const i=Fo(r);return function SE(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return wE(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!mc(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const U=r.length>0?sm(r).parameters:{};a=new gs(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_T(e),ms(e),e.component,e,RE(t),ME(t)+r.length,Gy(e))}else{const U=_m(t,e,r);if(!U.matched)return null;l=U.consumedSegments,h=U.remainingSegments,a=new gs(l,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_T(e),ms(e),e.component,e,RE(t),ME(t)+l.length,Gy(e))}const m=function AE(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:v,slicedSegments:D}=ym(t,l,h,m.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===D.length&&v.hasChildren()){const U=this.processChildren(m,v);return null===U?null:[new eu(a,U)]}if(0===m.length&&0===D.length)return[new eu(a,[])];const S=ms(e)===i,P=this.processSegment(m,v,D,S?Kt:i);return null===P?null:[new eu(a,P)]}}function mT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Fo(n){const e=[],t=new Set;for(const r of n){if(!mT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Fo(r.children);e.push(new eu(r.value,i))}return e.filter(r=>!t.has(r))}function RE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ME(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function _T(n){return n.data||{}}function Gy(n){return n.resolve||{}}function NE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uh(n){return Gr(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,mt.U)(()=>e)):Dt(e)})}class zy extends class CT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const dp=new f.OlP("ROUTES");class Ky{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,mt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new gE(Ey(l.injector.get(dp,void 0,f.XFs.Self|f.XFs.Optional)).map(Vy),l)}),Yu(a=>{throw t._loader$=void 0,a}));return t._loader$=new UD(i,()=>new Xn.x).pipe(Yf()),t._loader$}loadModuleFactory(e){return Po(e()).pipe((0,bi.z)(t=>t instanceof f.YKP?Dt(t):(0,wn.D)(this.compiler.compileModuleAsync(t))))}}class kM{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Zy(n){throw n}function OM(n,e,t){return e.parse("/")}function PE(n,e){return Dt(null)}const kE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Si=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xn.x,this.errorHandler=Zy,this.malformedUriErrorHandler=OM,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:PE,afterPreactivation:PE},this.urlHandlingStrategy=new kM,this.routeReuseStrategy=new zy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const S=l.get(f.R0b);this.isNgZoneEnabled=S instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function nE(){return new Xa(new Qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ky(l,h,P=>this.triggerEvent(new nm(P)),P=>this.triggerEvent(new rm(P))),this.routerState=Nt(this.currentUrlTree,this.rootComponentType),this.transitions=new Wi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ja(i=>0!==i.id),(0,mt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gr(i=>{let a=!1,l=!1;return Dt(i).pipe((0,ao.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gr(h=>{const m=this.browserUrlTree.toString(),v=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Yy(h.source)&&(this.browserUrlTree=h.extractedUrl),Dt(h).pipe(Gr(S=>{const P=this.transitions.getValue();return r.next(new Y0(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?Ku.E:Promise.resolve(S)}),function IE(n,e,t,r){return Gr(i=>function sT(n,e,t,r,i){return new CE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,mt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ao.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function yT(n,e,t,r,i){return(0,bi.z)(a=>function pT(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new gT(n,e,t,r,i,a).recognize();return null===l?$y(new fT):Dt(l)}catch(l){return $y(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,mt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ao.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new HD(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:U,source:K,restoredState:we,extras:Le}=h,Et=new Y0(P,this.serializeUrl(U),K,we);r.next(Et);const vt=Nt(U,this.rootComponentType).snapshot;return Dt(Object.assign(Object.assign({},h),{targetSnapshot:vt,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ku.E}),uh(h=>{const{targetSnapshot:m,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:U}}=h;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!U})}),(0,ao.b)(h=>{const m=new Q0(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,mt.U)(h=>Object.assign(Object.assign({},h),{guards:oT(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function NM(n,e){return(0,bi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?Dt(Object.assign(Object.assign({},t),{guardsResult:!0})):function lT(n,e,t,r){return(0,wn.D)(n).pipe((0,bi.z)(i=>function TE(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Dt(a.map(h=>{const m=Ti(h,e,i);let v;if(function AM(n){return n&&pc(n.canDeactivate)}(m))v=Po(m.canDeactivate(n,e,t,r));else{if(!pc(m))throw new Error("Invalid CanDeactivate guard");v=Po(m(n,e,t,r))}return v.pipe(Di())})).pipe(gc()):Dt(!0)}(i.component,i.route,t,e,r)),Di(i=>!0!==i,!0))}(l,r,i,n).pipe((0,bi.z)(h=>h&&function bM(n){return"boolean"==typeof n}(h)?function Hy(n,e,t,r){return(0,wn.D)(e).pipe(Qf(i=>fy(function cT(n,e){return null!==n&&e&&e(new eE(n)),Dt(!0)}(i.route.parent,r),function DE(n,e){return null!==n&&e&&e(new Xd(n)),Dt(!0)}(i.route,r),function hT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function aT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>q0(()=>Dt(l.guards.map(m=>{const v=Ti(m,l.node,t);let D;if(function SM(n){return n&&pc(n.canActivateChild)}(v))D=Po(v.canActivateChild(r,n));else{if(!pc(v))throw new Error("Invalid CanActivateChild guard");D=Po(v(r,n))}return D.pipe(Di())})).pipe(gc())));return Dt(a).pipe(gc())}(n,i.path,t),function dT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Dt(!0);const i=r.map(a=>q0(()=>{const l=Ti(a,e,t);let h;if(function TM(n){return n&&pc(n.canActivate)}(l))h=Po(l.canActivate(e,n));else{if(!pc(l))throw new Error("Invalid CanActivate guard");h=Po(l(e,n))}return h.pipe(Di())}));return Dt(i).pipe(gc())}(n,i.route,t))),Di(i=>!0!==i,!0))}(r,a,n,e):Dt(h)),(0,mt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,ao.b)(h=>{if(rh(h.guardsResult)){const v=wy(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw v.url=h.guardsResult,v}const m=new Jf(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Ja(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),uh(h=>{if(h.guards.canActivateChecks.length)return Dt(h).pipe((0,ao.b)(m=>{const v=new J0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Gr(m=>{let v=!1;return Dt(m).pipe(function vT(n,e){return(0,bi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Dt(t);let a=0;return(0,wn.D)(i).pipe(Qf(l=>function wT(n,e,t,r){return function Wy(n,e,t,r){const i=NE(n);if(0===i.length)return Dt({});const a={};return(0,wn.D)(i).pipe((0,bi.z)(l=>function ET(n,e,t,r){const i=Ti(n,e,r);return Po(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,ao.b)(h=>{a[l]=h}))),gy(1),(0,bi.z)(()=>NE(a).length===i.length?Dt(a):Ku.E))}(n._resolve,n,e,r).pipe((0,mt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Ry(n,t).resolve),null)))}(l.route,r,n,e)),(0,ao.b)(()=>a++),gy(1),(0,bi.z)(l=>a===i.length?Dt(t):Ku.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ao.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,ao.b)(m=>{const v=new X0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),uh(h=>{const{targetSnapshot:m,id:v,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:U}}=h;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!U})}),(0,mt.U)(h=>{const m=function cE(n,e,t){const r=hc(n,e._root,t?t._root:void 0);return new uE(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,ao.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(r=>(new CM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,ao.b)({next(){a=!0},complete(){a=!0}}),function mM(n){return(0,Ii.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Yu(h=>{if(l=!0,function $D(n){return n&&n[tE]}(h)){const m=rh(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new tm(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(v),m?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yy(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new my(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(v){i.reject(v)}}return Ku.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){_E(t),this.config=t.map(Vy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,v=i||this.routerState.root,D=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function wM(n,e,t,r,i){if(0===t.length)return sp(e.root,e.root,e.root,r,i);const a=function EM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return ni(a.outlets,(m,v)=>{h[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new gm(t,e,r)}(t);if(a.toRoot())return sp(e.root,e.root,new Qt([],{}),r,i);const l=function eT(n,e,t){if(n.isAbsolute)return new Py(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Py(a,a===e.root,0)}const r=fc(n.commands[0])?0:1;return function tT(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Py(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?Oy(l.segmentGroup,l.index,a.commands):ky(l.segmentGroup,l.index,a.commands);return sp(e.root,l.segmentGroup,h,r,i)}(v,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=rh(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function FE(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},kE):!1===r?Object.assign({},OE):r,rh(t))return Iy(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Iy(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ps(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,m;if(this.disposed)return Promise.resolve(!1);let v,D,S;l?(v=l.resolve,D=l.reject,S=l.promise):S=new Promise((K,we)=>{v=K,D=we});const P=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):U=0,this.setTransition({id:P,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:v,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(K=>Promise.reject(K))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new tm(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Yy(n){return"imperative"!==n}let qi=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new Xn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:lh(this.skipLocationChange),replaceUrl:lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Si),f.Y36(dc),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})(),tu=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Xn.x,this.subscription=t.events.subscribe(a=>{a instanceof ps&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:lh(this.skipLocationChange),replaceUrl:lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Si),f.Y36(dc),f.Y36(ge))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function lh(n){return""===n||!!n}class Cm{}class Im{preload(e,t){return Dt(null)}}let ch=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Ky(i,r,m=>t.triggerEvent(new nm(m)),m=>t.triggerEvent(new rm(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ja(t=>t instanceof ps),Qf(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,wn.D)(i).pipe((0,Xg.J)(),(0,mt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,bi.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Si),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Cm))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Qy=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Y0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ps&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new yy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nl=new f.OlP("ROUTER_CONFIGURATION"),Jy=new f.OlP("ROUTER_FORROOT_GUARD"),UE=[Ne,{provide:Sy,useClass:am},{provide:Si,useFactory:function jE(n,e,t,r,i,a,l={},h,m){const v=new Si(null,n,e,t,r,i,Ey(a));return h&&(v.urlHandlingStrategy=h),m&&(v.routeReuseStrategy=m),function ST(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,v),l.enableTracing&&v.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),v},deps:[Sy,ih,Ne,f.zs3,f.Sil,dp,nl,[class PM{},new f.FiY],[class qy{},new f.FiY]]},ih,{provide:dc,useFactory:function AT(n){return n.routerState.root},deps:[Si]},ch,Im,class LE{preload(e,t){return t().pipe(Yu(()=>Dt(null)))}},{provide:nl,useValue:{enableTracing:!1}}];function bT(){return new f.PXZ("Router",Si)}let bm=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[UE,yc(t),{provide:Jy,useFactory:BE,deps:[[Si,new f.FiY,new f.tp0]]},{provide:nl,useValue:r||{}},{provide:ge,useFactory:TT,deps:[le,[new f.tBr(qe),new f.FiY],nl]},{provide:Qy,useFactory:DT,deps:[Si,xu,nl]},{provide:Cm,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Im},{provide:f.PXZ,multi:!0,useFactory:bT},[rl,{provide:f.ip1,multi:!0,useFactory:xT,deps:[rl]},{provide:HE,useFactory:RT,deps:[rl]},{provide:f.tb,multi:!0,useExisting:HE}]]}}static forChild(t){return{ngModule:n,providers:[yc(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jy,8),f.LFG(Si,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function DT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Qy(n,e,t)}function TT(n,e,t={}){return t.useHash?new Me(n,e):new We(n,e)}function BE(n){return"guarded"}function yc(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:dp,multi:!0,useValue:n}]}let rl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Xn.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(Si),l=this.injector.get(nl);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(nl),i=this.injector.get(ch),a=this.injector.get(Qy),l=this.injector.get(Si),h=this.injector.get(f.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function xT(n){return n.appInitializer.bind(n)}function RT(n){return n.bootstrapListener.bind(n)}const HE=new f.OlP("Router Initializer");let Xy=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-menu"]],decls:14,vars:0,consts:[["id","caja1",1,"col-4"],["id","botones"],["type","button","routerLink","/sign-in",1,"btn","btn-outline-success","btn-lg","btn-block"],["type","button","routerLink","/register-user",1,"btn","btn-outline-success","btn-lg","btn-block"],["type","button","routerLink","/phone-login",1,"btn","btn-outline-info","btn-lg","btn-block"],["type","button","routerLink","/products",1,"btn","btn-outline-danger","btn-lg","btn-block"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1"),f._uU(2,"Prueba Firebase Authentication"),f.qZA(),f.TgZ(3,"h3"),f._uU(4,"Creado por: Paola Alba Bugar\xedn"),f.qZA(),f.TgZ(5,"div",1)(6,"button",2),f._uU(7,"Log In de Usuario"),f.qZA(),f.TgZ(8,"button",3),f._uU(9,"Registro de Usuario "),f.qZA(),f.TgZ(10,"button",4),f._uU(11,"Log In con Firebase Authentication MSG"),f.qZA(),f.TgZ(12,"button",5),f._uU(13,"Prueba de Cloud Firestore"),f.qZA()()())},directives:[qi],styles:['@import"https://fonts.googleapis.com/css2?family=Raleway&display=swap";*[_ngcontent-%COMP%]{margin:0 auto;font-family:Raleway}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px}h1[_ngcontent-%COMP%]{margin-top:20px}']}),n})();var at,ru=O(127),Dm=(O(5881),O(3942)),Ce=O(5861),zi=O(9681),Lo=O(4859),Vo=O(1877),k=O(2090),$E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},il={},ev=ev||{},Pt=$E||self;function tv(){}function GE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Tm="closure_uid_"+(1e9*Math.random()>>>0),WE=0;function LM(n,e,t){return n.call.apply(n.bind,arguments)}function Uo(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ai(n,e,t){return(Ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LM:Uo).apply(null,arguments)}function nv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Wr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function iu(){this.s=this.s,this.o=this.o}var kT={};iu.prototype.s=!1,iu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function PT(n){return Object.prototype.hasOwnProperty.call(n,Tm)&&n[Tm]||(n[Tm]=++WE)}(this);delete kT[n]}},iu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},rv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function zE(n){return Array.prototype.concat.apply([],arguments)}function hp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sm(n){return/^[\s\xa0]*$/.test(n)}var Zi,KE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ki(n,e){return-1!=n.indexOf(e)}function sv(n,e){return n<e?-1:n>e?1:0}e:{var ZE=Pt.navigator;if(ZE){var fp=ZE.userAgent;if(fp){Zi=fp;break e}}Zi=""}function sl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function YE(n){const e={};for(const t in n)e[t]=n[t];return e}var dh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QE(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<dh.length;a++)t=dh[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ov(n){return ov[" "](n),n}ov[" "]=tv;var ou,n,_a=Ki(Zi,"Opera"),ya=Ki(Zi,"Trident")||Ki(Zi,"MSIE"),ri=Ki(Zi,"Edge"),su=ri||ya,pp=Ki(Zi,"Gecko")&&!(Ki(Zi.toLowerCase(),"webkit")&&!Ki(Zi,"Edge"))&&!(Ki(Zi,"Trident")||Ki(Zi,"MSIE"))&&!Ki(Zi,"Edge"),lo=Ki(Zi.toLowerCase(),"webkit")&&!Ki(Zi,"Edge");function Am(){var n=Pt.document;return n?n.documentMode:void 0}e:{var ol="",al=(n=Zi,pp?/rv:([^\);]+)(\)|;)/.exec(n):ri?/Edge\/([\d\.]+)/.exec(n):ya?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):lo?/WebKit\/(\S+)/.exec(n):_a?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(al&&(ol=al?al[1]:""),ya){var ul=Am();if(null!=ul&&ul>parseFloat(ol)){ou=String(ul);break e}}ou=ol}var hh={};var ph=Pt.document&&ya&&(Am()||parseInt(ou,10))||void 0,JE=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Pt.addEventListener("test",tv,e),Pt.removeEventListener("test",tv,e)}catch(t){}return n}();function ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function gh(n,e){if(ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pp){e:{try{ov(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gh.Z.h.call(this)}}ii.prototype.h=function(){this.defaultPrevented=!0},Wr(gh,ii);var XE={2:"touch",3:"pen",4:"mouse"};gh.prototype.h=function(){gh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var mh="closure_listenable_"+(1e6*Math.random()|0),eC=0;function tC(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++eC,this.ca=this.fa=!1}function gp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function mp(n){this.src=n,this.g={},this.h=0}function uv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=OT(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(gp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}mp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=xm(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new tC(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var lv="closure_lm_"+(1e6*Math.random()|0),Rm={};function cv(n,e,t,r,i){if(r&&r.once)return dv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)cv(n,e[a],t,r,i);return null}return t=_p(t),n&&n[mh]?n.N(e,t,vc(r)?!!r.capture:!!r,i):nC(n,e,t,!1,r,i)}function nC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=vc(i)?!!i.capture:!!i,h=sC(n);if(h||(n[lv]=h=new mp(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function FT(){var e=LT;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)JE||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(iC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function dv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)dv(n,e[a],t,r,i);return null}return t=_p(t),n&&n[mh]?n.O(e,t,vc(r)?!!r.capture:!!r,i):nC(n,e,t,!0,r,i)}function rC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)rC(n,e[a],t,r,i);else r=vc(r)?!!r.capture:!!r,t=_p(t),n&&n[mh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xm(a=n.g[e],t,r,i))&&(gp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=sC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xm(e,t,r,i)),(t=-1<n?e[n]:null)&&Mm(t))}function Mm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[mh])uv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(iC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sC(e))?(uv(t,n),0==t.h&&(t.src=null,e[lv]=null)):gp(n)}}}function iC(n){return n in Rm?Rm[n]:Rm[n]="on"+n}function LT(n,e){if(n.ca)n=!0;else{e=new gh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Mm(n),n=t.call(r,e)}return n}function sC(n){return(n=n[lv])instanceof mp?n:null}var hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function _p(n){return"function"==typeof n?n:(n[hv]||(n[hv]=function(e){return n.handleEvent(e)}),n[hv])}function Tr(){iu.call(this),this.i=new mp(this),this.P=this,this.I=null}function si(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ii(e,n);else if(e instanceof ii)e.target=e.target||n;else{var i=e;QE(e=new ii(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=fv(l,r,!0,e)&&i}if(i=fv(l=e.g=n,r,!0,e)&&i,i=fv(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=fv(l=e.g=t[a],r,!1,e)&&i}function fv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,m=l.ia||l.src;l.fa&&uv(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Wr(Tr,iu),Tr.prototype[mh]=!0,Tr.prototype.removeEventListener=function(n,e,t,r){rC(this,n,e,t,r)},Tr.prototype.M=function(){if(Tr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gp(t[r]);delete n.g[e],n.h--}}this.I=null},Tr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Tr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var oC=Pt.JSON.stringify;function VM(){var n=_v;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var gv,pv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new UM,n=>n.reset());class UM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function UT(n){Pt.setTimeout(()=>{throw n},0)}function cl(n,e){gv||function aC(){var n=Pt.Promise.resolve(void 0);gv=function(){n.then(Nm)}}(),mv||(gv(),mv=!0),_v.add(n,e)}var mv=!1,_v=new class VT{constructor(){this.h=this.g=null}add(e,t){const r=pv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Nm(){for(var n;n=VM();){try{n.h.call(n.g)}catch(t){UT(t)}var e=pv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}mv=!1}function Pm(n,e){Tr.call(this),this.h=n||1,this.g=e||Pt,this.j=Ai(this.kb,this),this.l=Date.now()}function km(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function yv(n,e,t){if("function"==typeof n)t&&(n=Ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function uC(n){n.g=yv(()=>{n.g=null,n.i&&(n.i=!1,uC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Wr(Pm,Tr),(at=Pm.prototype).da=!1,at.S=null,at.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),si(this,"tick"),this.da&&(km(this),this.start()))}},at.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.M=function(){Pm.Z.M.call(this),km(this),delete this.g};class BT extends iu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:uC(this)}M(){super.M(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yp(n){iu.call(this),this.h=n,this.g={}}Wr(yp,iu);var lC=[];function vv(n,e,t,r){Array.isArray(t)||(t&&(lC[0]=t.toString()),t=lC);for(var i=0;i<t.length;i++){var a=cv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function cC(n){sl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Mm(e)},n),n.g={}}function vp(){this.g=!0}function wp(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jT(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return oC(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}yp.prototype.M=function(){yp.Z.M.call(this),cC(this)},yp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vp.prototype.Aa=function(){this.g=!1},vp.prototype.info=function(){};var _h={},yh=null;function Ep(){return yh=yh||new Tr}function Om(n){ii.call(this,_h.Ma,n)}function Ec(n){const e=Ep();si(e,new Om(e,n))}function hC(n,e){ii.call(this,_h.STAT_EVENT,n),this.stat=e}function qr(n){const e=Ep();si(e,new hC(e,n))}function Cp(n,e){ii.call(this,_h.Na,n),this.size=e}function Cc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}_h.Ma="serverreachability",Wr(Om,ii),_h.STAT_EVENT="statevent",Wr(hC,ii),_h.Na="timingevent",Wr(Cp,ii);var Cv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},fC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ip(){}function Iv(){}Ip.prototype.h=null;var Vm,vh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bp(){ii.call(this,"d")}function Lm(){ii.call(this,"c")}function wh(){}function Eh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new yp(this),this.P=gC,this.W=new Pm(n=su?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pC}function pC(){this.i=null,this.g="",this.h=!1}Wr(bp,ii),Wr(Lm,ii),Wr(wh,Ip),wh.prototype.g=function(){return new XMLHttpRequest},wh.prototype.i=function(){return{}},Vm=new wh;var gC=45e3,Um={},Ch={};function Bm(n,e,t){n.K=1,n.v=Sp(Mn(e)),n.s=t,n.U=!0,mC(n,null)}function mC(n,e){n.F=Date.now(),Ic(n),n.A=Mn(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),co(t.h,"t",r),n.C=0,t=n.l.H,n.h=new pC,n.g=ZC(n.l,t?e:null,!n.s),0<n.O&&(n.L=new BT(Ai(n.Ia,n,n.g),n.O)),vv(n.V,n.g,"readystatechange",n.gb),e=n.H?YE(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Ec(1),function dC(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var v=h[m].split("=");if(1<v.length){var D=v[0];v=v[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+v+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function _C(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bv(n,t),i==Ch){4==e&&(n.o=4,qr(14),r=!1),wp(n.j,n.m,null,"[Incomplete Response]");break}if(i==Um){n.o=4,qr(15),wp(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}wp(n.j,n.m,i,null),jm(n,i)}_C(n)&&i!=Ch&&i!=Um&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,qr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Qm(e),e.L=!0,qr(11))):(wp(n.j,n.m,t,"[Invalid Chunked Response]"),dl(n),Ih(n))}function bv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ch:(t=Number(e.substring(t,r)),isNaN(t)?Um:(r+=1)+t>e.length?Ch:(e=e.substr(r,t),n.C=r+t,e))}function Ic(n){n.Y=Date.now()+n.P,Dv(n,n.P)}function Dv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cc(Ai(n.eb,n),e)}function Dp(n){n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Ih(n){0==n.l.G||n.I||Vv(n.l,n)}function dl(n){Dp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,km(n.W),cC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function jm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Rp(t.i,n)))if(t.I=n.N,!n.J&&Rp(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Cc(Ai(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Op(t),Km(t)}Ym(t),qr(18)}if(1>=PC(t.i)&&t.ka){try{t.ka()}catch(v){}t.ka=void 0}}else fl(t,11)}else if((n.J||t.g==n)&&Op(t),!Sm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const D=v[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const K=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var a=r.i;!a.g&&(Ki(K,"spdy")||Ki(K,"quic")||Ki(K,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Sc(a,a.h),a.h=null))}if(r.D){const we=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.sa=we,qn(r.F,r.D,we))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=KC(r,r.H?r.la:null,r.W),l.J){kC(r.i,l);var h=l,m=r.K;m&&h.setTimeout(m),h.B&&(Dp(h),Ic(h)),r.g=l}else Fv(r);0<t.l.length&&Zm(t)}else"stop"!=v[0]&&"close"!=v[0]||fl(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?fl(t,7):Nv(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}Ec(4)}catch(v){}}function Hm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(GE(n)||"string"==typeof n)rv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(GE(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function vC(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(GE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function bc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof bc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function wC(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Dc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Dc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Dc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(at=Eh.prototype).setTimeout=function(n){this.P=n},at.gb=function(n){n=n.target;const e=this.L;e&&3==au(n)?e.l():this.Ia(n)},at.Ia=function(n){try{if(n==this.g)e:{const D=au(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||su||this.g&&(this.h.h||this.g.ga()||WC(this.g)))){this.I||4!=D||7==e||Ec(8==e||0>=S?3:2),Dp(this);var t=this.g.ba();this.N=t;t:if(_C(this)){var r=WC(this.g);n="";var i=r.length,a=4==au(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dl(this),Ih(this);var l="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function wv(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sm(h)){var v=h;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,qr(12),dl(this),Ih(this);break e}wp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jm(this,t)}this.U?(yC(this,D,l),su&&this.i&&3==D&&(vv(this.V,this.W,"tick",this.fb),this.W.start())):(wp(this.j,this.m,l,null),jm(this,l)),4==D&&dl(this),this.i&&!this.I&&(4==D?Vv(this.l,this):(this.i=!1,Ic(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,qr(12)):(this.o=0,qr(13)),dl(this),Ih(this)}}}catch(D){}},at.fb=function(){if(this.g){var n=au(this.g),e=this.g.ga();this.C<e.length&&(Dp(this),yC(this,n,e),this.i&&4!=n&&Ic(this))}},at.cancel=function(){this.I=!0,dl(this)},at.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ev(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ec(3),qr(17)),dl(this),this.o=2,Ih(this)):Dv(this,this.Y-n)},(at=bc.prototype).R=function(){wC(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},at.T=function(){return wC(this),this.g.concat()},at.get=function(n,e){return Dc(this.h,n)?this.h[n]:e},at.set=function(n,e){Dc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},at.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var EC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Tc){this.g=void 0!==e?e:n.g,Tp(this,n.j),this.s=n.s,$m(this,n.i),Gm(this,n.m),this.l=n.l,e=n.h;var t=new _s;t.i=e.i,e.g&&(t.g=new bc(e.g),t.h=e.h),Tv(this,t),this.o=n.o}else n&&(t=String(n).match(EC))?(this.g=!!e,Tp(this,t[1]||"",!0),this.s=Ap(t[2]||""),$m(this,t[3]||"",!0),Gm(this,t[4]),this.l=Ap(t[5]||"",!0),Tv(this,t[6]||"",!0),this.o=Ap(t[7]||"")):(this.g=!!e,this.h=new _s(null,this.g))}function Mn(n){return new Tc(n)}function Tp(n,e,t){n.j=t?Ap(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $m(n,e,t){n.i=t?Ap(e,!0):e}function Gm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Tv(n,e,t){e instanceof _s?(n.h=e,function xC(n,e){e&&!n.j&&(hl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(AC(this,r),co(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=xp(e,SC)),n.h=new _s(e,n.g))}function qn(n,e,t){n.h.set(e,t)}function Sp(n){return qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ap(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function xp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,bC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function bC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Tc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(xp(e,DC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(xp(e,DC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(xp(t,"/"==t.charAt(0)?BM:TC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",xp(t,Sv)),n.join("")};var DC=/[#\/\?@]/g,TC=/[#\?:]/g,BM=/[#\?]/g,SC=/[#\?@]/g,Sv=/#/g;function _s(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hl(n){n.g||(n.g=new bc,n.h=0,n.i&&function CC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function AC(n,e){hl(n),e=xi(n,e),Dc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Dc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&wC(n)))}function Bo(n,e){return hl(n),e=xi(n,e),Dc(n.g.h,e)}function co(n,e,t){AC(n,e),0<t.length&&(n.i=null,n.g.set(xi(n,e),hp(t)),n.h+=t.length)}function xi(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function MC(n){this.l=n||HT,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ea&&Pt.g.Ea()&&Pt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(at=_s.prototype).add=function(n,e){hl(this),this.i=null,n=xi(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},at.forEach=function(n,e){hl(this),this.g.forEach(function(t,r){rv(t,function(i){n.call(e,i,r,this)},this)},this)},at.T=function(){hl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},at.R=function(n){hl(this);var e=[];if("string"==typeof n)Bo(this,n)&&(e=zE(e,this.g.get(xi(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zE(e,n[t])}return e},at.set=function(n,e){return hl(this),this.i=null,Bo(this,n=xi(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},at.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var HT=10;function NC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function PC(n){return n.h?1:n.g?n.g.size:0}function Rp(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sc(n,e){n.g?n.g.add(e):n.h=e}function kC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Av(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return hp(n.i)}function xv(){}function OC(){this.g=new xv}function FC(n,e,t){const r=t||"";try{Hm(n,function(i,a){let l=i;vc(i)&&(l=oC(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function qm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Dh(n){this.l=n.$b||null,this.j=n.ib||!1}function Mp(n,e){Tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Np,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}MC.prototype.cancel=function(){if(this.i=Av(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xv.prototype.stringify=function(n){return Pt.JSON.stringify(n,void 0)},xv.prototype.parse=function(n){return Pt.JSON.parse(n,void 0)},Wr(Dh,Ip),Dh.prototype.g=function(){return new Mp(this.l,this.j)},Dh.prototype.i=function(n){return function(){return n}}({}),Wr(Mp,Tr);var Np=0;function Pp(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Th(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sh(n)}function Sh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(at=Mp.prototype).open=function(n,e){if(this.readyState!=Np)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sh(this)},at.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Pt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Th(this)),this.readyState=Np},at.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sh(this)),this.g&&(this.readyState=3,Sh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Pt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pp(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},at.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Th(this):Sh(this),3==this.readyState&&Pp(this)}},at.Ua=function(n){this.g&&(this.response=this.responseText=n,Th(this))},at.Ta=function(n){this.g&&(this.response=n,Th(this))},at.ha=function(){this.g&&Th(this)},at.setRequestHeader=function(n,e){this.v.append(n,e)},at.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Mp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var LC=Pt.JSON.parse;function yr(n){Tr.call(this),this.headers=new bc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rv,this.K=this.L=!1}Wr(yr,Tr);var Rv="",VC=/^https?$/i,UC=["POST","PUT"];function $T(n){return"content-type"==n.toLowerCase()}function jC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,HC(n),zm(n)}function HC(n){n.D||(n.D=!0,si(n,"complete"),si(n,"error"))}function $C(n){if(n.h&&void 0!==ev&&(!n.C[1]||4!=au(n)||2!=n.ba()))if(n.v&&4==au(n))yv(n.Fa,0,n);else if(si(n,"readystatechange"),4==au(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(EC)[1]||null;if(!i&&Pt.self&&Pt.self.location){var a=Pt.self.location.protocol;i=a.substr(0,a.length-1)}r=!VC.test(i?i.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var l=2<au(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.ba()+"]",HC(n)}}finally{zm(n)}}}function zm(n,e){if(n.g){GC(n);const t=n.g,r=n.C[0]?tv:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function GC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function au(n){return n.g?n.g.readyState:0}function WC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Rv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function GT(n){let e="";return sl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qn(n,e,t))}function kp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function qC(n){this.za=0,this.l=[],this.h=new vp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kp("baseRetryDelayMs",5e3,n),this.$a=kp("retryDelaySeedMs",1e4,n),this.Ya=kp("forwardChannelMaxRetries",2,n),this.ra=kp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new MC(n&&n.concurrentRequestLimit),this.Ca=new OC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Nv(n){if(zC(n),3==n.G){var e=n.V++,t=Mn(n.F);qn(t,"SID",n.J),qn(t,"RID",e),qn(t,"TYPE","terminate"),Ah(n,t),(e=new Eh(n,n.h,e,void 0)).K=2,e.v=Sp(Mn(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon&&(t=Pt.navigator.sendBeacon(e.v.toString(),"")),!t&&Pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ZC(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ic(e)}pl(n)}function Km(n){n.g&&(Qm(n),n.g.cancel(),n.g=null)}function zC(n){Km(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Op(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function Pv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Zm(n)}function Zm(n){NC(n.i)||n.m||(n.m=!0,cl(n.Ha,n),n.C=0)}function kv(n,e){var t;t=e?e.m:n.V++;const r=Mn(n.F);qn(r,"SID",n.J),qn(r,"RID",t),qn(r,"AID",n.U),Ah(n,r),n.o&&n.s&&Mv(r,n.o,n.s),t=new Eh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Ov(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Sc(n.i,t),Bm(t,r,e)}function Ah(n,e){n.j&&Hm({},function(t,r){qn(e,r,t)})}function Ov(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ai(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let v=i[m].h;const D=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),h=!1;else try{FC(D,l,"req"+v+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Fv(n){n.g||n.u||(n.Y=1,cl(n.Ga,n),n.A=0)}function Ym(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Cc(Ai(n.Ga,n),Uv(n,n.A)),n.A++,0))}function Qm(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function Lv(n){n.g=new Eh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Mn(n.oa);qn(e,"RID","rpc"),qn(e,"SID",n.J),qn(e,"CI",n.N?"0":"1"),qn(e,"AID",n.U),Ah(n,e),qn(e,"TYPE","xmlhttp"),n.o&&n.s&&Mv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Sp(Mn(e)),t.s=null,t.U=!0,mC(t,n)}function Op(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function Vv(n,e){var t=null;if(n.g==e){Op(n),Qm(n),n.g=null;var r=2}else{if(!Rp(n.i,e))return;t=e.D,kC(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;si(r=Ep(),new Cp(r,t,e,i)),Zm(n)}else Fv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function WT(n,e){return!(PC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Cc(Ai(n.Ha,n,e),Uv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ym(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:fl(n,5);break;case 4:fl(n,10);break;case 3:fl(n,6);break;default:fl(n,2)}}function Uv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function fl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ai(n.jb,n);t||(t=new Tc("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||Tp(t,"https"),Sp(t)),function Wm(n,e){const t=new vp;if(Pt.Image){const r=new Image;r.onload=nv(qm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nv(qm,t,r,"TestLoadImage: error",!1,e),r.onabort=nv(qm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nv(qm,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else qr(2);n.G=0,n.j&&n.j.va(e),pl(n),zC(n)}function pl(n){n.G=0,n.I=-1,n.j&&((0!=Av(n.i).length||0!=n.l.length)&&(n.i.i.length=0,hp(n.l),n.l.length=0),n.j.ua())}function KC(n,e,t){let r=function IC(n){return n instanceof Tc?Mn(n):new Tc(n,void 0)}(t);if(""!=r.i)e&&$m(r,e+"."+r.i),Gm(r,r.m);else{const i=Pt.location;r=function bh(n,e,t,r){var i=new Tc(null,void 0);return n&&Tp(i,n),e&&$m(i,e),t&&Gm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&sl(n.aa,function(i,a){qn(r,a,i)}),t=n.sa,(e=n.D)&&t&&qn(r,e,t),qn(r,"VER",n.ma),Ah(n,r),r}function ZC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new yr(t&&n.Ba&&!n.qa?new Dh({ib:!0}):n.qa)).L=n.H,e}function Ac(){}function Bv(){if(ya&&!(10<=Number(ph)))throw Error("Environmental error: no available transport.")}function Yi(n,e){Tr.call(this),this.g=new qC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Sm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new xc(this)}function qT(n){bp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jv(){Lm.call(this),this.status=1}function xc(n){this.g=n}(at=yr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vm.g(),this.C=function Fm(n){return n.h||(n.h=n.i())}(this.u?this.u:Vm),this.g.onreadystatechange=Ai(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void jC(this,a)}n=t||"";const i=new bc(this.headers);r&&Hm(r,function(a,l){i.set(l,a)}),r=function iv(n){e:{var e=$T;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Pt.FormData&&n instanceof Pt.FormData,!(0<=OT(UC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{GC(this),0<this.B&&((this.K=function BC(n){return ya&&function fh(){return function av(n){var e=hh;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=KE(String(ou)).split("."),t=KE("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=sv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||sv(0==i[2].length,0==a[2].length)||sv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ai(this.pa,this)):this.A=yv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){jC(this,a)}},at.pa=function(){void 0!==ev&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},at.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),zm(this))},at.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zm(this,!0)),yr.Z.M.call(this)},at.Fa=function(){this.s||(this.F||this.v||this.l?$C(this):this.cb())},at.cb=function(){$C(this)},at.ba=function(){try{return 2<au(this)?this.g.status:-1}catch(n){return-1}},at.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},at.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),LC(e)}},at.Da=function(){return this.m},at.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=qC.prototype).ma=8,at.G=1,at.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},at.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Eh(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=YE(a),QE(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ov(this,i,e),qn(t=Mn(this.F),"RID",n),qn(t,"CVER",22),this.D&&qn(t,"X-HTTP-Session-Id",this.D),Ah(this,t),this.o&&a&&Mv(t,this.o,a),Sc(this.i,i),this.Ra&&qn(t,"TYPE","init"),this.ja?(qn(t,"$req",e),qn(t,"SID","null"),i.$=!0,Bm(i,t,null)):Bm(i,t,e),this.G=2}}else 3==this.G&&(n?kv(this,n):0==this.l.length||NC(this.i)||kv(this))},at.Ga=function(){if(this.u=null,Lv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Cc(Ai(this.bb,this),n)}},at.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qr(10),Km(this),Lv(this))},at.ab=function(){null!=this.v&&(this.v=null,Km(this),Ym(this),qr(19))},at.jb=function(n){n?(this.h.info("Successfully pinged google.com"),qr(2)):(this.h.info("Failed to ping google.com"),qr(1))},(at=Ac.prototype).xa=function(){},at.wa=function(){},at.va=function(){},at.ua=function(){},at.Oa=function(){},Bv.prototype.g=function(n,e){return new Yi(n,e)},Wr(Yi,Tr),Yi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),cl(Ai(n.hb,n,e))),qr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=KC(n,null,n.W),Zm(n)},Yi.prototype.close=function(){Nv(this.g)},Yi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Pv(this.g,e)}else this.v?((e={}).__data__=oC(n),Pv(this.g,e)):Pv(this.g,n)},Yi.prototype.M=function(){this.g.j=null,delete this.j,Nv(this.g),delete this.g,Yi.Z.M.call(this)},Wr(qT,bp),Wr(jv,Lm),Wr(xc,Ac),xc.prototype.xa=function(){si(this.g,"a")},xc.prototype.wa=function(n){si(this.g,new qT(n))},xc.prototype.va=function(n){si(this.g,new jv(n))},xc.prototype.ua=function(){si(this.g,"b")},Bv.prototype.createWebChannel=Bv.prototype.g,Yi.prototype.send=Yi.prototype.u,Yi.prototype.open=Yi.prototype.m,Yi.prototype.close=Yi.prototype.close,Cv.NO_ERROR=0,Cv.TIMEOUT=8,Cv.HTTP_ERROR=6,fC.COMPLETE="complete",Iv.EventType=vh,vh.OPEN="a",vh.CLOSE="b",vh.ERROR="c",vh.MESSAGE="d",Tr.prototype.listen=Tr.prototype.N,yr.prototype.listenOnce=yr.prototype.O,yr.prototype.getLastError=yr.prototype.La,yr.prototype.getLastErrorCode=yr.prototype.Da,yr.prototype.getStatus=yr.prototype.ba,yr.prototype.getResponseJson=yr.prototype.Qa,yr.prototype.getResponseText=yr.prototype.ga,yr.prototype.send=yr.prototype.ea;var jM=il.createWebChannelTransport=function(){return new Bv},bt=il.getStatEventTarget=function(){return Ep()},Hv=il.ErrorCode=Cv,zT=il.EventType=fC,KT=il.Event=_h,Fp=il.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ZT=il.FetchXmlHttpFactory=Dh,Rc=il.WebChannel=Iv,Jm=il.XhrIo=yr;const er="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let Mc="9.8.0";const gl=new Vo.Yd("@firebase/firestore");function $v(){return gl.logLevel}function je(n,...e){if(gl.logLevel<=Vo.in.DEBUG){const t=e.map(Gv);gl.debug(`Firestore (${Mc}): ${n}`,...t)}}function vr(n,...e){if(gl.logLevel<=Vo.in.ERROR){const t=e.map(Gv);gl.error(`Firestore (${Mc}): ${n}`,...t)}}function xh(n,...e){if(gl.logLevel<=Vo.in.WARN){const t=e.map(Gv);gl.warn(`Firestore (${Mc}): ${n}`,...t)}}function Gv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function At(n,e){n||ut()}function et(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class JC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YT{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const v=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new Wv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new Ri(e)}}class Vp{constructor(e,t,r){this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Up{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Vp(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QT{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,je("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new XC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function eI(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ys.A=-1;class qv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=eI(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Nc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function tI(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Er(0,0))}static max(){return new St(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function JT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mh{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Mh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Mh{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const eS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends Mh{construct(e,t,r){return new Lr(e,t,r)}static isValidIdentifier(e){return eS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(t)}static emptyPath(){return new Lr([])}}class Pc{constructor(e){this.fields=e,e.sort(Lr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const tS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(n){if(At(!!n),"string"==typeof n){let e=0;const t=tS.exec(n);if(At(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function kc(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function Xm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nI(n){const e=n.mapValue.fields.__previous_value__;return Xm(e)?nI(e):e}function jp(n){const e=ml(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class Nh{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}function Ph(n){return null==n}function Hp(n){return 0===n&&1/n==-1/0}function zv(n){return"number"==typeof n&&Number.isInteger(n)&&!Hp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Jt.fromString(e))}static fromName(e){return new Je(Jt.fromString(e).popFirst(5))}static empty(){return new Je(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Jt(e.slice()))}}const lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},e_={nullValue:"NULL_VALUE"};function cu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xm(n)?4:oI(n)?9007199254740991:10:ut()}function va(n,e){if(n===e)return!0;const t=cu(n);if(t!==cu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jp(n).isEqual(jp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ml(r.timestampValue),l=ml(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,kc(n.bytesValue).isEqual(kc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return cr(r.geoPointValue.latitude)===cr(i.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return cr(r.integerValue)===cr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=cr(r.doubleValue),l=cr(i.doubleValue);return a===l?Hp(a)===Hp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Nc(n.arrayValue.values||[],e.arrayValue.values||[],va);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(JT(a)!==JT(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!va(a[h],l[h])))return!1;return!0}(n,e);default:return ut()}var i}function kh(n,e){return void 0!==(n.values||[]).find(t=>va(t,e))}function du(n,e){if(n===e)return 0;const t=cu(n),r=cu(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=cr(i.integerValue||i.doubleValue),h=cr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return rI(n.timestampValue,e.timestampValue);case 4:return rI(jp(n),jp(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=kc(i),h=kc(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const v=Bt(l[m],h[m]);if(0!==v)return v}return Bt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Bt(cr(i.latitude),cr(a.latitude));return 0!==l?l:Bt(cr(i.longitude),cr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const v=du(l[m],h[m]);if(v)return v}return Bt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===lu.mapValue&&a===lu.mapValue)return 0;if(i===lu.mapValue)return 1;if(a===lu.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=a.fields||{},v=Object.keys(m);h.sort(),v.sort();for(let D=0;D<h.length&&D<v.length;++D){const S=Bt(h[D],v[D]);if(0!==S)return S;const P=du(l[h[D]],m[v[D]]);if(0!==P)return P}return Bt(h.length,v.length)}(n.mapValue,e.mapValue);default:throw ut()}}function rI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=ml(n),r=ml(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Oh(n){return Kv(n)}function Kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ml(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?kc(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Kv(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Kv(r.fields[h])}`;return a+"}"}(n.mapValue):ut();var e}function hu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zv(n){return!!n&&"integerValue"in n}function Fh(n){return!!n&&"arrayValue"in n}function iI(n){return!!n&&"nullValue"in n}function sI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function t_(n){return!!n&&"mapValue"in n}function $p(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$p(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$p(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function nS(n){return"nullValue"in n?e_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hu(uu.empty(),Je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function rS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hu(uu.empty(),Je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?lu:ut()}function aI(n,e){const t=du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Yv(n,e){const t=du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!t_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$p(t)}setAll(e){let t=Lr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=$p(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());t_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return va(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];t_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new oi($p(this.value))}}function uI(n){const e=[];return Rh(n.fields,(t,r)=>{const i=new Lr([t]);if(t_(r)){const a=uI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Pc(e)}class Bn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Bn(e,0,St.min(),St.min(),oi.empty(),0)}static newFoundDocument(e,t,r){return new Bn(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new Bn(e,2,t,St.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,St.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Qv(n){return n.fields.find(e=>2===e.kind)}function Oc(n){return n.fields.filter(e=>2!==e.kind)}Gp.UNKNOWN_ID=-1;class n_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fc(0,Vs.min())}}function r_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new Vs(i,Je.empty(),e)}function lI(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(St.min(),Je.empty(),-1)}static max(){return new Vs(St.max(),Je.empty(),-1)}}function cI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}class Cr{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:ai.RED,this.left=null!=i?i:ai.EMPTY,this.right=null!=a?a:ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ai(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ai.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1,ai.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ai(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dI(this.data.getIterator())}getIteratorFrom(e){return new dI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class dI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lc(n){return n.hasNext()?n.getNext():void 0}class iS{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function Jv(n,e=null,t=[],r=[],i=null,a=null,l=null){return new iS(n,e,t,r,i,a,l)}function Vh(n){const e=et(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Oh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ph(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oh(r)).join(",")),e.P=t}return e.P}function _l(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!lS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!va(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tw(n.startAt,e.startAt)&&tw(n.endAt,e.endAt)}function i_(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fu(n,e){return n.filters.filter(t=>t instanceof Mi&&t.field.isEqual(e))}function Uh(n,e,t){let r=e_,i=!0;for(const a of fu(n,e)){let l=e_,h=!0;switch(a.op){case"<":case"<=":l=nS(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=e_}aI({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];aI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function hI(n,e,t){let r=lu,i=!0;for(const a of fu(n,e)){let l=lu,h=!0;switch(a.op){case">=":case">":l=rS(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=lu}Yv({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Yv({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Mi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new fI(e,t,r):"array-contains"===t?new uS(e,r):"in"===t?new gI(e,r):"not-in"===t?new mI(e,r):"array-contains-any"===t?new Xv(e,r):new Mi(e,t,r)}static V(e,t,r){return"in"===t?new oS(e,r):new aS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(du(t,this.value)):null!==t&&cu(this.value)===cu(t)&&this.v(du(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class fI extends Mi{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.v(t)}}class oS extends Mi{constructor(e,t){super(e,"in",t),this.keys=pI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aS extends Mi{constructor(e,t){super(e,"not-in",t),this.keys=pI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function pI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class uS extends Mi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fh(t)&&kh(t.arrayValue,this.value)}}class gI extends Mi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kh(this.value.arrayValue,t)}}class mI extends Mi{constructor(e,t){super(e,"not-in",t)}matches(e){if(kh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kh(this.value.arrayValue,t)}}class Xv extends Mi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kh(this.value.arrayValue,r))}}class jo{constructor(e,t){this.position=e,this.inclusive=t}}class wa{constructor(e,t="asc"){this.field=e,this.dir=t}}function lS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ew(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Je.comparator(Je.fromName(l.referenceValue),t.key):du(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!va(n.position[t],e.position[t]))return!1;return!0}class pu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function _I(n,e,t,r,i,a,l,h){return new pu(n,e,t,r,i,a,l,h)}function yl(n){return new pu(n)}function yI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function nw(n){for(const e of n.filters)if(e.S())return e.field;return null}function rw(n){return null!==n.collectionGroup}function Ho(n){const e=et(n);if(null===e.D){e.D=[];const t=nw(e),r=yI(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new wa(t)),e.D.push(new wa(Lr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wa(Lr.keyField(),a))}}}return e.D}function Us(n){const e=et(n);if(!e.C)if("F"===e.limitType)e.C=Jv(e.path,e.collectionGroup,Ho(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Ho(e))t.push(new wa(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new jo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new jo(e.startAt.position,e.startAt.inclusive):null;e.C=Jv(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Vc(n,e,t){return new pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function s_(n,e){return _l(Us(n),Us(e))&&n.limitType===e.limitType}function iw(n){return`${Vh(Us(n))}|lt:${n.limitType}`}function sw(n){return`Query(target=${function sS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Oh(r.value)}`;var r}).join(", ")}]`),Ph(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Oh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Oh(t)).join(",")),`Target(${e})`}(Us(n))}; limitType=${n.limitType})`}function vI(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=ew(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Ho(t),r)||t.endAt&&!function(i,a,l){const h=ew(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Ho(t),r)));var t,r}function ow(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dS(n){return(e,t)=>{let r=!1;for(const i of Ho(n)){const a=wI(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function wI(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?du(h,m):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function o_(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function EI(n){return{integerValue:""+n}}function CI(n,e){return zv(e)?EI(e):o_(n,e)}class a_{constructor(){this._=void 0}}function hS(n,e,t){return n instanceof Bh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Uc?bI(n,e):n instanceof Bc?jh(n,e):function(r,i){const a=II(r,i),l=aw(a)+aw(r.k);return Zv(a)&&Zv(r.k)?EI(l):o_(r.M,l)}(n,e)}function fS(n,e,t){return n instanceof Uc?bI(n,e):n instanceof Bc?jh(n,e):t}function II(n,e){return n instanceof jc?Zv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bh extends a_{}class Uc extends a_{constructor(e){super(),this.elements=e}}function bI(n,e){const t=uw(e);for(const r of n.elements)t.some(i=>va(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bc extends a_{constructor(e){super(),this.elements=e}}function jh(n,e){let t=uw(e);for(const r of n.elements)t=t.filter(i=>!va(i,r));return{arrayValue:{values:t}}}class jc extends a_{constructor(e,t){super(),this.M=e,this.k=t}}function aw(n){return cr(n.integerValue||n.doubleValue)}function uw(n){return Fh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hh{constructor(e,t){this.field=e,this.transform=t}}class pS{constructor(e,t){this.version=e,this.transformResults=t}}class Sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function u_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class l_{}function gS(n,e,t){n instanceof Hc?function(r,i,a){const l=r.value.clone(),h=c_(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ni?function(r,i,a){if(!u_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=c_(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(SI(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lw(n,e,t){var i;n instanceof Hc?function(r,i,a){if(!u_(r.precondition,i))return;const l=r.value.clone(),h=Gh(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(TI(i),l).setHasLocalMutations()}(n,e,t):n instanceof Ni?function(r,i,a){if(!u_(r.precondition,i))return;const l=Gh(r.fieldTransforms,a,i),h=i.data;h.setAll(SI(r)),h.setAll(l),i.convertToFoundDocument(TI(i),h).setHasLocalMutations()}(n,e,t):u_(n.precondition,i=e)&&i.convertToNoDocument(St.min())}function mS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=II(r.transform,i||null);null!=a&&(null==t&&(t=oi.empty()),t.set(r.field,a))}return t||null}function $h(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Nc(t,r,(i,a)=>function DI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Uc&&r instanceof Uc||t instanceof Bc&&r instanceof Bc?Nc(t.elements,r.elements,va):t instanceof jc&&r instanceof jc?va(t.k,r.k):t instanceof Bh&&r instanceof Bh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function TI(n){return n.isFoundDocument()?n.version:St.min()}class Hc extends l_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ni extends l_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function SI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function c_(n,e,t){const r=new Map;At(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,fS(l,h,t[i]))}return r}function Gh(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,hS(a,l,e))}return r}class Wp extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class cw extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class _S{constructor(e){this.count=e}}var tr,Xt;function AI(n){switch(n){default:return ut();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function xI(n){if(void 0===n)return vr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case tr.OK:return pe.OK;case tr.CANCELLED:return pe.CANCELLED;case tr.UNKNOWN:return pe.UNKNOWN;case tr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case tr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case tr.INTERNAL:return pe.INTERNAL;case tr.UNAVAILABLE:return pe.UNAVAILABLE;case tr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case tr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case tr.NOT_FOUND:return pe.NOT_FOUND;case tr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case tr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case tr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case tr.ABORTED:return pe.ABORTED;case tr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case tr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case tr.DATA_LOSS:return pe.DATA_LOSS;default:return ut()}}(Xt=tr||(tr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class gu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return XT(this.inner)}size(){return this.innerSize}}const RI=new Cr(Je.comparator);function vs(){return RI}const MI=new Cr(Je.comparator);function dw(...n){let e=MI;for(const t of n)e=e.insert(t.key,t);return e}function qp(){return new gu(n=>n.toString(),(n,e)=>n.isEqual(e))}const $M=new Cr(Je.comparator),hw=new Nn(Je.comparator);function _n(...n){let e=hw;for(const t of n)e=e.add(t);return e}const NI=new Nn(Bt);function Wh(){return NI}class $c{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,zp.createSynthesizedTargetChangeForCurrentChange(e,t)),new $c(St.min(),r,Wh(),vs(),_n())}}class zp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new zp(Vr.EMPTY_BYTE_STRING,t,_n(),_n(),_n())}}class d_{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class PI{constructor(e,t){this.targetId=e,this.$=t}}class kI{constructor(e,t,r=Vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class fw{constructor(){this.B=0,this.L=OI(),this.U=Vr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=_n(),t=_n(),r=_n();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new zp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=OI()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class pw{constructor(e){this.nt=e,this.st=new Map,this.it=vs(),this.rt=gw(),this.ot=new Nn(Bt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(i_(a))if(0===r){const l=new Je(a.path);this.ct(t,l,Bn.newNoDocument(l,St.min()))}else At(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&i_(h.target)){const m=new Je(h.target.path);null!==this.it.get(m)||this.It(l,m)||this.ct(l,m,Bn.newNoDocument(m,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=_n();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const v=this.wt(m);return!v||2===v.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new $c(e,t,this.ot,this.it,r);return this.it=vs(),this.rt=gw(),this.ot=new Nn(Bt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new fw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Nn(Bt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new fw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function gw(){return new Cr(Je.comparator)}function OI(){return new Cr(Je.comparator)}const FI={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yS{constructor(e,t){this.databaseId=e,this.N=t}}function qh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mw(n,e){return n.N?e.toBase64():e.toUint8Array()}function vS(n,e){return qh(n,e.toTimestamp())}function Ur(n){return At(!!n),St.fromTimestamp(function(e){const t=ml(e);return new Er(t.seconds,t.nanos)}(n))}function _w(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Pi(n){const e=Jt.fromString(n);return At(bS(e)),e}function Ea(n,e){return _w(n.databaseId,e.path)}function Ca(n,e){const t=Pi(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(VI(t))}function yw(n,e){return _w(n.databaseId,e)}function wS(n){const e=Pi(n);return 4===e.length?Jt.emptyPath():VI(e)}function mu(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VI(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function h_(n,e,t){return{name:Ea(n,e),fields:t.value.mapValue.fields}}function UI(n,e,t){const r=Ca(n,e.name),i=Ur(e.updateTime),a=new oi({mapValue:{fields:e.fields}}),l=Bn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Kp(n,e){let t;if(e instanceof Hc)t={update:h_(n,e.key,e.value)};else if(e instanceof Wp)t={delete:Ea(n,e.key)};else if(e instanceof Ni)t={update:h_(n,e.key,e.data),updateMask:Cw(e.fieldMask)};else{if(!(e instanceof cw))return ut();t={verify:Ea(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Bh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Uc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jc)return{fieldPath:a.field.canonicalString(),increment:l.k};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:vS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ut()),t;var i}function Zp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Sr.updateTime(Ur(i.updateTime)):void 0!==i.exists?Sr.exists(i.exists):Sr.none():Sr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(At("REQUEST_TIME"===l.setToServerValue),h=new Bh):"appendMissingElements"in l?h=new Uc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Bc(l.removeAllFromArray.values||[]):"increment"in l?h=new jc(a,l.increment):ut();const m=Lr.fromServerFormat(l.fieldPath);return new Hh(m,h)}(n,i)):[];var i;if(e.update){const i=Ca(n,e.update.name),a=new oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Pc((e.updateMask.fieldPaths||[]).map(v=>Lr.fromServerFormat(v)));return new Ni(i,a,l,t,r)}return new Hc(i,a,t,r)}if(e.delete){const i=Ca(n,e.delete);return new Wp(i,t)}if(e.verify){const i=Ca(n,e.verify);return new cw(i,t)}return ut()}function vw(n,e){return{documents:[yw(n,e.path)]}}function Yp(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=yw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(D=>function(S){if("=="===S.op){if(sI(S.value))return{unaryFilter:{field:_u(S.field),op:"IS_NAN"}};if(iI(S.value))return{unaryFilter:{field:_u(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(sI(S.value))return{unaryFilter:{field:_u(S.field),op:"IS_NOT_NAN"}};if(iI(S.value))return{unaryFilter:{field:_u(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_u(S.field),op:HI(S.op),value:S.value}}}(D));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:_u((D=v).field),direction:CS(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.N||Ph(v)?v:{value:v});var v,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function f_(n){let e=wS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=ww(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new wa(Gc((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Ph(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new jo((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new jo(D.values||[],!D.before)}(t.endAt)),_I(e,i,l,a,h,"F",m,v)}function ww(n){return n?void 0!==n.unaryFilter?[Ew(n)]:void 0!==n.fieldFilter?[IS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>ww(e)).reduce((e,t)=>e.concat(t)):ut():[]}function CS(n){return FI[n]}function HI(n){return LI[n]}function _u(n){return{fieldPath:n.canonicalString()}}function Gc(n){return Lr.fromServerFormat(n.fieldPath)}function IS(n){return Mi.create(Gc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ew(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Gc(n.unaryFilter.field);return Mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gc(n.unaryFilter.field);return Mi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gc(n.unaryFilter.field);return Mi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gc(n.unaryFilter.field);return Mi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function Cw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Qi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Iw(e)),e=DS(n.get(t),e);return Iw(e)}function DS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Iw(n){return n+"\x01\x01"}function $o(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ut(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ut()}a=l+2}return new Jt(r)}const $I=["userId","batchId"];function Qp(n,e){return[n,Qi(e)]}function bw(n,e,t){return[n,Qi(e),t]}const TS={},SS=["prefixPath","collectionGroup","readTime","documentId"],GI=["prefixPath","collectionGroup","documentId"],AS=["collectionGroup","readTime","prefixPath","documentId"],WI=["canonicalId","targetId"],qI=["targetId","path"],zI=["path","targetId"],KI=["collectionId","parent"],xS=["indexId","uid"],RS=["uid","sequenceNumber"],WM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZI=["indexId","uid","orderedDocumentKey"],qM=["userId","collectionPath","documentId"],zM=["userId","collectionPath","largestBatchId"],KM=["userId","collectionGroup","largestBatchId"],MS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ZM=[...MS,"documentOverlays"],NS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YM=[...NS,"indexConfiguration","indexState","indexEntries"],PS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Xp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new wr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new zh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=p_(r.target.error);this.At.reject(new zh(e,i))}}static open(e,t,r,i){try{return new Xp(t,e.transaction(i,r))}catch(a){throw new zh(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Dw(t)}}class Bs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Bs.Vt((0,k.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),vl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Bs.St())return!0;const e=(0,k.z$)(),t=Bs.Vt(e),r=0<t&&t<10,i=Bs.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new zh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new zh(e,h))},a.onupgradeneeded=l=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const m=Xp.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(D=>(m.bt(),D)).catch(D=>(m.abort(D),me.reject(D))).toPromise();return v.catch(()=>{}),yield m.Rt,v}catch(m){const v="FirebaseError"!==m.name&&h<3;if(je("SimpleDb","Transaction failed with error:",m.message,"Retrying:",v),a.close(),!v)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class YI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return vl(this.Ft.delete())}}class zh extends Fe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kh(n){return"IndexedDbTransactionError"===n.name}class Dw{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vl(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),vl(this.store.add(e))}get(e){return vl(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),vl(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),vl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new me((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=a=>{const l=p_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new YI(h),v=t(h.primaryKey,h.value,m);if(v instanceof me){const D=v.catch(S=>(m.done(),me.reject(S)));r.push(D)}m.isDone?i():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vl(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=p_(r.target.error);t(i)}})}let QI=!1;function p_(n){const e=Bs.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QI||(QI=!0,setTimeout(()=>{throw r},0)),r}}return n}class kS extends Jp{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function zr(n,e){const t=et(n);return Bs.xt(t.Ht,e)}class Tw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&gS(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&lw(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&lw(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&Nc(this.mutations,e.mutations,(t,r)=>$h(t,r))&&Nc(this.baseMutations,e.baseMutations,(t,r)=>$h(t,r))}}class eg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length);let i=$M;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new eg(e,t,r,i)}}class Sw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wc{constructor(e,t,r,i,a=St.min(),l=St.min(),h=Vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Wc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class OS{constructor(e){this.Jt=e}}function JI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:g_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ea(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:qh(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qc(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:qc(e.version)}}var i,a;return r}function g_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zh(n){const e=new Er(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Yh(n,e){const t=(e.baseMutations||[]).map(a=>Zp(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Zp(n.Jt,a)),i=Er.fromMillis(e.localWriteTimeMs);return new Tw(e.batchId,i,t,r)}function zc(n){const e=Zh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Zh(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(At(1===(i=n.query).documents.length),r=Us(yl(wS(i.documents[0])))):r=Us(f_(n.query)),new Wc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function XI(n,e){const t=qc(e.snapshotVersion),r=qc(e.lastLimboFreeSnapshotVersion);let i;i=i_(e.target)?vw(n.Jt,e.target):Yp(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vh(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function js(n){const e=f_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vc(e,e.limit,"L"):e}function Aw(n,e){return new Sw(e.largestBatchId,Zp(n.Jt,e.overlayMutation))}function m_(n,e){const t=e.path.lastSegment();return[n,Qi(e.path.popLast()),t]}class FS{getBundleMetadata(e,t){return eb(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Zh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return eb(e).put({bundleId:(r=t).id,createTime:qc(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return __(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:js(i.bundledQuery),readTime:Zh(i.readTime)};var i})}saveNamedQuery(e,t){return __(e).put({name:(r=t).name,readTime:qc(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eb(n){return zr(n,"bundles")}function __(n){return zr(n,"namedQueries")}class y_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new y_(e,t.uid||"")}getOverlay(e,t){return Qh(e).get(m_(this.userId,t)).next(r=>r?Aw(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Sw(t,l);i.push(this.Xt(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Qi(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Qh(e).Qt("collectionPathOverlayIndex",h))}),me.waitFor(a)}getOverlaysForCollection(e,t,r){const i=qp(),a=Qi(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qh(e).qt("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const v=Aw(this.M,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=qp();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qh(e).Wt({index:"collectionGroupOverlayIndex",range:h},(m,v,D)=>{const S=Aw(this.M,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return Qh(e).put(function(r,i,a){const[l,h,m]=m_(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Kp(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Qh(n){return zr(n,"documentOverlays")}class Kc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(cr(e.integerValue));else if("doubleValue"in e){const r=cr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Hp(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(kc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?oI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ut()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function tb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function nb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=tb(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Kc.fe=new Kc;class LS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=nb(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=nb(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class VS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class xw{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Go{constructor(){this.De=new LS,this.Ce=new VS(this.De),this.xe=new xw(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class wl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new wl(this.indexId,this.documentKey,this.arrayValue,r)}}function El(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=rb(n.arrayValue,e.arrayValue),0!==t?t:(t=rb(n.directionalValue,e.directionalValue),0!==t?t:Je.comparator(n.documentKey,e.documentKey)))}function rb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class JM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Qv(e);if(void 0!==t&&!this.Be(t))return!1;const r=Oc(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class US{constructor(){this.qe=new Rw}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Vs.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class Rw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(Jt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(Jt.comparator)).toArray()}}const v_=new Uint8Array(0);class ib{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Rw,this.Ge=new gu(r=>Vh(r),(r,i)=>_l(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Qi(i)};return sb(e).put(a)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[tI(t),""],!1,!0);return sb(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push($o(l.parent))}return r})}addFieldIndex(e,t){const r=Mw(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Mw(e),i=Jh(e),a=tg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=tg(e);let i=!0;const a=new Map;return me.forEach(this.Qe(t),l=>this.je(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=_n();const h=[];return me.forEach(a,(m,v)=>{var D;je("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${Vh(t)}`);const S=function(pt,dt){const Ot=Qv(dt);if(void 0===Ot)return null;for(const un of fu(pt,Ot.fieldPath))switch(un.op){case"array-contains-any":return un.value.arrayValue.values||[];case"array-contains":return[un.value]}return null}(v,m),P=function(pt,dt){const Ot=new Map;for(const un of Oc(dt))for(const Zr of fu(pt,un.fieldPath))switch(Zr.op){case"==":case"in":Ot.set(un.fieldPath.canonicalString(),Zr.value);break;case"not-in":case"!=":return Ot.set(un.fieldPath.canonicalString(),Zr.value),Array.from(Ot.values())}return null}(v,m),U=function(pt,dt){const Ot=[];let un=!0;for(const Zr of Oc(dt)){const Du=0===Zr.kind?Uh(pt,Zr.fieldPath,pt.startAt):hI(pt,Zr.fieldPath,pt.startAt);Ot.push(Du.value),un&&(un=Du.inclusive)}return new jo(Ot,un)}(v,m),K=function(pt,dt){const Ot=[];let un=!0;for(const Zr of Oc(dt)){const Du=0===Zr.kind?hI(pt,Zr.fieldPath,pt.endAt):Uh(pt,Zr.fieldPath,pt.endAt);Ot.push(Du.value),un&&(un=Du.inclusive)}return new jo(Ot,un)}(v,m),we=this.We(m,v,U),Le=this.We(m,v,K),Et=this.ze(m,v,P),vt=this.He(m.indexId,S,we,U.inclusive,Le,K.inclusive,Et);return me.forEach(vt,pt=>r.Gt(pt,t.limit).next(dt=>{dt.forEach(Ot=>{const un=Je.fromSegments(Ot.documentKey);l.has(un)||(l=l.add(un),h.push(un))})}))}).next(()=>h)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const P=t?this.Je(t[S/v]):v_,U=this.Ye(e,P,r[S%v],i),K=this.Xe(e,P,a[S%v],l),we=h.map(Le=>this.Ye(e,P,Le,!0));D.push(...this.createRange(U,K,we))}return D}Ye(e,t,r,i){const a=new wl(e,Je.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new wl(e,Je.empty(),t,r);return i?a.ke():a}je(e,t){const r=new JM(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.$e(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new Nn(Lr.comparator),m=!1;for(const v of l.filters){const D=v;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?m=!0:h=h.add(D.field))}for(const v of l.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Go;for(const i of Oc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);Kc.fe.Zt(a,l)}return r.Se()}Je(e){const t=new Go;return Kc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Go;return Kc.fe.Zt(hu(this.databaseId,t),r.Ne(function(i){const a=Oc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Go);let a=0;for(const l of Oc(e)){const h=r[a++];for(const m of i)if(this.en(t,l.fieldPath)&&Fh(h))i=this.nn(i,l,h);else{const v=m.Ne(l.kind);Kc.fe.Zt(h,v)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new Go;m.seed(h.Se()),Kc.fe.Zt(l,m.Ne(t.kind)),a.push(m)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Mi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Mw(e),i=Jh(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return me.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(v,D){const S=D?new Fc(D.sequenceNumber,new Vs(Zh(D.readTime),new Je($o(D.documentKey)),D.largestBatchId)):Fc.empty(),P=v.fields.map(([U,K])=>new n_(Lr.fromServerFormat(U),K));return new Gp(v.indexId,v.collectionGroup,P,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Mw(e),a=Jh(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,m=>{return a.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:qc((P=r).readTime),documentKey:Qi(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?me.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,m=>this.on(e,i,m).next(v=>{const D=this.un(a,m);return v.isEqual(D)?me.resolve():this.an(e,a,m,v,D)}))))})}cn(e,t,r,i){return tg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return tg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=tg(e);let a=new Nn(El);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,h)=>{a=a.add(new wl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}un(e,t){let r=new Nn(El);const i=this.Ze(t,e);if(null==i)return r;const a=Qv(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Fh(l))for(const h of l.arrayValue.values||[])r=r.add(new wl(t.indexId,e.key,this.Je(h),i))}else r=r.add(new wl(t.indexId,e.key,v_,i));return r}an(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,v,D,S){const P=h.getIterator(),U=m.getIterator();let K=Lc(P),we=Lc(U);for(;K||we;){let Le=!1,Et=!1;if(K&&we){const vt=v(K,we);vt<0?Et=!0:vt>0&&(Le=!0)}else null!=K?Et=!0:Le=!0;Le?(D(we),we=Lc(U)):Et?(S(K),K=Lc(P)):(K=Lc(P),we=Lc(U))}}(i,a,El,h=>{l.push(this.cn(e,t,r,h))},h=>{l.push(this.hn(e,t,r,h))}),me.waitFor(l)}rn(e){let t=1;return Jh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>El(l,h)).filter((l,h,m)=>!h||0!==El(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=El(l,e),m=El(l,t);if(0===h)i[0]=e.ke();else if(h>0&&m<0)i.push(l),i.push(l.ke());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,v_,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,v_,[]]));return a}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||cI(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=Vs.min()})).next(()=>r)}}function sb(n){return zr(n,"collectionParents")}function tg(n){return zr(n,"indexEntries")}function Mw(n){return zr(n,"indexConfiguration")}function Jh(n){return zr(n,"indexState")}const Nw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ws(e,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ob(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.Wt({range:l},(D,S,P)=>(h++,P.delete()));a.push(m.next(()=>{At(1===h)}));const v=[];for(const D of t.mutations){const S=bw(e,D.key.path,t.batchId);a.push(i.delete(S)),v.push(D.key)}return me.waitFor(a).next(()=>v)}function ng(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(41943040,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);class rg{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){At(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new rg(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Xh(e),l=yu(e);return l.add({}).next(h=>{At("number"==typeof h);const m=new Tw(h,t,r,i),v=function(P,U,K){const we=K.baseMutations.map(Et=>Kp(P.Jt,Et)),Le=K.mutations.map(Et=>Kp(P.Jt,Et));return{userId:U,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:we,mutations:Le}}(this.M,this.userId,m),D=[];let S=new Nn((P,U)=>Bt(P.canonicalString(),U.canonicalString()));for(const P of i){const U=bw(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(l.put(v)),D.push(a.put(U,TS))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[h]=m.keys()}),me.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return yu(e).get(t).next(r=>r?(At(r.userId===this.userId),Yh(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return yu(e).Wt({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(At(h.batchId>=r),a=Yh(this.M,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Yh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Qp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Xh(e).Wt({range:i},(l,h,m)=>{const[v,D,S]=l,P=$o(D);if(v===this.userId&&t.path.isEqual(P))return yu(e).get(S).next(U=>{if(!U)throw ut();At(U.userId===this.userId),a.push(Yh(this.M,U))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Bt);const i=[];return t.forEach(a=>{const l=Qp(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=Xh(e).Wt({range:h},(v,D,S)=>{const[P,U,K]=v,we=$o(U);P===this.userId&&a.path.isEqual(we)?r=r.add(K):S.done()});i.push(m)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Qp(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Nn(Bt);return Xh(e).Wt({range:l},(m,v,D)=>{const[S,P,U]=m,K=$o(P);S===this.userId&&r.isPrefixOf(K)?K.length===i&&(h=h.add(U)):D.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(yu(e).get(a).next(l=>{if(null===l)throw ut();At(l.userId===this.userId),r.push(Yh(this.M,l))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ob(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Xh(e).Wt({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=$o(a[1]);i.push(m)}else h.done()}).next(()=>{At(0===i.length)})})}containsKey(e,t){return w_(e,this.userId,t)}wn(e){return Pw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function w_(n,e,t){const r=Qp(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Xh(n).Wt({range:a,jt:!0},(h,m,v)=>{const[D,S,P]=h;D===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function yu(n){return zr(n,"mutations")}function Xh(n){return zr(n,"documentMutations")}function Pw(n){return zr(n,"mutationQueues")}class Cl{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Cl(0)}static yn(){return new Cl(-1)}}class BS{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Cl(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>St.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ef(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ef(e).Wt((l,h)=>{const m=zc(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>me.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ef(e).Wt((r,i)=>{const a=zc(i);t(a)})}pn(e){return jS(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}In(e,t){return jS(e).put("targetGlobalKey",t)}Tn(e,t){return ef(e).put(XI(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ef(e).Wt({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const v=zc(h);_l(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Zc(e);return t.forEach(l=>{const h=Qi(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=Zc(e);return me.forEach(t,a=>{const l=Qi(a.path);return me.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Zc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zc(e);let a=_n();return i.Wt({range:r,jt:!0},(l,h,m)=>{const v=$o(l[1]),D=new Je(v);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Qi(t.path),i=IDBKeyRange.bound([r],[tI(r)],!1,!0);let a=0;return Zc(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,h],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}Et(e,t){return ef(e).get(t).next(r=>r?zc(r):null)}}function ef(n){return zr(n,"targets")}function jS(n){return zr(n,"targetGlobal")}function Zc(n){return zr(n,"targetDocuments")}function Il(n){return kw.apply(this,arguments)}function kw(){return kw=(0,Ce.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==PS)throw n;je("LocalStore","Unexpectedly lost primary lease")}),kw.apply(this,arguments)}function ab([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class HS{constructor(e){this.An=e,this.buffer=new Nn(ab),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ab(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class XM{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Kh(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Il(i)}yield t.Sn(e)}))}}class eN{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(ys.A);const r=new HS(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Nw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nw):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,h,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),$v()<=Vo.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class tN{constructor(e,t){this.db=e,this.garbageCollector=new eN(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Ow(e,r)}removeReference(e,t,r){return Ow(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ow(e,t)}On(e,t){return function(r,i){let a=!1;return Pw(r).zt(l=>w_(r,l,i).next(h=>(h&&(a=!0),me.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,h)=>{if(h<=t){const m=this.On(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,St.min()),Zc(e).delete([0,Qi(l.path)])))});i.push(m)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ow(e,t)}Mn(e,t){const r=Zc(e);let i,a=ys.A;return r.Wt({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:v})=>{0===l?(a!==ys.A&&t(new Je($o(i)),a),a=v,i=m):a=ys.A}).next(()=>{a!==ys.A&&t(new Je($o(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ow(n,e){return Zc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qi(e.path),sequenceNumber:r}));var r}class $S{constructor(){this.changes=new gu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class GS{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yc(e).put(r)}removeEntry(e,t,r){return Yc(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],g_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(tf(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(tf(t))},(i,a)=>{r={document:this.$n(t,a),size:ng(a)}}).next(()=>r)}getEntries(e,t){let r=vs();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=vs(),i=new Cr(Je.comparator);return this.Ln(e,t,(a,l)=>{const h=this.$n(a,l);r=r.insert(a,h),i=i.insert(a,ng(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new Nn(Fw);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(tf(i.first()),tf(i.last())),l=i.getIterator();let h=l.getNext();return Yc(e).Wt({index:"documentKeyIndex",range:a},(m,v,D)=>{const S=Je.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;h&&Fw(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?D.Ut(tf(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),g_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=vs();for(const m of l){const v=this.$n(Je.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);h=h.insert(v.key,v)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=vs();const l=bl(t,r),h=bl(t,Vs.max());return Yc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,v,D)=>{const S=this.$n(Je.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new E_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ub(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Fn(e,t){return ub(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function QM(n,e){let t;if(e.document)t=UI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=Zh(e.noDocument.readTime);t=Bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Je.fromSegments(e.unknownDocument.path),i=Zh(e.unknownDocument.version);t=Bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return Bn.newInvalidDocument(e)}}class E_ extends $S{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new gu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Nn((a,l)=>Bt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const m=JI(this.Kn.M,l);i=i.add(a.path.popLast()),r+=ng(m)-h.size,t.push(this.Kn.addEntry(e,a,m))}else if(r-=h.size,this.trackRemovals){const m=JI(this.Kn.M,l.convertToNoDocument(St.min()));t.push(this.Kn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function ub(n){return zr(n,"remoteDocumentGlobal")}function Yc(n){return zr(n,"remoteDocumentsV14")}function tf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bl(n,e){const t=e.documentKey.path.toArray();return[n,g_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Fw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class Lw{constructor(e){this.M=e}kt(e,t,r,i){const a=new Xp("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$I,{unique:!0}),h.createObjectStore("documentMutations"),C_(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),C_(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").qt().next(v=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$I,{unique:!0});const D=m.store("mutations"),S=v.map(P=>D.put(P));return me.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:qM});m.createIndex("collectionPathOverlayIndex",zM,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",KM,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:SS});m.createIndex("documentKeyIndex",GI),m.createIndex("collectionGroupIndex",AS)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:xS}).createIndex("sequenceNumberIndex",RS,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:WM}).createIndex("documentKeyIndex",ZI,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=ng(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(h=>me.forEach(h,m=>{At(m.userId===a.userId);const v=Yh(this.M,m);return ob(e,a.userId,v).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,h)=>{const m=new Jt(l),v=[0,Qi(m)];a.push(t.get(v).next(D=>D?me.resolve():t.put({targetId:0,path:Qi(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:KI});const r=t.store("collectionParents"),i=new Rw,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Qi(m)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,h)=>{const m=new Jt(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,h,m],v)=>{const D=$o(h);return a(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=zc(i),l=XI(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const h=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Je(Jt.fromString(v.document.name).popFirst(5)):v.noDocument?Je.fromSegments(v.noDocument.path):v.unknownDocument?Je.fromSegments(v.unknownDocument.path):ut()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>me.waitFor(i))}}function C_(n){n.createObjectStore("targetDocuments",{keyPath:qI}).createIndex("documentTargetsIndex",zI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WI,{unique:!0}),n.createObjectStore("targetGlobal")}const Vw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ig{constructor(e,t,r,i,a,l,h,m,v,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=h,this.Xn=v,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!ig.vt())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tN(this,i),this.hs=t+"main",this.M=new OS(m),this.ls=new Bs(this.hs,this.ts,new Lw(this.M)),this.fs=new BS(this.referenceDelegate,this.M),this.ds=new GS(this.M),this._s=new FS,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,Vw);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ys(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Kh(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Qc(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return Jc(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zr(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return me.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):Qc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,Vw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jc(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kS(t,ys.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Jc(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return rg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new ib(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return y_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?YM:13===l?NS:12===l?ZM:11===l?MS:void ut();var l;let h;return this.ls.runTransaction(e,i,a,m=>(h=new kS(m,this.es?this.es.next():ys.A),"readwrite-primary"===t?this.Es(h).next(v=>!!v||this.As(h)).next(v=>{if(!v)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Fe(pe.FAILED_PRECONDITION,PS);return r(h)}).next(v=>this.bs(h).next(()=>v)):this.$s(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}$s(e){return Qc(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,Vw)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qc(e).put("owner",t)}static vt(){return Bs.vt()}Rs(e){const t=Qc(e);return t.get("owner").next(r=>this.Ps(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qc(n){return zr(n,"owner")}function Jc(n){return zr(n,"clientMetadata")}function lb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class nN{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):rw(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Je(t)).next(r=>{let i=dw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=dw();return this.indexManager.getCollectionParents(e,i).next(l=>me.forEach(l,h=>{const m=(v=t,D=h.child(i),new pu(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.zs(e,m,r).next(v=>{v.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const m=h.key;let v=i.get(m);null==v&&(v=Bn.newInvalidDocument(m),i=i.insert(m,v)),lw(h,v,l.localWriteTime),v.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((a,l)=>{vI(t,l)||(i=i.remove(a))}),i))}}class cb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=_n(),i=_n();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new cb(e,t.fromCache,r,i)}}class WS{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function cS(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(St.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const l=this.si(t,a);return this.ii(t,l,r,i)?this.ni(e,t):($v()<=Vo.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sw(t)),this.ri(e,l,t,r_(i,-1)))})}si(e,t){let r=new Nn(dS(e));return t.forEach((i,a)=>{vI(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return $v()<=Vo.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",sw(t)),this.Zs.Qs(e,t,Vs.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class db{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Cr(Bt),this.ai=new gu(a=>Vh(a),_l),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new nN(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function hb(n,e,t,r){return new db(n,e,t,r)}function fb(n,e){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,Ce.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=_n();for(const v of i){l.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of a){h.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.fi.Ks(r,m).next(v=>({di:v,removedBatchIds:l,addedBatchIds:h}))})})}),Uw.apply(this,arguments)}function qS(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,v){const D=m.batch,S=D.keys();let P=me.resolve();return S.forEach(U=>{P=P.next(()=>v.getEntry(h,U)).next(K=>{const we=m.docVersions.get(U);At(null!==we),K.version.compareTo(we)<0&&(D.applyToRemoteDocument(K,m),K.isValidDocument()&&(K.setReadTime(m.commitVersion),v.addEntry(K)))})}),P.next(()=>l.Bs.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function Bw(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function pb(n,e){const t=et(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((v,D)=>{const S=i.get(D);if(!S)return;h.push(t.fs.removeMatchingKeys(a,v.removedDocuments,D).next(()=>t.fs.addMatchingKeys(a,v.addedDocuments,D)));let P=S.withSequenceNumber(a.currentSequenceNumber);var U,K,we;e.targetMismatches.has(D)?P=P.withResumeToken(Vr.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):v.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(v.resumeToken,r)),i=i.insert(D,P),K=P,we=v,(0===(U=S).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(a,P))});let m=vs();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),h.push(jw(a,l,e.documentUpdates).next(v=>{m=v})),!r.isEqual(St.min())){const v=t.fs.getLastRemoteSnapshotVersion(a).next(D=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(v)}return me.waitFor(h).next(()=>l.apply(a)).next(()=>t.fi.Gs(a,m)).next(()=>m)}).then(a=>(t.ui=i,a))}function jw(n,e,t){let r=_n();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=vs();return t.forEach((l,h)=>{const m=i.get(l);h.isNoDocument()&&h.version.isEqual(St.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):je("LocalStore","Ignoring outdated watch update for ",l,". Current version:",m.version," Watch version:",h.version)}),a})}function zS(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function nf(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,me.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new Wc(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Xc(n,e,t){return sg.apply(this,arguments)}function sg(){return sg=(0,Ce.Z)(function*(n,e,t){const r=et(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Kh(l))throw l;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),sg.apply(this,arguments)}function Hw(n,e,t){const r=et(n);let i=St.min(),a=_n();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,v){const D=et(h),S=D.ai.get(v);return void 0!==S?me.resolve(D.ui.get(S)):D.fs.getTargetData(m,v)}(r,l,Us(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.oi.Qs(l,e,t?i:St.min(),t?a:_n())).next(h=>(gb(r,ow(e),h),{documents:h,_i:a})))}function $w(n,e){const t=et(n),r=et(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function I_(n,e){const t=et(n),r=t.ci.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,r_(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(gb(t,e,i),i))}function gb(n,e,t){let r=St.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function mb(){return mb=(0,Ce.Z)(function*(n,e,t,r){const i=et(n);let a=_n(),l=vs();for(const v of t){const D=e.wi(v.metadata.name);v.document&&(a=a.add(D));const S=e.mi(v);S.setReadTime(e.gi(v.metadata.readTime)),l=l.insert(D,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),m=yield nf(i,(v=r,Us(yl(Jt.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>jw(v,h,l).next(D=>(h.apply(v),D)).next(D=>i.fs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.fs.addMatchingKeys(v,a,m.targetId)).next(()=>i.fi.Gs(v,D)).next(()=>D)))}),mb.apply(this,arguments)}function rN(n,e){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,Ce.Z)(function*(n,e,t=_n()){const r=yield nf(n,Us(js(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ur(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const h=r.withResumeToken(Vr.EMPTY_BYTE_STRING,l);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(a,h).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),Gw.apply(this,arguments)}class ZS{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:js(r.bundledQuery),readTime:Ur(r.readTime)}),me.resolve();var r}}class iN{constructor(){this.overlays=new Cr(Je.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=qp(),a=t.length+1,l=new Je(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Cr((v,D)=>v-D);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=a.get(v.largestBatchId);null===D&&(D=qp(),a=a.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const h=qp(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>h.set(v,D)),!(h.size()>=i)););return me.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Sw(t,r));let a=this.Ii.get(t);void 0===a&&(a=_n(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class _b{constructor(){this.Ti=new Nn(ui.Ei),this.Ai=new Nn(ui.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new ui(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new ui(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Je(new Jt([])),r=new ui(t,e),i=new ui(t,e+1),a=[];return this.Ai.forEachInRange([r,i],l=>{this.Pi(l),a.push(l.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Je(new Jt([])),r=new ui(t,e),i=new ui(t,e+1);let a=_n();return this.Ai.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ui(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Je.comparator(e.key,t.key)||Bt(e.Ci,t.Ci)}static Ri(e,t){return Bt(e.Ci,t.Ci)||Je.comparator(e.key,t.key)}}class sN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Nn(ui.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const l=new Tw(a,t,r,i);this.Bs.push(l);for(const h of i)this.Ni=this.Ni.add(new ui(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(l)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return me.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],l=>{const h=this.ki(l.Ci);a.push(h)}),me.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(Bt);return t.forEach(i=>{const a=new ui(i,0),l=new ui(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,l],h=>{r=r.add(h.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const l=new ui(new Je(a),0);let h=new Nn(Bt);return this.Ni.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(h=h.add(m.Ci)),!0)},l),me.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){At(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const a=new ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new ui(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class oN{constructor(e){this.$i=e,this.docs=new Cr(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Bn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=vs();const a=new Je(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:m}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||cI(lI(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ut()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YS(this)}getSize(e){return me.resolve(this.size)}}class YS extends $S{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class aN{constructor(e){this.persistence=e,this.Li=new gu(t=>Vh(t),_l),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ui=0,this.qi=new _b,this.targetCount=0,this.Ki=Cl.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(a).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),me.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class uN{constructor(e,t){this.Gi={},this.overlays={},this.es=new ys(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new aN(this),this.indexManager=new US,this.ds=new oN(r=>this.referenceDelegate.Qi(r)),this.M=new OS(t),this._s=new ZS(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new sN(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new lN(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class lN extends Jp{constructor(e){super(),this.currentSequenceNumber=e}}class yb{constructor(e){this.persistence=e,this.Hi=new _b,this.Ji=null}static Yi(e){return new yb(e)}get Xi(){if(this.Ji)return this.Ji;throw ut()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=Je.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,St.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function s(n,e){return`firestore_clients_${n}_${e}`}function o(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function u(n,e){return`firestore_targets_${n}_${e}`}class c{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new c(e,t,i.state,a):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class d{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new d(e,r.state,i):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class p{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Wh();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=zv(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new p(e,a):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class y{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new y(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class E{constructor(){this.activeTargetIds=Wh()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Cr(Bt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=s(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new E),this.dr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(s(e.persistenceKey,i));if(a){const l=p.tr(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(u(this.persistenceKey,e));if(r){const i=d.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(u(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let l=ys.A;if(null!=a)try{const h=JSON.parse(a);At("number"==typeof h),l=h}catch(h){vr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==ys.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new c(this.currentUser,e,t,r),a=o(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=o(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=u(this.persistenceKey,e),a=new d(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return p.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return c.tr(new Ri(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return d.tr(i,t)}pr(e){return y.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.Lr(l,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Wh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class A{constructor(){this.Ur=new E,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new E,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class R{Kr(e){}shutdown(){}}class L{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const G={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ee{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Te extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ho(e,t);je("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(m=>(je("RestConnection","Received: ",m),m),m=>{throw xh("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${G[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new Jm;h.listenOnce(zT.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Hv.NO_ERROR:const v=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(v)),a(v);break;case Hv.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),l(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Hv.HTTP_ERROR:const D=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(U){const K=U.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(K)>=0?K:pe.UNKNOWN}(S.status);l(new Fe(P,S.message))}else l(new Fe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=jM(),l=bt(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new ZT({})),this.lo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");je("Connection","Creating WebChannel: "+m,h);const v=a.createWebChannel(m,h);let D=!1,S=!1;const P=new ee({Jr:K=>{S?je("Connection","Not sending because WebChannel is closed:",K):(D||(je("Connection","Opening WebChannel transport."),v.open(),D=!0),je("Connection","WebChannel sending:",K),v.send(K))},Yr:()=>v.close()}),U=(K,we,Le)=>{K.listen(we,Et=>{try{Le(Et)}catch(vt){setTimeout(()=>{throw vt},0)}})};return U(v,Rc.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),U(v,Rc.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),P.ro())}),U(v,Rc.EventType.ERROR,K=>{S||(S=!0,xh("Connection","WebChannel transport errored:",K),P.ro(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),U(v,Rc.EventType.MESSAGE,K=>{var we;if(!S){const Le=K.data[0];At(!!Le);const Et=Le,vt=Et.error||(null===(we=Et[0])||void 0===we?void 0:we.error);if(vt){je("Connection","WebChannel received error:",vt);const pt=vt.status;let dt=function(un){const Zr=tr[un];if(void 0!==Zr)return xI(Zr)}(pt),Ot=vt.message;void 0===dt&&(dt=pe.INTERNAL,Ot="Unknown error status: "+pt+" with message "+vt.message),S=!0,P.ro(new Fe(dt,Ot)),v.close()}else je("Connection","WebChannel received:",Le),P.oo(Le)}}),U(l,KT.STAT_EVENT,K=>{K.stat===Fp.PROXY?je("Connection","Detected buffering proxy"):K.stat===Fp.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function He(){return"undefined"!=typeof window?window:null}function Ze(){return"undefined"!=typeof document?document:null}function rt(n){return new yS(n,!0)}class xe{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yt{constructor(e,t,r,i,a,l,h,m){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new xe(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Ce.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}jo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class en extends yt{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function ES(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ut(),i=e.targetChange.targetIds||[],a=function(m,v){return m.N?(At(void 0===v||"string"==typeof v),Vr.fromBase64String(v||"")):(At(void 0===v||v instanceof Uint8Array),Vr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=void 0===m.code?pe.UNKNOWN:xI(m.code);return new Fe(v,m.message||"")}(l);t=new kI(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Ca(n,r.document.name),a=Ur(r.document.updateTime),l=new oi({mapValue:{fields:r.document.fields}}),h=Bn.newFoundDocument(i,a,l);t=new d_(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Ca(n,r.document),a=r.readTime?Ur(r.readTime):St.min(),l=Bn.newNoDocument(i,a);t=new d_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Ca(n,r.document);t=new d_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ut();{const r=e.filter,a=new _S(r.count||0);t=new PI(r.targetId,a)}}var m;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return St.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?St.min():a.readTime?Ur(a.readTime):St.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=mu(this.M),t.addTarget=function(i,a){let l;const h=a.target;return l=i_(h)?{documents:vw(i,h)}:{query:Yp(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=mw(i,a.resumeToken):a.snapshotVersion.compareTo(St.min())>0&&(l.readTime=qh(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function GM(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=mu(this.M),t.removeTarget=e,this.Lo(t)}}class En extends yt{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function jI(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,i){let a=Ur(r.updateTime?r.updateTime:i);return a.isEqual(St.min())&&(a=Ur(i)),new pS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.tu(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=mu(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Kp(this.M,r))};this.Lo(t)}}class Hs extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class ed{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(vr(t),this.uu=!1):je("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Ww{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(h=>{r.enqueueAndForget((0,Ce.Z)(function*(){var m;sf(l)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ce.Z)(function*(v){const D=et(v);D.wu.add(4),yield Dl(D),D.yu.set("Unknown"),D.wu.delete(4),yield td(D)}),function(v){return m.apply(this,arguments)})(l))}))}),this.yu=new ed(r,i)}}function td(n){return og.apply(this,arguments)}function og(){return og=(0,Ce.Z)(function*(n){if(sf(n))for(const e of n.mu)yield e(!0)}),og.apply(this,arguments)}function Dl(n){return ag.apply(this,arguments)}function ag(){return ag=(0,Ce.Z)(function*(n){for(const e of n.mu)yield e(!1)}),ag.apply(this,arguments)}function rf(n,e){const t=et(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),JS(t)?QS(t):T_(t).Mo()&&ug(t,e))}function nd(n,e){const t=et(n),r=T_(t);t._u.delete(e),r.Mo()&&b_(t,e),0===t._u.size&&(r.Mo()?r.$o():sf(t)&&t.yu.set("Unknown"))}function ug(n,e){n.pu.Z(e.targetId),T_(n).Ho(e)}function b_(n,e){n.pu.Z(e),T_(n).Jo(e)}function QS(n){n.pu=new pw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),T_(n).start(),n.yu.au()}function JS(n){return sf(n)&&!T_(n).ko()&&n._u.size>0}function sf(n){return 0===et(n).wu.size}function cN(n){n.pu=void 0}function cF(n){return XS.apply(this,arguments)}function XS(){return XS=(0,Ce.Z)(function*(n){n._u.forEach((e,t)=>{ug(n,e)})}),XS.apply(this,arguments)}function dF(n,e){return eA.apply(this,arguments)}function eA(){return eA=(0,Ce.Z)(function*(n,e){cN(n),JS(n)?(n.yu.lu(e),QS(n)):n.yu.set("Unknown")}),eA.apply(this,arguments)}function hF(n,e,t){return tA.apply(this,arguments)}function tA(){return tA=(0,Ce.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof kI&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i._u.delete(h),i.pu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vb(n,r)}else if(e instanceof d_?n.pu.ut(e):e instanceof PI?n.pu._t(e):n.pu.ht(e),!t.isEqual(St.min()))try{const r=yield Bw(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.pu.yt(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const v=i._u.get(m);v&&i._u.set(m,v.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i._u.get(h);if(!m)return;i._u.set(h,m.withResumeToken(Vr.EMPTY_BYTE_STRING,m.snapshotVersion)),b_(i,h);const v=new Wc(m.target,h,1,m.sequenceNumber);ug(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield vb(n,r)}var r}),tA.apply(this,arguments)}function vb(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,Ce.Z)(function*(n,e,t){if(!Kh(e))throw e;n.wu.add(1),yield Dl(n),n.yu.set("Offline"),t||(t=()=>Bw(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield td(n)}))}),nA.apply(this,arguments)}function dN(n,e){return e().catch(t=>vb(n,t,e))}function D_(n){return rA.apply(this,arguments)}function rA(){return rA=(0,Ce.Z)(function*(n){const e=et(n),t=af(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;fF(e);)try{const i=yield zS(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,pF(e,i)}catch(i){yield vb(e,i)}hN(e)&&fN(e)}),rA.apply(this,arguments)}function fF(n){return sf(n)&&n.du.length<10}function pF(n,e){n.du.push(e);const t=af(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function hN(n){return sf(n)&&!af(n).ko()&&n.du.length>0}function fN(n){af(n).start()}function gF(n){return iA.apply(this,arguments)}function iA(){return iA=(0,Ce.Z)(function*(n){af(n).nu()}),iA.apply(this,arguments)}function mF(n){return sA.apply(this,arguments)}function sA(){return sA=(0,Ce.Z)(function*(n){const e=af(n);for(const t of n.du)e.Zo(t.mutations)}),sA.apply(this,arguments)}function _F(n,e,t){return oA.apply(this,arguments)}function oA(){return oA=(0,Ce.Z)(function*(n,e,t){const r=n.du.shift(),i=eg.from(r,e,t);yield dN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield D_(n)}),oA.apply(this,arguments)}function yF(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,Ce.Z)(function*(n,e){var t;e&&af(n).Xo&&(yield(t=(0,Ce.Z)(function*(r,i){if(AI(a=i.code)&&a!==pe.ABORTED){const l=r.du.shift();af(r).Fo(),yield dN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield D_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),hN(n)&&fN(n)}),aA.apply(this,arguments)}function pN(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,Ce.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=sf(t);t.wu.add(3),yield Dl(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield td(t)}),uA.apply(this,arguments)}function lA(n,e){return cA.apply(this,arguments)}function cA(){return cA=(0,Ce.Z)(function*(n,e){const t=et(n);e?(t.wu.delete(2),yield td(t)):e||(t.wu.add(2),yield Dl(t),t.yu.set("Unknown"))}),cA.apply(this,arguments)}function T_(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.iu(),new en(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:cF.bind(null,n),eo:dF.bind(null,n),zo:hF.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Iu.Fo(),JS(n)?QS(n):n.yu.set("Unknown")):(yield n.Iu.stop(),cN(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function af(n){return n.Tu||(n.Tu=function(e,t,r){const i=et(e);return i.iu(),new En(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:gF.bind(null,n),eo:yF.bind(null,n),eu:mF.bind(null,n),tu:_F.bind(null,n)}),n.mu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Tu.Fo(),yield D_(n)):(yield n.Tu.stop(),n.du.length>0&&(je("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class dA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new dA(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(n,e){if(vr("AsyncQueue",`${e}: ${n}`),Kh(n))return new Fe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class A_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=dw(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new A_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof A_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new A_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gN{constructor(){this.Eu=new Cr(Je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ut():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class x_{constructor(e,t,r,i,a,l,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new x_(e,t,A_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&s_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class vF{constructor(){this.Ru=void 0,this.listeners=[]}}class wF{constructor(){this.queries=new gu(e=>iw(e),s_),this.onlineState="Unknown",this.bu=new Set}}function hA(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,Ce.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new vF),i)try{a.Ru=yield t.onListen(r)}catch(l){const h=S_(l,`Initialization of query '${sw(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&mA(t)}),fA.apply(this,arguments)}function pA(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,Ce.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),gA.apply(this,arguments)}function EF(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Vu(i)&&(r=!0);l.Ru=i}}r&&mA(t)}function CF(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function mA(n){n.bu.forEach(e=>{e.next()})}class _A{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new x_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=x_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class IF{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class mN{constructor(e){this.M=e}wi(e){return Ca(this.M,e)}mi(e){return e.metadata.exists?UI(this.M,e.document,!1):Bn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ur(e)}}class bF{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_N(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new mN(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||_n()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function KS(n,e,t,r){return mb.apply(this,arguments)}(e.localStore,new mN(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield rN(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function _N(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yN{constructor(e){this.key=e}}class vN{constructor(e){this.key=e}}class wN{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=_n(),this.mutatedKeys=_n(),this.Gu=dS(e),this.Qu=new A_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new gN,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),U=vI(this.query,S)?S:null,K=!!P&&this.mutatedKeys.has(P.key),we=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Le=!1;P&&U?P.data.isEqual(U.data)?K!==we&&(r.track({type:3,doc:U}),Le=!0):this.Hu(P,U)||(r.track({type:2,doc:U}),Le=!0,(m&&this.Gu(U,m)>0||v&&this.Gu(U,v)<0)&&(h=!0)):!P&&U?(r.track({type:0,doc:U}),Le=!0):P&&!U&&(r.track({type:1,doc:P}),Le=!0,(m||v)&&(h=!0)),Le&&(U?(l=l.add(U),a=we?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,ii:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((v,D)=>function(S,P){const U=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return U(S)-U(P)}(v.type,D.type)||this.Gu(v.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,m=h!==this.qu;return this.qu=h,0!==a.length||m?{snapshot:new x_(this.query,e.Qu,i,a,e.mutatedKeys,0===h,m,!1),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new gN,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=_n(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new vN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new yN(r))}),t}ta(e){this.Uu=e._i,this.Ku=_n();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return x_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class DF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TF{constructor(e){this.key=e,this.na=!1}}class SF{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sa={},this.ia=new gu(h=>iw(h),s_),this.ra=new Map,this.oa=new Set,this.ua=new Cr(Je.comparator),this.aa=new Map,this.ca=new _b,this.ha={},this.la=new Map,this.fa=Cl.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function AF(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ce.Z)(function*(n,e){const t=jA(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const l=yield nf(t.localStore,Us(e));t.isPrimaryClient&&rf(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield vA(t,e,r,"current"===h)}return i}),yA.apply(this,arguments)}function vA(n,e,t,r){return wA.apply(this,arguments)}function wA(){return wA=(0,Ce.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(U=(0,Ce.Z)(function*(K,we,Le,Et){let vt=we.view.Wu(Le);vt.ii&&(vt=yield Hw(K.localStore,we.query,!1).then(({documents:Ot})=>we.view.Wu(Ot,vt)));const pt=Et&&Et.targetChanges.get(we.targetId),dt=we.view.applyChanges(vt,K.isPrimaryClient,pt);return RA(K,we.targetId,dt.Xu),dt.snapshot}),function(K,we,Le,Et){return U.apply(this,arguments)})(n,D,S,P);var U};const i=yield Hw(n.localStore,e,!0),a=new wN(e,i._i),l=a.Wu(i.documents),h=zp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,h);RA(n,t,m.Xu);const v=new DF(e,t,a);return n.ia.set(e,v),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),m.snapshot}),wA.apply(this,arguments)}function xF(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,Ce.Z)(function*(n,e){const t=et(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!s_(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Xc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),nd(t.remoteStore,r.targetId),R_(t,r.targetId)}).catch(Il))):(R_(t,r.targetId),yield Xc(t.localStore,r.targetId,!0))}),EA.apply(this,arguments)}function CA(){return CA=(0,Ce.Z)(function*(n,e,t){const r=HA(n);try{const i=yield function(a,l){const h=et(a),m=Er.now(),v=l.reduce((S,P)=>S.add(P.key),_n());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,v).next(P=>{D=P;const U=[];for(const K of l){const we=mS(K,D.get(K.key));null!=we&&U.push(new Ni(K.key,we,uI(we.value.mapValue),Sr.exists(!0)))}return h.Bs.addMutationBatch(S,m,U,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.ha[a.currentUser.toKey()];m||(m=new Cr(Bt)),m=m.insert(l,h),a.ha[a.currentUser.toKey()]=m}(r,i.batchId,t),yield rd(r,i.changes),yield D_(r.remoteStore)}catch(i){const a=S_(i,"Failed to persist write");t.reject(a)}}),CA.apply(this,arguments)}function EN(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,Ce.Z)(function*(n,e){const t=et(n);try{const r=yield pb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.aa.get(a);l&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.na=!0:i.modifiedDocuments.size>0?At(l.na):i.removedDocuments.size>0&&(At(l.na),l.na=!1))}),yield rd(t,r,e)}catch(r){yield Il(r)}}),IA.apply(this,arguments)}function CN(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,l)=>{const h=l.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=et(a);h.onlineState=l;let m=!1;h.queries.forEach((v,D)=>{for(const S of D.listeners)S.Pu(l)&&(m=!0)}),m&&mA(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MF(n,e,t){return bA.apply(this,arguments)}function bA(){return bA=(0,Ce.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let l=new Cr(Je.comparator);l=l.insert(a,Bn.newNoDocument(a,St.min()));const h=_n().add(a),m=new $c(St.min(),new Map,new Nn(Bt),l,h);yield EN(r,m),r.ua=r.ua.remove(a),r.aa.delete(e),MA(r)}else yield Xc(r.localStore,e,!1).then(()=>R_(r,e,t)).catch(Il)}),bA.apply(this,arguments)}function NF(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,Ce.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield qS(t.localStore,e);xA(t,r,null),AA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rd(t,i)}catch(i){yield Il(i)}}),DA.apply(this,arguments)}function PF(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,Ce.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const h=et(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return h.Bs.lookupMutationBatch(m,l).next(D=>(At(null!==D),v=D.keys(),h.Bs.removeMutationBatch(m,D))).next(()=>h.Bs.performConsistencyCheck(m)).next(()=>h.fi.Ks(m,v))})}(r.localStore,e);xA(r,e,t),AA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rd(r,i)}catch(i){yield Il(i)}}),TA.apply(this,arguments)}function SA(){return SA=(0,Ce.Z)(function*(n,e){const t=et(n);sf(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=S_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),SA.apply(this,arguments)}function AA(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function xA(n,e,t){const r=et(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function R_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||IN(n,r)})}function IN(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(nd(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),MA(n))}function RA(n,e,t){for(const r of t)r instanceof yN?(n.ca.addReference(r.key,e),OF(n,r)):r instanceof vN?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||IN(n,r.key)):ut()}function OF(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(je("SyncEngine","New document in limbo: "+t),n.oa.add(r),MA(n))}function MA(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Je(Jt.fromString(e)),r=n.fa.next();n.aa.set(r,new TF(t)),n.ua=n.ua.insert(t,r),rf(n.remoteStore,new Wc(Us(yl(t.path)),r,2,ys.A))}}function rd(n,e,t){return NA.apply(this,arguments)}function NA(){return NA=(0,Ce.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,m)=>{l.push(r._a(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const D=cb.Ys(m.targetId,v);a.push(D)}}))}),yield Promise.all(l),r.sa.zo(i),yield(h=(0,Ce.Z)(function*(m,v){const D=et(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(v,P=>me.forEach(P.Hs,U=>D.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>me.forEach(P.Js,U=>D.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!Kh(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const U=D.ui.get(P),we=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);D.ui=D.ui.insert(P,we)}}}),function(m,v){return h.apply(this,arguments)})(r.localStore,a))}),NA.apply(this,arguments)}function FF(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,Ce.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield fb(t.localStore,e);t.currentUser=e,(i=t).la.forEach(l=>{l.forEach(h=>{h.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rd(t,r.di)}var i}),PA.apply(this,arguments)}function LF(n,e){const t=et(n),r=t.aa.get(e);if(r&&r.na)return _n().add(r.key);{let i=_n();const a=t.ra.get(e);if(!a)return i;for(const l of a){const h=t.ia.get(l);i=i.unionWith(h.view.ju)}return i}}function VF(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,Ce.Z)(function*(n,e){const t=et(n),r=yield Hw(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&RA(t,e.targetId,i.Xu),i}),kA.apply(this,arguments)}function UF(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,Ce.Z)(function*(n,e){const t=et(n);return I_(t.localStore,e).then(r=>rd(t,r))}),OA.apply(this,arguments)}function BF(n,e,t,r){return FA.apply(this,arguments)}function FA(){return FA=(0,Ce.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,h){const m=et(l),v=et(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.fn(D,h).next(S=>S?m.fi.Ks(D,S):me.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield D_(i.remoteStore):"acknowledged"===t||"rejected"===t?(xA(i,e,r||null),AA(i,e),h=e,et(et(i.localStore).Bs)._n(h)):ut(),yield rd(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),FA.apply(this,arguments)}function LA(){return LA=(0,Ce.Z)(function*(n,e){const t=et(n);if(jA(t),HA(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield bN(t,r.toArray());t.da=!0,yield lA(t.remoteStore,!0);for(const a of i)rf(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(R_(t,l),Xc(t.localStore,l,!0))),nd(t.remoteStore,l)}),yield i,yield bN(t,r),function(a){const l=et(a);l.aa.forEach((h,m)=>{nd(l.remoteStore,m)}),l.ca.Si(),l.aa=new Map,l.ua=new Cr(Je.comparator)}(t),t.da=!1,yield lA(t.remoteStore,!1)}}),LA.apply(this,arguments)}function bN(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,Ce.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let h;const m=r.ra.get(l);if(m&&0!==m.length){h=yield nf(r.localStore,Us(m[0]));for(const v of m){const D=r.ia.get(v),S=yield VF(r,D);S.snapshot&&a.push(S.snapshot)}}else{const v=yield $w(r.localStore,l);h=yield nf(r.localStore,v),yield vA(r,DN(v),l,!1)}i.push(h)}return r.sa.zo(a),i}),VA.apply(this,arguments)}function DN(n){return _I(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function HF(n){const e=et(n);return et(et(e.localStore).persistence).Fs()}function $F(n,e,t,r){return UA.apply(this,arguments)}function UA(){return UA=(0,Ce.Z)(function*(n,e,t,r){const i=et(n);if(i.da)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield I_(i.localStore,ow(a[0])),h=$c.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield rd(i,l,h);break}case"rejected":yield Xc(i.localStore,e,!0),R_(i,e,r);break;default:ut()}}),UA.apply(this,arguments)}function GF(n,e,t){return BA.apply(this,arguments)}function BA(){return BA=(0,Ce.Z)(function*(n,e,t){const r=jA(n);if(r.da){for(const i of e){if(r.ra.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield $w(r.localStore,i),l=yield nf(r.localStore,a);yield vA(r,DN(a),l.targetId,!1),rf(r.remoteStore,l)}for(const i of t)r.ra.has(i)&&(yield Xc(r.localStore,i,!1).then(()=>{nd(r.remoteStore,i),R_(r,i)}).catch(Il))}}),BA.apply(this,arguments)}function jA(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MF.bind(null,e),e.sa.zo=EF.bind(null,e.eventManager),e.sa.wa=CF.bind(null,e.eventManager),e}function HA(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PF.bind(null,e),e}class TN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=rt(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return hb(this.persistence,new WS,e.initialUser,this.M)}ya(e){return new uN(yb.Yi,this.M)}ga(e){return new A}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class SN extends TN{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield HA(r.Ta.syncEngine),yield D_(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return hb(this.persistence,new WS,e.initialUser,this.M)}pa(e){return new XM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=lb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new ig(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,He(),Ze(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new A}}class qF extends SN{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof I&&(r.sharedClientState.syncEngine={$r:BF.bind(null,i),Br:$F.bind(null,i),Lr:GF.bind(null,i),Fs:HF.bind(null,i),Fr:UF.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,Ce.Z)(function*(l){yield function jF(n,e){return LA.apply(this,arguments)}(r.Ta.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}ga(e){const t=He();if(!I.vt(t))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new I(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class $A{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=FF.bind(null,r.syncEngine),yield lA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new wF}createDatastore(e){const t=rt(e.databaseInfo.databaseId),r=new Te(e.databaseInfo);return new Hs(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>CN(this.syncEngine,h,0),l=L.vt()?new L:new R,new Ww(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,v){const D=new SF(r,i,a,l,h,m);return v&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=et(t);je("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Dl(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function AN(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class zF{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new wr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new IF(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Ce.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class KF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,l){const h=et(a),m=mu(h.M)+"/documents",v={documents:l.map(U=>Ea(h.M,U))},D=yield h._o("BatchGetDocuments",m,v),S=new Map;D.forEach(U=>{const K=function BI(n,e){return"found"in e?function(t,r){At(!!r.found);const i=Ca(t,r.found.name),a=Ur(r.found.updateTime),l=new oi({mapValue:{fields:r.found.fields}});return Bn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const i=Ca(t,r.missing),a=Ur(r.readTime);return Bn.newNoDocument(i,a)}(n,e):ut()}(h.M,U);S.set(K.key.toString(),K)});const P=[];return l.forEach(U=>{const K=S.get(U.toString());At(!!K),P.push(K)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Je.fromPath(i);e.mutations.push(new cw(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const l=et(i),h=mu(l.M)+"/documents",m={writes:a.map(v=>Kp(l.M,v))};yield l.co("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Sr.updateTime(t):Sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sr.updateTime(t)}return Sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ZF{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new xe(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Ce.Z)(function*(){const t=new KF(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Ph(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!AI(t)}return!1}}class YF{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ri.UNAUTHENTICATED,this.clientId=qv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ce.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(je("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=S_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xN(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield fb(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GA.apply(this,arguments)}function RN(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qA(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>pN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>pN(e.remoteStore,a)),n.onlineComponents=e}),WA.apply(this,arguments)}function qA(n){return zA.apply(this,arguments)}function zA(){return zA=(0,Ce.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield xN(n,new TN)),n.offlineComponents}),zA.apply(this,arguments)}function Eb(n){return KA.apply(this,arguments)}function KA(){return KA=(0,Ce.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield RN(n,new $A)),n.onlineComponents}),KA.apply(this,arguments)}function MN(n){return qA(n).then(e=>e.persistence)}function ZA(n){return qA(n).then(e=>e.localStore)}function NN(n){return Eb(n).then(e=>e.remoteStore)}function YA(n){return Eb(n).then(e=>e.syncEngine)}function M_(n){return QA.apply(this,arguments)}function QA(){return QA=(0,Ce.Z)(function*(n){const e=yield Eb(n),t=e.eventManager;return t.onListen=AF.bind(null,e.syncEngine),t.onUnlisten=xF.bind(null,e.syncEngine),t}),QA.apply(this,arguments)}function PN(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,h,m){const v=new wb({next:S=>{a.enqueueAndForget(()=>pA(i,D));const P=S.docs.has(l);!P&&S.fromCache?m.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?m.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new _A(yl(l.path),v,{includeMetadataChanges:!0,ku:!0});return hA(i,D)}(yield M_(n),n.asyncQueue,e,t,r)})),r.promise}function kN(n,e,t={}){const r=new wr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,l,h,m){const v=new wb({next:S=>{a.enqueueAndForget(()=>pA(i,D)),S.fromCache&&"server"===h.source?m.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new _A(l,v,{includeMetadataChanges:!0,ku:!0});return hA(i,D)}(yield M_(n),n.asyncQueue,e,t,r)})),r.promise}const ON=new Map;function JA(n,e,t){if(!t)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FN(n,e,t,r){if(!0===e&&!0===r)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LN(n){if(!Je.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VN(n){if(Je.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cb(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function UN(n,e){if(e<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class BN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,FN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BN({}),this._settingsFrozen=!1,e instanceof uu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(i.options.projectId)}(e))}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new QC;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Up(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ON.get(e);t&&(je("ComponentProvider","Removing Datastore"),ON.delete(e),t.terminate())}(this),Promise.resolve()}}class nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nr(this.firestore,e,this._key)}}class Es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class Tl extends Es{constructor(e,t,r){super(e,t,yl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Je(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function jN(n,e,...t){if(n=(0,k.m9)(n),JA("collection","path",e),n instanceof qw){const r=Jt.fromString(e,...t);return VN(r),new Tl(n,null,r)}{if(!(n instanceof nr||n instanceof Tl))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return VN(r),new Tl(n.firestore,null,r)}}function Ib(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=qv.R()),JA("doc","path",e),n instanceof qw){const r=Jt.fromString(e,...t);return LN(r),new nr(n,null,new Je(r))}{if(!(n instanceof nr||n instanceof Tl))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return LN(r),new nr(n.firestore,n instanceof Tl?n.converter:null,new Je(r))}}function HN(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof nr||n instanceof Tl)&&(e instanceof nr||e instanceof Tl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function $N(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Es&&e instanceof Es&&n.firestore===e.firestore&&s_(n._query,e._query)&&n.converter===e.converter}class aL{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new xe(this,"async_queue_retry"),this.Qa=()=>{const t=Ze();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Ze();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Ze();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new wr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Kh(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,vr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=dA.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&ut()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function XA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uL{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends qw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new aL,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||GN(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||GN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function GN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Nh(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new YF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function WN(n,e,t){const r=new wr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield xN(n,t),yield RN(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===pe.FAILED_PRECONDITION||a.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function qN(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class id{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(Vr.fromBase64String(e))}catch(t){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sl(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lg{constructor(e){this._methodName=e}}class bb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const yL=/^__.*__$/;class vL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hc(e,this.data,t,this.fieldTransforms)}}class zN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class Db{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Db(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return Ab(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(KN(this.ec)&&yL.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class wL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||rt(e)}lc(e,t,r,i=!1){return new Db({ec:e,methodName:t,hc:r,path:Lr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function cg(n){const e=n._freezeSettings(),t=rt(n._databaseId);return new wL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tb(n,e,t,r,i,a={}){const l=n.lc(a.merge||a.mergeFields?2:0,e,t,i);rx("Data must be an object, but it was:",l,r);const h=QN(r,l);let m,v;if(a.merge)m=new Pc(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const P=ix(e,S,t);if(!l.contains(P))throw new Fe(pe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);XN(D,P)||D.push(P)}m=new Pc(D),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new vL(new oi(h),m,v)}class zw extends lg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zw}}function ZN(n,e,t){return new Db({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class ex extends lg{_toFieldTransform(e){return new Hh(e.path,new Bh)}isEqual(e){return e instanceof ex}}class EL extends lg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ZN(this,e,!0),r=this.fc.map(a=>dg(a,t)),i=new Uc(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class CL extends lg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ZN(this,e,!0),r=this.fc.map(a=>dg(a,t)),i=new Bc(r);return new Hh(e.path,i)}isEqual(e){return this===e}}class IL extends lg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new jc(e.M,CI(e.M,this.dc));return new Hh(e.path,t)}isEqual(e){return this===e}}function tx(n,e,t,r){const i=n.lc(1,e,t);rx("Data must be an object, but it was:",i,r);const a=[],l=oi.empty();Rh(r,(m,v)=>{const D=Sb(e,m,t);v=(0,k.m9)(v);const S=i.oc(D);if(v instanceof zw)a.push(D);else{const P=dg(v,S);null!=P&&(a.push(D),l.set(D,P))}});const h=new Pc(a);return new zN(l,h,i.fieldTransforms)}function nx(n,e,t,r,i,a){const l=n.lc(1,e,t),h=[ix(e,r,t)],m=[i];if(a.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)h.push(ix(e,a[P])),m.push(a[P+1]);const v=[],D=oi.empty();for(let P=h.length-1;P>=0;--P)if(!XN(v,h[P])){const U=h[P];let K=m[P];K=(0,k.m9)(K);const we=l.oc(U);if(K instanceof zw)v.push(U);else{const Le=dg(K,we);null!=Le&&(v.push(U),D.set(U,Le))}}const S=new Pc(v);return new zN(D,S,l.fieldTransforms)}function YN(n,e,t,r=!1){return dg(t,n.lc(r?4:3,e))}function dg(n,e){if(JN(n=(0,k.m9)(n)))return rx("Unsupported field value:",e,n),QN(n,e);if(n instanceof lg)return function(t,r){if(!KN(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=dg(l,r.uc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CI(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:qh(r.M,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qh(r.M,i)}}if(t instanceof bb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Sl)return{bytesValue:mw(r.M,t._byteString)};if(t instanceof nr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:_w(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${Cb(t)}`)}(n,e)}function QN(n,e){const t={};return XT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rh(n,(r,i)=>{const a=dg(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function JN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof bb||n instanceof Sl||n instanceof nr||n instanceof lg)}function rx(n,e,t){if(!JN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Cb(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function ix(n,e,t){if((e=(0,k.m9)(e))instanceof id)return e._internalPath;if("string"==typeof e)return Sb(n,e);throw Ab("Field path arguments must be of type string or ",n,!1,void 0,t)}const bL=new RegExp("[~\\*/\\[\\]]");function Sb(n,e,t){if(e.search(bL)>=0)throw Ab(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new id(...e.split("."))._internalPath}catch(r){throw Ab(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ab(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Fe(pe.INVALID_ARGUMENT,h+n+m)}function XN(n,e){return n.some(t=>t.isEqual(e))}class Kw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DL extends Kw{data(){return super.data()}}function xb(n,e){return"string"==typeof e?Sb(n,e):e instanceof id?e._internalPath:e._delegate._internalPath}class hg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sd extends Kw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zw extends sd{data(e={}){return super.data(e)}}class uf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zw(this._firestore,this._userDataWriter,r.key,r,new hg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new Zw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new Zw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new hg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:TL(l.type),doc:h,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function eP(n,e){return n instanceof sd&&e instanceof sd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof uf&&e instanceof uf&&n._firestore===e._firestore&&$N(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function tP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yw{}function lf(n,...e){for(const t of e)n=t._apply(n);return n}class SL extends Yw{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=cg(e.firestore),r=function(i,a,l,h,m,v,D){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){aP(D,v);const U=[];for(const K of D)U.push(oP(h,i,K));S={arrayValue:{values:U}}}else S=oP(h,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||aP(D,v),S=YN(l,"where",D,"in"===v||"not-in"===v);const P=Mi.create(m,v,S);return function(U,K){if(K.S()){const Le=nw(U);if(null!==Le&&!Le.isEqual(K.field))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${K.field.toString()}'`);const Et=yI(U);null!==Et&&uP(0,K.field,Et)}const we=function(Le,Et){for(const vt of Le.filters)if(Et.indexOf(vt.op)>=0)return vt.op;return null}(U,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==we)throw new Fe(pe.INVALID_ARGUMENT,we===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${we.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Es(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new pu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class xL extends Yw{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new wa(i,a);return function(h,m){if(null===yI(h)){const v=nw(h);null!==v&&uP(0,v,m.field)}}(r,l),l}(e._query,this._c,this.gc);return new Es(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new pu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class nP extends Yw{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Es(e.firestore,e.converter,Vc(e._query,this.yc,this.Ic))}}class rP extends Yw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=sP(e,this.type,this.Tc,this.Ec);return new Es(e.firestore,e.converter,(i=t,new pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class iP extends Yw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=sP(e,this.type,this.Tc,this.Ec);return new Es(e.firestore,e.converter,(i=t,new pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function sP(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof Kw)return function(i,a,l,h,m){if(!h)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const D of Ho(i))if(D.field.isKeyField())v.push(hu(a,h.key));else{const S=h.data.field(D.field);if(Xm(S))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new jo(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=cg(n.firestore);return function(a,l,h,m,v,D){const S=a.explicitOrderBy;if(v.length>S.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<v.length;U++){const K=v[U];if(S[U].field.isKeyField()){if("string"!=typeof K)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof K}`);if(!rw(a)&&-1!==K.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${K}' contains a slash.`);const we=a.path.child(Jt.fromString(K));if(!Je.isDocumentKey(we))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Le=new Je(we);P.push(hu(l,Le))}else{const we=YN(h,m,K);P.push(we)}}return new jo(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function oP(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rw(e)&&-1!==t.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Je.isDocumentKey(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hu(n,new Je(r))}if(t instanceof nr)return hu(n,t._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cb(t)}.`)}function aP(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function uP(n,e,t){if(!t.isEqual(e))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const LL={maxAttempts:5};class sx{convertValue(e,t="none"){switch(cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return Rh(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new bb(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jp(e));default:return null}}convertTimestamp(e){const t=ml(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);At(bS(r));const i=new uu(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||vr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VL extends sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}class lP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cg(e)}set(e,t,r){this._verifyNotCommitted();const i=cf(e,this._firestore),a=Rb(i.converter,t,r),l=Tb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Sr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=cf(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof id?nx(this._dataReader,"WriteBatch.update",a._key,t,r,i):tx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cf(e,this._firestore);return this._mutations=this._mutations.concat(new Wp(t._key,Sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cf(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fg extends sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nr(this.firestore,null,t)}}function cP(n,e,t){n=dn(n,nr);const r=dn(n.firestore,dr),i=Rb(n.converter,e,t);return N_(r,[Tb(cg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Sr.none())])}function dP(n,e,t,...r){n=dn(n,nr);const i=dn(n.firestore,dr),a=cg(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof id?nx(a,"updateDoc",n._key,e,t,r):tx(a,"updateDoc",n._key,e),N_(i,[l.toMutation(n._key,Sr.exists(!0))])}function hP(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||XA(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(XA(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,D;if(n instanceof nr)v=dn(n.firestore,dr),D=yl(n._key.path),m={next:S=>{e[l]&&e[l](ox(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=dn(n,Es);v=dn(S.firestore,dr),D=S._query;const P=new fg(v);m={next:U=>{e[l]&&e[l](new uf(v,P,S,U))},error:e[l+1],complete:e[l+2]},tP(n._query)}return function(S,P,U,K){const we=new wb(K),Le=new _A(P,we,U);return S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return hA(yield M_(S),Le)})),()=>{we.Aa(),S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return pA(yield M_(S),Le)}))}}(Kr(v),D,h,m)}function N_(n,e){return function(t,r){const i=new wr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function RF(n,e,t){return CA.apply(this,arguments)}(yield YA(t),r,i)})),i.promise}(Kr(n),e)}function ox(n,e,t){const r=t.docs.get(e._key),i=new fg(n);return new sd(n,i,e._key,r,new hg(t.hasPendingWrites,t.fromCache),e.converter)}class KL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cg(e)}get(e){const t=cf(e,this._firestore),r=new VL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ut();const a=i[0];if(a.isFoundDocument())return new Kw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Kw(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const i=cf(e,this._firestore),a=Rb(i.converter,t,r),l=Tb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=cf(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof id?nx(this._dataReader,"Transaction.update",a._key,t,r,i):tx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=cf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cf(e,this._firestore),r=new fg(this._firestore);return super.get(e).then(i=>new sd(this._firestore,r,t._key,i._document,new hg(!1,!1),t.converter))}}function ax(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function pP(){if("undefined"==typeof Uint8Array)throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function gP(){if(!function Bp(){return"undefined"!=typeof atob}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Mc=zi.SDK_VERSION,(0,zi._registerComponent)(new Lo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new dr(i,new YT(t.getProvider("auth-internal")),new QT(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,zi.registerVersion)(er,"3.4.9",n),(0,zi.registerVersion)(er,"3.4.9","esm2017")}();class Qw{constructor(e){this._delegate=e}static fromBase64String(e){return gP(),new Qw(Sl.fromBase64String(e))}static fromUint8Array(e){return pP(),new Qw(Sl.fromUint8Array(e))}toBase64(){return gP(),this._delegate.toBase64()}toUint8Array(){return pP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ux(n){return function rV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class iV{enableIndexedDbPersistence(e,t){return function cL(n,e){qN(n=dn(n,dr));const t=Kr(n),r=n._freezeSettings(),i=new $A;return WN(t,i,new SN(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dL(n){qN(n=dn(n,dr));const e=Kr(n),t=n._freezeSettings(),r=new $A;return WN(e,r,new qF(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hL(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Bs.vt())return Promise.resolve();const i=r+"main";yield Bs.delete(i)}),function(r){return t.apply(this,arguments)})(lb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sL(n,e,t,r={}){var i;const a=(n=dn(n,qw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&xh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Ri.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ri(m)}n._authCredentials=new JC(new Wv(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function pL(n){return function QF(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield MN(n),t=yield NN(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i.wu.delete(0),td(i)}(t)}))}(Kr(n=dn(n,dr)))}(this._delegate)}disableNetwork(){return function gL(n){return function JF(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield MN(n),t=yield NN(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=et(i);a.wu.add(0),yield Dl(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=dn(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,FN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fL(n){return function(e){const t=new wr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function kF(n,e){return SA.apply(this,arguments)}(yield YA(e),t)})),t.promise}(Kr(n=dn(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function zL(n,e){return function tL(n,e){const t=new wb(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield M_(n),i=t,et(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield M_(n),i=t,void et(r).bu.delete(i);var r,i}))}}(Kr(n=dn(n,dr)),XA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new P_(this,jN(this._delegate,e))}catch(t){throw $s(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ia(this,Ib(this._delegate,e))}catch(t){throw $s(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gs(this,function oL(n,e){if(n=dn(n,qw),JA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(t=e,new pu(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw $s(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ZL(n,e,t){n=dn(n,dr);const r=Object.assign(Object.assign({},LL),t);return function(i){if(i.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function nL(n,e,t){const r=new wr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const i=yield(a=n,Eb(a).then(l=>l.datastore));var a;new ZF(n.asyncQueue,i,t,e,r).run()})),r.promise}(Kr(n),i=>e(new KL(n,i)),r)}(this._delegate,t=>e(new _P(this,t)))}batch(){return Kr(this._delegate),new yP(new lP(this._delegate,e=>N_(this._delegate,e)))}loadBundle(e){return function mL(n,e){const t=Kr(n=dn(n,dr)),r=new uL;return function rL(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return AN(m,v);if(m instanceof ArrayBuffer)return AN(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new zF(m,l);var m}(t,rt(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function WF(n,e,t){const r=et(n);var i;(i=(0,Ce.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(P,U){const K=et(P),we=Ur(U.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Le=>K._s.getBundleMetadata(Le,U.id)).then(Le=>!!Le&&Le.createTime.compareTo(we)>=0)}(a.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=m).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(_N(m));const v=new bF(m,a.localStore,l.M);let D=yield l.ma();for(;D;){const P=yield v.Fu(D);P&&h._updateProgress(P),D=yield l.ma()}const S=yield v.complete();return yield rd(a,S.Lu,void 0),yield function(P,U){const K=et(P);return K.persistence.runTransaction("Save bundle","readwrite",we=>K._s.saveBundleMetadata(we,U))}(a.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(m){return xh("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var P}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield YA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _L(n,e){return function iL(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield ZA(n),e)}))}(Kr(n=dn(n,dr)),e).then(t=>t?new Es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Gs(this,t):null)}}class Mb extends sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qw(new Sl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ia.forKey(t,this.firestore,null)}}class _P{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}get(e){const t=gg(e);return this._delegate.get(t).then(r=>new Jw(this._firestore,new sd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=gg(e);return r?(ax("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=gg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=gg(e);return this._delegate.delete(t),this}}class yP{constructor(e){this._delegate=e}set(e,t,r){const i=gg(e);return r?(ax("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=gg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=gg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=pg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new pg(e,new Mb(e),t),i.set(t,a)),a}}pg.INSTANCES=new WeakMap;class Ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ia(t,new nr(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new Ia(t,new nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new P_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new P_(this.firestore,jN(this._delegate,e))}catch(t){throw $s(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof nr&&HN(this._delegate,e)}set(e,t){t=ax("DocumentReference.set",t);try{return t?cP(this._delegate,e,t):cP(this._delegate,e)}catch(r){throw $s(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?dP(this._delegate,e):dP(this._delegate,e,t,...r)}catch(i){throw $s(i,"updateDoc()","DocumentReference.update()")}}delete(){return function WL(n){return N_(dn(n.firestore,dr),[new Wp(n._key,Sr.none())])}(this._delegate)}onSnapshot(...e){const t=vP(e),r=wP(e,i=>new Jw(this.firestore,new sd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return hP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function BL(n){n=dn(n,nr);const e=dn(n.firestore,dr),t=Kr(e),r=new fg(e);return function XF(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const h=yield function(m,v){const D=et(m);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,v))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=S_(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield ZA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new sd(e,r,n._key,i,new hg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function jL(n){n=dn(n,nr);const e=dn(n.firestore,dr);return PN(Kr(e),n._key,{source:"server"}).then(t=>ox(e,n,t))}(this._delegate):function UL(n){n=dn(n,nr);const e=dn(n.firestore,dr);return PN(Kr(e),n._key).then(t=>ox(e,n,t))}(this._delegate),t.then(r=>new Jw(this.firestore,new sd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ia(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function $s(n,e,t){return n.message=n.message.replace(e,t),n}function vP(n){for(const e of n)if("object"==typeof e&&!ux(e))return e;return{}}function wP(n,e){var t,r;let i;return i=ux(n[0])?n[0]:ux(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Jw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eP(this._delegate,e._delegate)}}class Xw extends Jw{data(e){const t=this._delegate.data(e);return function Lp(n,e){n||ut()}(void 0!==t),t}}class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}where(e,t,r){try{return new Gs(this.firestore,lf(this._delegate,function AL(n,e,t){const r=e,i=xb("where",n);return new SL(i,r,t)}(e,t,r)))}catch(i){throw $s(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gs(this.firestore,lf(this._delegate,function RL(n,e="asc"){const t=e,r=xb("orderBy",n);return new xL(r,t)}(e,t)))}catch(r){throw $s(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gs(this.firestore,lf(this._delegate,function ML(n){return UN("limit",n),new nP("limit",n,"F")}(e)))}catch(t){throw $s(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gs(this.firestore,lf(this._delegate,function NL(n){return UN("limitToLast",n),new nP("limitToLast",n,"L")}(e)))}catch(t){throw $s(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gs(this.firestore,lf(this._delegate,function PL(...n){return new rP("startAt",n,!0)}(...e)))}catch(t){throw $s(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gs(this.firestore,lf(this._delegate,function kL(...n){return new rP("startAfter",n,!1)}(...e)))}catch(t){throw $s(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gs(this.firestore,lf(this._delegate,function OL(...n){return new iP("endBefore",n,!1)}(...e)))}catch(t){throw $s(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gs(this.firestore,lf(this._delegate,function FL(...n){return new iP("endAt",n,!0)}(...e)))}catch(t){throw $s(t,"endAt()","Query.endAt()")}}isEqual(e){return $N(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $L(n){n=dn(n,Es);const e=dn(n.firestore,dr),t=Kr(e),r=new fg(e);return function eL(n,e){const t=new wr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,l){try{const h=yield Hw(i,a,!0),m=new wN(a,h._i),v=m.Wu(h.documents),D=m.applyChanges(v,!1);l.resolve(D.snapshot)}catch(h){const m=S_(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield ZA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new uf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function GL(n){n=dn(n,Es);const e=dn(n.firestore,dr),t=Kr(e),r=new fg(e);return kN(t,n._query,{source:"server"}).then(i=>new uf(e,r,n,i))}(this._delegate):function HL(n){n=dn(n,Es);const e=dn(n.firestore,dr),t=Kr(e),r=new fg(e);return tP(n._query),kN(t,n._query).then(i=>new uf(e,r,n,i))}(this._delegate),t.then(r=>new lx(this.firestore,new uf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=vP(e),r=wP(e,i=>new lx(this.firestore,new uf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return hP(this._delegate,t,r)}withConverter(e){return new Gs(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}class oV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new oV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xw(this._firestore,r))})}isEqual(e){return eP(this._delegate,e._delegate)}}class P_ extends Gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ia(this.firestore,e):null}doc(e){try{return new Ia(this.firestore,void 0===e?Ib(this._delegate):Ib(this._delegate,e))}catch(t){throw $s(t,"doc()","CollectionReference.doc()")}}add(e){return function qL(n,e){const t=dn(n.firestore,dr),r=Ib(n),i=Rb(n.converter,e);return N_(t,[Tb(cg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Sr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ia(this.firestore,t))}isEqual(e){return HN(this._delegate,e._delegate)}withConverter(e){return new P_(this.firestore,this._delegate.withConverter(e?pg.getInstance(this.firestore,e):null))}}function gg(n){return dn(n,nr)}class cx{constructor(...e){this._delegate=new id(...e)}static documentId(){return new cx(Lr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof id&&this._delegate._internalPath.isEqual(e._internalPath)}}class mg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function QL(){return new ex("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new mg(e)}static delete(){const e=function YL(){return new zw("deleteField")}();return e._methodName="FieldValue.delete",new mg(e)}static arrayUnion(...e){const t=function JL(...n){return new EL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mg(t)}static arrayRemove(...e){const t=function XL(...n){return new CL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mg(t)}static increment(e){const t=function eV(n){return new IL("increment",n)}(e);return t._methodName="FieldValue.increment",new mg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const aV={Firestore:mP,GeoPoint:bb,Timestamp:Er,Blob:Qw,Transaction:_P,WriteBatch:yP,DocumentReference:Ia,DocumentSnapshot:Jw,Query:Gs,QueryDocumentSnapshot:Xw,QuerySnapshot:lx,CollectionReference:P_,FieldPath:cx,FieldValue:mg,setLogLevel:function sV(n){!function YC(n){gl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function lV(n){(function uV(n,e){n.INTERNAL.registerComponent(new Lo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},aV)))})(n,(e,t)=>new mP(e,t,new iV)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Dm.Z);let cV=(()=>{class n{get windowRef(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dV(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f._UZ(1,"hr"),f.TgZ(2,"label",15),f._uU(3,"Ingrese el c\xf3digo de verificaci\xf3n"),f.qZA(),f.TgZ(4,"input",16),f.NdJ("ngModelChange",function(i){return f.CHM(t),f.oxw().verificationCode=i}),f.qZA(),f.TgZ(5,"button",17),f.NdJ("click",function(){return f.CHM(t),f.oxw().verifyLoginCode()}),f._uU(6,"Verificar"),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngModel",t.verificationCode)}}function hV(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",18)(1,"p"),f._uU(2,"\xa1Ha iniciado sesi\xf3n correctamente con su n\xfamero de tel\xe9fono!"),f.qZA(),f.TgZ(3,"p"),f._uU(4),f.qZA(),f.TgZ(5,"button",19),f.NdJ("click",function(){return f.CHM(t),f.oxw().logOut()}),f._uU(6,"Cerrar sesi\xf3n"),f.qZA()()}if(2&n){const t=f.oxw();f.xp6(4),f.hij("UserId: ",null==t.user?null:t.user.uid,"")}}class fV{constructor(){this.country="",this.area="",this.prefix="",this.line=""}get e164(){return`+${this.country+this.area+this.prefix+this.line}`}}let pV=(()=>{class n{constructor(t,r){this.win=t,this.router=r,this.phoneNumber=new fV,this.verificationCode=""}ngOnInit(){this.windowRef=this.win.windowRef,this.windowRef.recaptchaVerifier=new ru.Z.auth.RecaptchaVerifier("recaptcha-container"),this.windowRef.recaptchaVerifier.render()}sendLoginCode(){const t=this.windowRef.recaptchaVerifier,r=this.phoneNumber.e164;ru.Z.auth().signInWithPhoneNumber(r,t).then(i=>{this.windowRef.confirmationResult=i}).catch(i=>console.log(i))}verifyLoginCode(){this.windowRef.confirmationResult.confirm(this.verificationCode).then(t=>{this.user=t.user}).catch(t=>{console.log(t,"C\xf3digo incorrecto"),alert("C\xf3digo incorrecto")})}logOut(){ru.Z.auth().signOut().then(()=>{this.router.navigate(["menu"])}).catch(t=>console.log(t))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(cV),f.Y36(Si))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-phone-login"]],decls:20,vars:7,consts:[[1,"navbar","navbar-light","bg-light"],["routerLink","/menu",1,"navbar-brand"],[1,"fas","fa-sign-out-alt"],[3,"hidden"],[1,"container"],["for","phone","id","lbNum"],["id","cajaNum"],["type","text","id","num","placeholder","1","maxlength","2",1,"input",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","949","maxlength","3",1,"input",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","555","maxlength","3",1,"input",3,"ngModel","ngModelChange"],["type","text","id","num","placeholder","5555","maxlength","4",1,"input",3,"ngModel","ngModelChange"],["id","recaptcha-container"],[1,"btn","btn-outline-info",3,"click"],[4,"ngIf"],["id","successMSG",4,"ngIf"],["for","code","id","lbNum"],["type","text","name","code","id","num",3,"ngModel","ngModelChange"],[1,"btn","btn-outline-danger",3,"click"],["id","successMSG"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"a",1),f._UZ(2,"i",2),f._uU(3,"Regresar al men\xfa principal"),f.qZA()(),f.TgZ(4,"div",3)(5,"h1"),f._uU(6,"Log In con Firebase Authentication MSG"),f.qZA(),f.TgZ(7,"div",4)(8,"label",5),f._uU(9,"N\xfamero de tel\xe9fono"),f.qZA(),f.TgZ(10,"div",6)(11,"input",7),f.NdJ("ngModelChange",function(a){return r.phoneNumber.country=a}),f.qZA(),f.TgZ(12,"input",8),f.NdJ("ngModelChange",function(a){return r.phoneNumber.area=a}),f.qZA(),f.TgZ(13,"input",9),f.NdJ("ngModelChange",function(a){return r.phoneNumber.prefix=a}),f.qZA(),f.TgZ(14,"input",10),f.NdJ("ngModelChange",function(a){return r.phoneNumber.line=a}),f.qZA()(),f._UZ(15,"div",11),f.TgZ(16,"button",12),f.NdJ("click",function(){return r.sendLoginCode()}),f._uU(17,"SMS Text Login Code"),f.qZA(),f.YNc(18,dV,7,1,"div",13),f.qZA()(),f.YNc(19,hV,7,1,"div",14)),2&t&&(f.xp6(4),f.Q6J("hidden",r.user),f.xp6(7),f.Q6J("ngModel",r.phoneNumber.country),f.xp6(1),f.Q6J("ngModel",r.phoneNumber.area),f.xp6(1),f.Q6J("ngModel",r.phoneNumber.prefix),f.xp6(1),f.Q6J("ngModel",r.phoneNumber.line),f.xp6(4),f.Q6J("ngIf",r.windowRef.confirmationResult),f.xp6(1),f.Q6J("ngIf",r.user))},directives:[tu,ji,Zg,$r,zd,Mr],styles:['@import"https://fonts.googleapis.com/css2?family=Suez+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Raleway&display=swap";.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center}.navbar-brand[_ngcontent-%COMP%]{margin-left:30px;font-size:15px;font-family:Raleway;font-weight:700}h1[_ngcontent-%COMP%]{font-family:Suez One;text-align:center;margin:20px;font-size:40px}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], p[_ngcontent-%COMP%], #successMSG[_ngcontent-%COMP%]{font-family:Raleway;font-size:20px}p[_ngcontent-%COMP%]{margin:20px;text-align:center}#num[_ngcontent-%COMP%]{margin:10px;width:140px}#cajaNum[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}#lbNum[_ngcontent-%COMP%]{margin:10px}label[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]{margin:20px}#recaptcha-container[_ngcontent-%COMP%]{margin-top:20px;margin-left:20px;margin-right:20px}']}),n})();var dx=O(4986),Cn=O(5813);function hx(){return(0,Ii.e)((n,e)=>{let t,r=!1;n.subscribe((0,or.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function EP(n,e=zu.y){return n=null!=n?n:gV,(0,Ii.e)((t,r)=>{let i,a=!0;t.subscribe((0,or.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function gV(n,e){return n===e}var li=O(2011),fx=O(6451),Nb=O(5363),mV=O(6063);class _V extends Xn.x{constructor(e=1/0,t=1/0,r=mV.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var CP=O(3099);function IP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,CP.B)({connector:()=>new _V(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function bP(n,e){return(0,Yg.m)(e)?Gr(()=>n,e):Gr(()=>n)}var px=O(9468);O(5867);const TP=new Map,CV={activated:!1,tokenObservers:[]},IV={initialized:!1,enabled:!1};function ki(n){return TP.get(n)||CV}function vu(n,e){TP.set(n,e)}function kb(){return IV}class AV{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function xV(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ws=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function AP(n){if(!ki(n).activated)throw Ws.create("use-before-activation",{appName:n.name})}function yx(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Ws.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw Ws.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Ws.create("fetch-parse-error",{originalErrorMessage:S.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const v=1e3*Number(m[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}}),vx.apply(this,arguments)}function kV(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const e0="firebase-app-check-store";let Lb=null;function RP(){return Lb||(Lb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ws.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(e0,{keyPath:"compositeKey"})}}catch(t){e(Ws.create("storage-open",{originalErrorMessage:t.message}))}}),Lb)}function wx(){return wx=(0,Ce.Z)(function*(n,e){const r=(yield RP()).transaction(e0,"readwrite"),a=r.objectStore(e0).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;h(Ws.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),wx.apply(this,arguments)}const t0=new Vo.Yd("@firebase/app-check");function kP(n,e){return(0,k.hl)()?function VV(n,e){return function MP(n,e){return wx.apply(this,arguments)}(function PP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{t0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function OP(){return kb().enabled}function FP(){return bx.apply(this,arguments)}function bx(){return bx=(0,Ce.Z)(function*(){const n=kb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),bx.apply(this,arguments)}const GV={error:"UNKNOWN_ERROR"};function WV(n){return k.US.encodeString(JSON.stringify(n),!1)}function Vb(n){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,Ce.Z)(function*(n,e=!1){const t=n.app;AP(t);const r=ki(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Ub(m)&&(i=m)}if(!e&&i&&Ub(i))return{token:i.token};let h,l=!1;if(OP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=yx(kV(t,yield FP()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const m=yield r.exchangeTokenPromise;return yield kP(t,m),vu(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?t0.warn(m.message):t0.error(m),a=m}return i?(h={token:i.token},vu(t,Object.assign(Object.assign({},r),{token:i})),yield kP(t,i)):h=zV(a),l&&VP(t,h),h}),Dx.apply(this,arguments)}function Sx(n,e){const t=ki(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),vu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function LP(n){const{app:e}=n,t=ki(e);let r=t.tokenRefresher;r||(r=function qV(n){const{app:e}=n;return new AV((0,Ce.Z)(function*(){let r;if(r=ki(e).token?yield Vb(n,!0):yield Vb(n),r.error)throw r.error}),()=>!0,()=>{const t=ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),vu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VP(n,e){const t=ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Ub(n){return n.expireTimeMillis-Date.now()>0}function zV(n){return{token:WV(GV),error:n}}class KV{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ki(this.app);for(const t of e)Sx(this.app,t.next);return Promise.resolve()}}const qP="app-check-internal";!function uU(){(0,zi._registerComponent)(new Lo.wA("app-check",n=>function ZV(n,e){return new KV(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qP).initialize()})),(0,zi._registerComponent)(new Lo.wA(qP,n=>function YV(n){return{getToken:e=>Vb(n,e),addTokenListener:e=>function Tx(n,e,t,r){const{app:i}=n,a=ki(i),l={next:t,error:r,type:e};if(vu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Ub(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),LP(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>LP(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zi.registerVersion)("@firebase/app-check","0.5.8")}();class n0{constructor(){return(0,Cn.vb)("app-check")}}"undefined"!=typeof window&&window;const Nx=new f.OlP("angularfire2.auth.use-emulator"),Px=new f.OlP("angularfire2.auth.settings"),kx=new f.OlP("angularfire2.auth.tenant-id"),Ox=new f.OlP("angularfire2.auth.langugage-code"),Fx=new f.OlP("angularfire2.auth.use-device-language"),Lx=new f.OlP("angularfire.auth.persistence"),Vx=(n,e,t,r,i,a,l,h)=>(0,li.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,D]of Object.entries(l))m.settings[v]=D;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let r0=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,P,U){const K=new Xn.x,we=Dt(void 0).pipe((0,Nb.Q)(l.outsideAngular),Gr(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,mt.U)(()=>(0,li.on)(t,a,r)),(0,mt.U)(Le=>Vx(Le,a,h,v,D,S,m,P)),IP({bufferSize:1,refCount:!1}));if(Pr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Dt(null);else{we.pipe(Di()).subscribe();const Et=we.pipe(Gr(dt=>dt.getRedirectResult().then(Ot=>Ot,()=>null)),Cn.iC,IP({bufferSize:1,refCount:!1})),vt=we.pipe(Gr(dt=>new Os.y(Ot=>({unsubscribe:a.runOutsideAngular(()=>dt.onAuthStateChanged(un=>Ot.next(un),un=>Ot.error(un),()=>Ot.complete()))})))),pt=we.pipe(Gr(dt=>new Os.y(Ot=>({unsubscribe:a.runOutsideAngular(()=>dt.onIdTokenChanged(un=>Ot.next(un),un=>Ot.error(un),()=>Ot.complete()))}))));this.authState=Et.pipe(bP(vt),(0,px.R)(l.outsideAngular),(0,Nb.Q)(l.insideAngular)),this.user=Et.pipe(bP(pt),(0,px.R)(l.outsideAngular),(0,Nb.Q)(l.insideAngular)),this.idToken=this.user.pipe(Gr(dt=>dt?(0,wn.D)(dt.getIdToken()):Dt(null))),this.idTokenResult=this.user.pipe(Gr(dt=>dt?(0,wn.D)(dt.getIdTokenResult()):Dt(null))),this.credential=(0,fx.T)(Et,K,this.authState.pipe(Ja(dt=>!dt))).pipe((0,mt.U)(dt=>(null==dt?void 0:dt.user)?dt:null),(0,px.R)(l.outsideAngular),(0,Nb.Q)(l.insideAngular))}return(0,li.pX)(this,we,a,{spy:{apply:(Le,Et,vt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&vt.then(pt=>K.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(Nx,8),f.LFG(Px,8),f.LFG(kx,8),f.LFG(Ox,8),f.LFG(Fx,8),f.LFG(Lx,8),f.LFG(n0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pU=(()=>{class n{constructor(){ru.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[r0]}),n})();function KP(n,e){return function gU(n,e=dx.z){return new Os.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Ux(n,e){return KP(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function jb(n,e){return Ux(n,e).pipe(em(void 0),hx(),(0,mt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),v=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function ZP(n,e,t){return jb(n,t).pipe(Zu((r,i)=>function _U(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function yU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Bx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Bx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Bx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),EP(),(0,mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Bx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function YP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class QP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(em(void 0),hx(),Ja(([r,i])=>i.length>0||!r),(0,mt.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YP(e);return ZP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return Ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new JP(this.ref.doc(e),this.afs)}}class JP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=tk(r,t);return new QP(i,a,this.afs)}snapshotChanges(){return function mU(n,e){return KP(n,e).pipe(em(void 0),hx(),(0,mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(Cn.iC)}}class vU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jb(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ja(t=>t.length>0),Cn.iC):jb(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Zu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YP(e);return ZP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return Ux(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Cn.iC)}}const XP=new f.OlP("angularfire2.enableFirestorePersistence"),ek=new f.OlP("angularfire2.firestore.persistenceSettings"),wU=new f.OlP("angularfire2.firestore.settings"),EU=new f.OlP("angularfire2.firestore.use-emulator");function tk(n,e=(t=>t)){return{query:e(n),ref:n}}let jx=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,P,U,K,we,Le,Et,vt){this.schedulers=m;const pt=(0,li.on)(t,h,r),dt=D;S&&Vx(pt,h,P,K,we,Le,U,Et),[this.firestore,this.persistenceEnabled$]=(0,li.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Ot=h.runOutsideAngular(()=>pt.firestore());if(a&&Ot.settings(a),dt&&Ot.useEmulator(...dt),i&&!Pr(l)){const un=()=>{try{return(0,wn.D)(Ot.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Zr){return"undefined"!=typeof console&&console.warn(Zr),Dt(!1)}};return[Ot,h.runOutsideAngular(un)]}return[Ot,Dt(!1)]},[a,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=tk(i,r),h=this.schedulers.ngZone.run(()=>a);return new QP(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new vU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new JP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(XP,8),f.LFG(wU,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(ek,8),f.LFG(EU,8),f.LFG(r0,8),f.LFG(Nx,8),f.LFG(Px,8),f.LFG(kx,8),f.LFG(Ox,8),f.LFG(Fx,8),f.LFG(Lx,8),f.LFG(n0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),CU=(()=>{class n{constructor(){ru.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XP,useValue:!0},{provide:ek,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[jx]}),n})(),IU=(()=>{class n{constructor(t){this.firestore=t}createProduct(t){return this.firestore.collection("products").add(t)}getProduct(t){return this.firestore.collection("products").doc(t).snapshotChanges()}getProducts(){return this.firestore.collection("products").snapshotChanges()}updateProduct(t,r){return this.firestore.collection("products").doc(t).set(r)}deleteProduct(t){return this.firestore.collection("products").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jx))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bU(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div",16)(1,"div",17),f._UZ(2,"img",18),f.qZA(),f.TgZ(3,"div",19)(4,"p"),f._uU(5),f.qZA(),f.TgZ(6,"div",20)(7,"button",21),f.NdJ("click",function(){const a=f.CHM(t).$implicit;return f.oxw().editProduct(a.id)}),f._uU(8,"Editar"),f.qZA(),f.TgZ(9,"button",22),f.NdJ("click",function(){const a=f.CHM(t).$implicit;return f.oxw().deleteProduct(a.id)}),f._uU(10,"Eliminar"),f.qZA()()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.data.url,f.LSH),f.xp6(3),f.Oqu(t.data.nombre)}}let DU=(()=>{class n{constructor(t){this.firestoreService=t,this.products=[],this.documentId="",this.currentStatus=1,this.newProductForm=new $u({nombre:new oc("",Vu.required),url:new oc("",Vu.required),id:new oc("")})}ngOnInit(){this.newProductForm.setValue({id:"",nombre:"",url:""}),this.firestoreService.getProducts().subscribe(t=>{this.products=[],t.forEach(r=>{this.products.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}newProduct(t,r=this.documentId){console.log(`Status: ${this.currentStatus}`),1==this.currentStatus?this.firestoreService.createProduct({nombre:t.nombre,url:t.url}).then(()=>{console.log("Documento creado exitosamente!"),this.newProductForm.setValue({nombre:"",url:"",id:""})},a=>{console.error(a)}):this.firestoreService.updateProduct(r,{nombre:t.nombre,url:t.url}).then(()=>{this.currentStatus=1,this.newProductForm.setValue({nombre:"",url:"",id:""}),console.log("Documento editado exitosamente")},a=>{console.log(a)})}editProduct(t){let r=this.firestoreService.getProduct(t).subscribe(i=>{this.currentStatus=2,this.documentId=t,this.newProductForm.setValue({id:t,nombre:i.payload.data().nombre,url:i.payload.data().url}),r.unsubscribe()})}deleteProduct(t){this.firestoreService.deleteProduct(t).then(()=>{console.log("Documento eliminado!")},r=>{console.error(r)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(IU))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products"]],decls:22,vars:4,consts:[[1,"container"],[1,"row"],["id","caja1",1,"col-4"],[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],["for","nombre"],["type","text","formControlName","nombre",1,"form-control"],["for","url_img",2,"margin-top","20px"],["type","url","formControlName","url",1,"form-control"],["id","cajaAddBtn"],["type","submit","id","addBtn",1,"btn","btn-outline-danger",3,"disabled","value"],["id","btnMenu"],["type","button","routerLink","/menu",1,"btn","btn-info"],["id","caja2",1,"col-8"],[2,"font-size","20px"],["id","infoP",4,"ngFor","ngForOf"],["id","infoP"],[1,"figure"],["height","200px","width","200px",3,"src"],["id","infoBtn"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),f._uU(4,"Productos"),f.qZA(),f.TgZ(5,"form",3),f.NdJ("ngSubmit",function(){return r.newProduct(r.newProductForm.value)}),f._UZ(6,"input",4),f.TgZ(7,"label",5),f._uU(8,"Nombre"),f.qZA(),f._UZ(9,"input",6),f.TgZ(10,"label",7),f._uU(11,"Url de la imagen"),f.qZA(),f._UZ(12,"input",8),f.TgZ(13,"div",9),f._UZ(14,"input",10),f.qZA(),f.TgZ(15,"div",11)(16,"button",12),f._uU(17,"Regresar al men\xfa principal"),f.qZA()()()(),f.TgZ(18,"div",13)(19,"h1",14),f._uU(20,"Productos disponibles"),f.qZA(),f.YNc(21,bU,11,2,"div",15),f.qZA()()()),2&t&&(f.xp6(5),f.Q6J("formGroup",r.newProductForm),f.xp6(9),f.Q6J("disabled",!r.newProductForm.valid)("value",1==r.currentStatus?"Dar de alta":"Editar"),f.xp6(7),f.Q6J("ngForOf",r.products))},directives:[Kd,Xl,Wu,ji,$r,_,qi,Yn],styles:['@import"https://fonts.googleapis.com/css2?family=Suez+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Raleway&display=swap";h1[_ngcontent-%COMP%]{font-family:Suez One;text-align:center;margin:20px;color:brown}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-family:Raleway}label[_ngcontent-%COMP%]{font-weight:700}#addBtn[_ngcontent-%COMP%]{margin:20px}input[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}#cajaAddBtn[_ngcontent-%COMP%], #btnMenu[_ngcontent-%COMP%]{display:flex;justify-content:center}#caja1[_ngcontent-%COMP%]{margin-top:20px;padding:30px;background-color:#daf7a6;border-radius:8px;height:470px}#caja2[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;padding:20px}#infoP[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:10px;margin-bottom:10px}p[_ngcontent-%COMP%]{text-align:center}#infoBtn[_ngcontent-%COMP%]{align-items:center;margin-left:20px;margin-top:45px}']}),n})();var nk=O(2587);let Hb=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r,i){return this.afAuth.createUserWithEmailAndPassword(r,i).then(a=>{window.alert("Usuario creado exitosamente"),this.SetUserData(a.user),this.usuario=(0,nk.n)(),(0,nk.af)(this.usuario.currentUser,{displayName:t,photoURL:""}),this.router.navigate(["sign-in"])}).catch(a=>{window.alert(a.message)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(jx),f.LFG(r0),f.LFG(Si),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:22,vars:0,consts:[[1,"navbar","navbar-light","bg-light"],["routerLink","/menu",1,"navbar-brand"],[1,"fas","fa-sign-out-alt"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Email","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"nav",0)(1,"a",1),f._UZ(2,"i",2),f._uU(3,"Regresar al men\xfa principal"),f.qZA()(),f.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3"),f._uU(8,"Iniciar Sesi\xf3n"),f.qZA(),f.TgZ(9,"div",6),f._UZ(10,"input",7,8),f.qZA(),f.TgZ(12,"div",6),f._UZ(13,"input",9,10),f.qZA(),f.TgZ(15,"div",6)(16,"input",11),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(11),h=f.MAs(14);return r.authService.SignIn(l.value,h.value)}),f.qZA()()(),f.TgZ(17,"div",12)(18,"span"),f._uU(19,"Don't have an account?"),f.TgZ(20,"span",13),f._uU(21," Crear Usuario"),f.qZA()()()()()}},directives:[tu,qi],styles:['@import"https://fonts.googleapis.com/css2?family=Raleway&display=swap";.navbar-brand[_ngcontent-%COMP%]{margin-left:30px;font-size:15px;font-family:Raleway;font-weight:700}']}),n})(),SU=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:25,vars:0,consts:[[1,"navbar","navbar-light","bg-light"],["routerLink","/menu",1,"navbar-brand"],[1,"fas","fa-sign-out-alt"],[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Nombre de Usuario","required","",1,"formControl"],["userName",""],["type","email","placeholder","Correo Electr\xf3nico","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Contrase\xf1a","required","",1,"formControl"],["userPwd",""],["type","button","value","Crear usuario",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"nav",0)(1,"a",1),f._UZ(2,"i",2),f._uU(3,"Regresar al men\xfa principal"),f.qZA()(),f.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"h3"),f._uU(8,"Crear Usuario"),f.qZA(),f.TgZ(9,"div",6),f._UZ(10,"input",7,8),f.qZA(),f.TgZ(12,"div",6),f._UZ(13,"input",9,10),f.qZA(),f.TgZ(15,"div",6),f._UZ(16,"input",11,12),f.qZA(),f.TgZ(18,"div",6)(19,"input",13),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(11),h=f.MAs(14),m=f.MAs(17);return r.authService.SignUp(l.value,h.value,m.value)}),f.qZA()()(),f.TgZ(20,"div",14)(21,"span"),f._uU(22,"Already have an account? "),f.TgZ(23,"span",15),f._uU(24,"Iniciar Sesi\xf3n"),f.qZA()()()()()}},directives:[tu,qi],styles:['@import"https://fonts.googleapis.com/css2?family=Raleway&display=swap";.navbar-brand[_ngcontent-%COMP%]{margin-left:30px;font-size:15px;font-family:Raleway;font-weight:700}']}),n})();function AU(n,e){if(1&n&&(f.TgZ(0,"div",1)(1,"div",13)(2,"div",14),f._UZ(3,"img",15),f.TgZ(4,"div",16)(5,"h1")(6,"strong"),f._uU(7),f.qZA()(),f.TgZ(8,"p"),f._uU(9,"Email: "),f.TgZ(10,"strong"),f._uU(11),f.qZA()(),f.TgZ(12,"p"),f._uU(13,"User ID: "),f.TgZ(14,"strong"),f._uU(15),f.qZA()()()()()()),2&n){const t=e.ngIf;f.xp6(3),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.xp6(4),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.uid)}}const xU=[{path:"",redirectTo:"/menu",pathMatch:"full"},{path:"menu",component:Xy},{path:"phone-login",component:pV},{path:"sign-in",component:TU},{path:"register-user",component:SU},{path:"dashboard",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-dashboard"]],decls:15,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],["alt","","height","150px",1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),f.NdJ("click",function(){return r.authService.SignOut()}),f._UZ(7,"i",7),f._uU(8,"Log out "),f.qZA()()()()(),f.TgZ(9,"main",8)(10,"div",9)(11,"div",10)(12,"h1",11),f._uU(13,"Perfil del usuario"),f.qZA()(),f.YNc(14,AU,16,4,"div",12),f.qZA()()()()),2&t&&(f.xp6(14),f.Q6J("ngIf",r.authService.userData))},directives:[Mr],styles:[""]}),n})()},{path:"products",component:DU}];let RU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[bm.forRoot(xU)],bm]}),n})(),MU=(()=>{class n{constructor(){this.title="angularFirebase"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[op],styles:[""]}),n})();const rk="firebasestorage.googleapis.com",ik="storageBucket";class Ar extends k.ZR{constructor(e,t){super(Hx(e),`Firebase Storage: ${t} (${Hx(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ar.prototype)}_codeEquals(e){return Hx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Hx(n){return"storage/"+n}function $x(){return new Ar("unknown","An unknown error occurred, please check the error payload for server response.")}function sk(){return new Ar("canceled","User canceled the upload/download.")}function ok(){return new Ar("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function k_(n){return new Ar("invalid-argument",n)}function ak(){return new Ar("app-deleted","The Firebase app was deleted.")}function uk(n){return new Ar("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function s0(n,e){return new Ar("invalid-format","String does not match format '"+n+"': "+e)}function o0(n){throw new Ar("internal-error","Internal error: "+n)}class Cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Cs.makeFromUrl(e,t)}catch(i){return new Cs(e,"")}if(""===r.path)return r;throw function HU(n){return new Ar("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(dt){dt.path_=decodeURIComponent(dt.path)}const S=t.replace(/[.]/g,"\\."),pt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===rk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let dt=0;dt<pt.length;dt++){const Ot=pt[dt],un=Ot.regex.exec(e);if(un){let Du=un[Ot.indices.path];Du||(Du=""),r=new Cs(un[Ot.indices.bucket],Du),Ot.postModify(r);break}}if(null==r)throw function jU(n){return new Ar("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class qU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $b(n){return"string"==typeof n||n instanceof String}function lk(n){return Gx()&&n instanceof Blob}function Gx(){return"undefined"!=typeof Blob}function Wx(n,e,t,r){if(r<e)throw k_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw k_(`Invalid value for '${n}'. Expected ${t} or less.`)}function od(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ck(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var df=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(df||(df={})),df))();class JU{constructor(e,t,r,i,a,l,h,m,v,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,U)=>{this.resolve_=P,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function ZU(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=$x();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?ak():sk():function BU(){return new Ar("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Gb(!1,null,!0)):this.backoffId_=function zU(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let v=!1;function D(...Le){v||(v=!0,e.apply(null,Le))}function S(Le){i=setTimeout(()=>{i=null,n(U,m())},Le)}function P(){a&&clearTimeout(a)}function U(Le,...Et){if(v)return void P();if(Le)return P(),void D.call(null,Le,...Et);if(m()||l)return P(),void D.call(null,Le,...Et);let pt;r<64&&(r*=2),1===h?(h=2,pt=0):pt=1e3*(r+Math.random()),S(pt)}let K=!1;function we(Le){K||(K=!0,P(),!v&&(null!==i?(Le||(h=2),clearTimeout(i),S(0)):Le||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,we(!0)},t),we}((r,i)=>{if(i)return void r(!1,new Gb(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===df.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const D=a.getErrorCode()===df.ABORT;return void r(!1,new Gb(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new Gb(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function KU(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Gb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function sB(...n){const e=function iB(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Gx())return new Blob(n);throw new Ar("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Wo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qx{constructor(e,t){this.data=e,this.contentType=t||null}}function zx(n,e){switch(n){case Wo.RAW:return new qx(dk(e));case Wo.BASE64:case Wo.BASE64URL:return new qx(hk(n,e));case Wo.DATA_URL:return new qx(function lB(n){const e=new fk(n);return e.base64?hk(Wo.BASE64,e.rest):function uB(n){let e;try{e=decodeURIComponent(n)}catch(t){throw s0(Wo.DATA_URL,"Malformed data URL.")}return dk(e)}(e.rest)}(e),function cB(n){return new fk(n).contentType}(e))}throw $x()}function dk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function hk(n,e){switch(n){case Wo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw s0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw s0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function aB(n){return atob(n)}(e)}catch(i){throw s0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class fk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw s0(Wo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function dB(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Al{constructor(e,t){let r=0,i="";lk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(lk(this.data_)){const i=function oB(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Al(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Al(r,!0)}}static getBlob(...e){if(Gx()){const t=e.map(r=>r instanceof Al?r.data_:r);return new Al(sB.apply(null,t))}{const t=e.map(l=>$b(l)?zx(Wo.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Al(i,!0)}}uploadData(){return this.data_}}function Kx(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function QU(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function pk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function pB(n,e){return e}class qs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||pB}}let Wb=null;function a0(){if(Wb)return Wb;const n=[];n.push(new qs("bucket")),n.push(new qs("generation")),n.push(new qs("metageneration")),n.push(new qs("name","fullPath",!0));const t=new qs("name");t.xform=function e(a,l){return function gB(n){return!$b(n)||n.length<2?n:pk(n)}(l)},n.push(t);const i=new qs("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new qs("timeCreated")),n.push(new qs("updated")),n.push(new qs("md5Hash",null,!0)),n.push(new qs("cacheControl",null,!0)),n.push(new qs("contentDisposition",null,!0)),n.push(new qs("contentEncoding",null,!0)),n.push(new qs("contentLanguage",null,!0)),n.push(new qs("contentType",null,!0)),n.push(new qs("metadata","customMetadata",!0)),Wb=n,Wb}function gk(n,e,t){const r=Kx(e);return null===r?null:function _B(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function mB(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Cs(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Zx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const mk="prefixes";class xl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rl(n){if(!n)throw $x()}function qb(n,e){return function t(r,i){const a=gk(n,i,e);return Rl(null!==a),a}}function O_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function VU(){return new Ar("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function LU(){return new Ar("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function FU(n){return new Ar("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function UU(n){return new Ar("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function u0(n){const e=O_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function OU(n){return new Ar("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function yk(n,e,t){const i=od(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new xl(i,"GET",qb(n,t),l);return h.errorHandler=u0(e),h}function IB(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=od(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new xl(h,"GET",function EB(n,e){return function t(r,i){const a=function wB(n,e,t){const r=Kx(t);return null===r?null:function vB(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[mk])for(const i of t[mk]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Cs(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Cs(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Rl(null!==a),a}}(n,e.bucket),v);return D.urlParams=a,D.errorHandler=O_(e),D}function wk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function SB(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class zb{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Yx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Rl(!1)}return Rl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const MB={STATE_CHANGED:"state_changed"},zs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Qx(n){switch(n){case"running":case"pausing":case"canceling":return zs.RUNNING;case"paused":return zs.PAUSED;case"success":return zs.SUCCESS;case"canceled":return zs.CANCELED;default:return zs.ERROR}}class NB{constructor(e,t,r){if(function YU(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function F_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class kB extends class PB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=df.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=df.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=df.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw o0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw o0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw o0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw o0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw o0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function wu(){return new kB}class bk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=a0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function AB(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=wk(e,r,i),h={name:l.fullPath},m=od(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Zx(l,t),K=new xl(m,"POST",function U(we){let Le;Yx(we);try{Le=we.getResponseHeader("X-Goog-Upload-URL")}catch(Et){Rl(!1)}return Rl($b(Le)),Le},n.maxUploadRetryTime);return K.urlParams=h,K.headers=D,K.body=S,K.errorHandler=O_(e),K}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function xB(n,e,t,r){const m=new xl(t,"POST",function a(v){const D=Yx(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){Rl(!1)}S||Rl(!1);const P=Number(S);return Rl(!isNaN(P)),new zb(P,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=O_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,wu,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new zb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function RB(n,e,t,r,i,a,l,h){const m=new zb(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function GU(){return new Ar("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const S=m.current,K={"X-Goog-Upload-Command":D===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},we=r.slice(S,S+D);if(null===we)throw ok();const pt=new xl(t,"POST",function Le(dt,Ot){const un=Yx(dt,["active","final"]),Zr=m.current+D,Du=r.size();let dM;return dM="final"===un?qb(e,a)(dt,Ot):null,new zb(Zr,Du,"final"===un,dM)},e.maxUploadRetryTime);return pt.headers=K,pt.body=we.uploadData(),pt.progressCallback=h||null,pt.errorHandler=O_(n),pt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,wu,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=yk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,wu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Ek(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let pt="";for(let dt=0;dt<2;dt++)pt+=Math.random().toString().slice(2);return pt}();l["Content-Type"]="multipart/related; boundary="+m;const v=wk(e,r,i),D=Zx(v,t),U=Al.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===U)throw ok();const K={name:v.fullPath},we=od(a,n.host,n._protocol),Et=n.maxUploadRetryTime,vt=new xl(we,"POST",qb(n,t),Et);return vt.urlParams=K,vt.headers=l,vt.body=U.uploadData(),vt.errorHandler=O_(e),vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,wu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=sk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Qx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new NB(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Qx(this._state)){case zs.SUCCESS:F_(this._resolve.bind(null,this.snapshot))();break;case zs.CANCELED:case zs.ERROR:F_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Qx(this._state)){case zs.RUNNING:case zs.PAUSED:e.next&&F_(e.next.bind(e,this.snapshot))();break;case zs.SUCCESS:e.complete&&F_(e.complete.bind(e))();break;default:e.error&&F_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class _g{constructor(e,t){this._service=e,this._location=t instanceof Cs?t:Cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _g(e,t)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pk(this._location.path)}get storage(){return this._service}get parent(){const e=function hB(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Cs(this._location.bucket,e);return new _g(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw uk(e)}}function Tk(n,e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Ce.Z)(function*(n,e,t){const i=yield Sk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Tk(n,e,i.nextPageToken))}),Jx.apply(this,arguments)}function Sk(n,e){null!=e&&"number"==typeof e.maxResults&&Wx("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=IB(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,wu)}function qB(n){n._throwIfRoot("getDownloadURL");const e=function bB(n,e,t){const i=od(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new xl(i,"GET",function CB(n,e){return function t(r,i){const a=gk(n,i,e);return Rl(null!==a),function yB(n,e,t,r){const i=Kx(e);if(null===i||!$b(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const S=n.fullPath;return od("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+ck({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=u0(e),h}(n.storage,n._location,a0());return n.storage.makeRequestWithTokens(e,wu).then(t=>{if(null===t)throw function WU(){return new Ar("no-download-url","The given file does not have any download URLs.")}();return t})}function Ak(n,e){const t=function fB(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Cs(n._location.bucket,t);return new _g(n.storage,r)}function xk(n,e){if(n instanceof Xx){const t=n;if(null==t._bucket)throw function $U(){return new Ar("no-default-bucket","No default bucket found. Did you set the '"+ik+"' property when initializing the app?")}();const r=new _g(t,t._bucket);return null!=e?xk(r,e):r}return void 0!==e?Ak(n,e):n}function YB(n,e){if(e&&function KB(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Xx)return function ZB(n,e){return new _g(n,e)}(n,e);throw k_("To use ref(service, url), the first argument must be a Storage instance.")}return xk(n,e)}function Rk(n,e){const t=null==e?void 0:e[ik];return null==t?null:Cs.makeFromBucketSpec(t,n)}class Xx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Cs.makeFromBucketSpec(i,this._host):Rk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Cs.makeFromBucketSpec(this._url,e):Rk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _g(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new qU(ak());{const a=function rB(n,e,t,r,i,a){const l=ck(n.urlParams),h=n.url+l,m=Object.assign({},n.headers);return function tB(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function XU(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function eB(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function nB(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new JU(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Mk="@firebase/storage";function kk(n,e){return YB(n=(0,k.m9)(n),e)}function a2(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Xx(t,r,i,e,zi.SDK_VERSION)}!function u2(){(0,zi._registerComponent)(new Lo.wA("storage",a2,"PUBLIC").setMultipleInstances(!0)),(0,zi.registerVersion)(Mk,"0.9.6",""),(0,zi.registerVersion)(Mk,"0.9.6","esm2017")}();class Kb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ok{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Kb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Kb(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Kb(l,this,this._ref)):{next:t.next?l=>t.next(new Kb(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Fk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ad(e,this._service))}get items(){return this._delegate.items.map(e=>new ad(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ad{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function s2(n,e){return Ak(n,e)}(this._delegate,e);return new ad(t,this.storage)}get root(){return new ad(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ad(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Ok(function JB(n,e,t){return function jB(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new bk(n,new Al(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Wo.RAW,r){this._throwIfRoot("putString");const i=zx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Ok(new bk(this._delegate,new Al(i.data,!0),a),this)}listAll(){return function n2(n){return function $B(n){const e={prefixes:[],items:[]};return Tk(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new Fk(e,this.storage))}list(e){return function t2(n,e){return Sk(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Fk(t,this.storage))}getMetadata(){return function XB(n){return function GB(n){n._throwIfRoot("getMetadata");const e=yk(n.storage,n._location,a0());return n.storage.makeRequestWithTokens(e,wu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function e2(n,e){return function WB(n,e){n._throwIfRoot("updateMetadata");const t=function DB(n,e,t,r){const a=od(e.fullServerUrl(),n.host,n._protocol),h=Zx(t,r),v=n.maxOperationRetryTime,D=new xl(a,"PATCH",qb(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=u0(e),D}(n.storage,n._location,e,a0());return n.storage.makeRequestWithTokens(t,wu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function r2(n){return qB(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function i2(n){return function zB(n){n._throwIfRoot("deleteObject");const e=function TB(n,e){const r=od(e.fullServerUrl(),n.host,n._protocol),h=new xl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=u0(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,wu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw uk(e)}}class Lk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Vk(e))throw k_("ref() expected a child path but got a URL, use refFromURL instead.");return new ad(kk(this._delegate,e),this)}refFromURL(e){if(!Vk(e))throw k_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cs.makeFromUrl(e,this._delegate.host)}catch(t){throw k_("refFromUrl() expected a valid full URL but got an invalid one.")}return new ad(kk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function o2(n,e,t,r={}){!function QB(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Vk(n){return/^[A-Za-z]+:\/\//.test(n)}function h2(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Lk(t,r)}function Uk(n){const e=function p2(n){return new Os.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function NU(n,e=dx.z){return(0,Ii.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);h()}t.subscribe((0,or.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Zb(n){return{getDownloadURL:()=>Dt(void 0).pipe(Cn.fc,Gr(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>Dt(void 0).pipe(Cn.fc,Gr(()=>n.getMetadata()),Cn.iC),delete:()=>(0,wn.D)(n.delete()),child:e=>Zb(n.child(e)),updateMetadata:e=>(0,wn.D)(n.updateMetadata(e)),put:(e,t)=>Uk(n.put(e,t)),putString:(e,t,r)=>Uk(n.putString(e,t,r)),list:e=>(0,wn.D)(n.list(e)),listAll:()=>(0,wn.D)(n.listAll())}}!function f2(n){const e={TaskState:zs,TaskEvent:MB,StringFormat:Wo,Storage:Lk,Reference:ad};n.INTERNAL.registerComponent(new Lo.wA("storage-compat",h2,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(Dm.Z);const g2=new f.OlP("angularfire2.storageBucket"),m2=new f.OlP("angularfire2.storage.maxUploadRetryTime"),_2=new f.OlP("angularfire2.storage.maxOperationRetryTime"),y2=new f.OlP("angularfire2.storage.use-emulator");let v2=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S){const P=(0,li.on)(t,l,r);this.storage=(0,li.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),K=D;return K&&U.useEmulator(...K),m&&U.setMaxUploadRetryTime(m),v&&U.setMaxOperationRetryTime(v),U},[m,v])}ref(t){return Zb(this.storage.ref(t))}refFromURL(t){return Zb(this.storage.refFromURL(t))}upload(t,r,i){return Zb(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(g2,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(m2,8),f.LFG(_2,8),f.LFG(y2,8),f.LFG(n0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),w2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),E2=(()=>{class n{constructor(){ru.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[v2],imports:[w2]}),n})();var C2=O(5032);const Bk="@firebase/database";let eR="";function Hk(n){eR=n}class D2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class T2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const $k=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new D2(e)}}catch(e){}return new T2},yg=$k("localStorage"),tR=$k("sessionStorage"),L_=new Vo.Yd("@firebase/database"),Gk=function(){let n=1;return function(){return n++}}(),Wk=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},l0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=l0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let vg=null,qk=!0;const zk=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(L_.logLevel=Vo.in.VERBOSE,vg=L_.log.bind(L_),e&&tR.set("logging_enabled",!0)):"function"==typeof n?vg=n:(vg=null,tR.remove("logging_enabled"))},Oi=function(...n){if(!0===qk&&(qk=!1,null===vg&&!0===tR.get("logging_enabled")&&zk(!0)),vg){const e=l0.apply(null,n);vg(e)}},c0=function(n){return function(...e){Oi(n,...e)}},nR=function(...n){const e="FIREBASE INTERNAL ERROR: "+l0(...n);L_.error(e)},Ml=function(...n){const e=`FIREBASE FATAL ERROR: ${l0(...n)}`;throw L_.error(e),new Error(e)},Is=function(...n){const e="FIREBASE WARNING: "+l0(...n);L_.warn(e)},Yb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ud="[MIN_NAME]",Nl="[MAX_NAME]",wg=function(n,e){if(n===e)return 0;if(n===ud||e===Nl)return-1;if(e===ud||n===Nl)return 1;{const t=Qb(n),r=Qb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},x2=function(n,e){return n===e?0:n<e?-1:1},d0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},rR=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=rR(n[e[r]]);return t+="}",t},Kk=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Fi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Zk=function(n){(0,k.hu)(!Yb(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const D=v.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(D.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},P2=new RegExp("^-?(0*)\\d{1,10}$"),Yk=-2147483648,iR=2147483647,Qb=function(n){if(P2.test(n)){const e=Number(n);if(e>=Yk&&e<=iR)return e}return null},V_=function(n){try{n()}catch(e){setTimeout(()=>{throw Is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},h0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class O2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class F2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Oi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}let f0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const tO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iO="websocket",sO="long_polling";class oR{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function oO(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===iO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==sO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function L2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Fi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class V2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const aR={},uR={};function lR(n){const e=n.toString();return aR[e]||(aR[e]=new V2),aR[e]}class B2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&V_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class hf{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=c0(e),this.stats_=lR(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),oO(t,sO,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new B2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cR((...a)=>{const[l,h,m,v,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&tO.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){hf.forceAllow_=!0}static forceDisallow(){hf.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!hf.forceAllow_&&(hf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=Kk(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class cR{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Gk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=cR.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Oi("frame writing exception"),h.stack&&Oi(h.stack),Oi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Oi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Oi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Xb=null;"undefined"!=typeof MozWebSocket?Xb=MozWebSocket:"undefined"!=typeof WebSocket&&(Xb=WebSocket);let U_=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=c0(this.connId),this.stats_=lR(r),this.connURL=n.connectionURL_(r,h,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&tO.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),oO(t,iO,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yg.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${eR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,m=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;m&&(l.proxy={origin:m})}this.mySock=new Xb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Xb&&!n.forceDisallow_}static previouslyFailed(){return yg.isInMemoryStorage||!0===yg.get("previous_websocket_failure")}markConnectionHealthy(){yg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Kk(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),fO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[hf,U_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=U_&&U_.isAvailable();let i=r&&!U_.previouslyFailed();if(t.webSocketOnly&&(r||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[U_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class wO{constructor(e,t,r,i,a,l,h,m,v,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=c0("c:"+this.id+":"),this.transportManager_=new fO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=h0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=d0("t",e),r=d0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=d0("t",e),r=d0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=d0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),h0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):h0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class EO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class CO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class eD extends CO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new eD}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class An{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function In(){return new An("")}function tn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ff(n){return n.pieces_.length-n.pieceNum_}function jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new An(n.pieces_,e)}function hR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function p0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function DO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new An(e,0)}function hr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof An)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new An(t,0)}function nn(n){return n.pieceNum_>=n.pieces_.length}function Ks(n,e){const t=tn(n),r=tn(e);if(null===t)return e;if(t===r)return Ks(jn(n),jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function uj(n,e){const t=p0(n,0),r=p0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=wg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function fR(n,e){if(ff(n)!==ff(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ba(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ff(n)>ff(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class lj{constructor(e,t){this.errorPrefix_=t,this.parts_=p0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);TO(this)}}function TO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Eg(n))}function Eg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pR extends CO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pR}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const g0=1e3;let nD,Cg=(()=>{class n extends EO{constructor(t,r,i,a,l,h,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=c0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=g0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&eD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,D=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nR("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=g0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=g0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=g0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,v=null;const D=function(){v?v.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(U){(0,k.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,K]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?Oi("getToken() completed but was canceled"):(Oi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=K&&K.token,v=new wO(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,we=>{Is(we+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),m||(t.repoInfo_.nodeAdmin&&Is(U),D())}}})()}interrupt(t){Oi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Oi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=g0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>rR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new An(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Oi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Oi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+eR.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=eD.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class tD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new an(ud,e),i=new an(ud,t);return 0!==this.compare(r,i)}minPost(){return an.MIN}}class xO extends tD{static get __EMPTY_NODE(){return nD}static set __EMPTY_NODE(e){nD=e}compare(e,t){return wg(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(Nl,nD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,nD)}toString(){return".key"}}const Pl=new xO;class rD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let mR,Eu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ho.EMPTY_NODE,this.right=null!=l?l:ho.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ho.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ho.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ho{constructor(e,t=ho.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ho(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Eu.BLACK,null,null))}remove(e){return new ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Eu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rD(this.root_,null,this.comparator_,!0,e)}}function yj(n,e){return wg(n.name,e.name)}function gR(n,e){return wg(n,e)}ho.EMPTY_NODE=new class _j{copy(e,t,r,i,a){return this}insert(e,t,r){return new Eu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const RO=function(n){return"number"==typeof n?"number:"+Zk(n):"string:"+n},MO=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===mR||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===mR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let NO,PO,kO,B_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),MO(this.priorityNode_)}static set __childrenNodeConstructor(t){NO=t}static get __childrenNodeConstructor(){return NO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nn(t)?this:".priority"===tn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=tn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===ff(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+RO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Zk(this.value_):this.value_,this.lazyHash_=Wk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class Cj extends tD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?wg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(Nl,new B_("[PRIORITY-POST]",kO))}makePost(e,t){const r=PO(e);return new an(t,new B_("[PRIORITY-POST]",r))}toString(){return".priority"}},Ij=Math.log(2);class bj{constructor(e){this.count=parseInt(Math.log(e+1)/Ij,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const iD=function(n,e,t,r){n.sort(e);const i=function(m,v){const D=v-m;let S,P;if(0===D)return null;if(1===D)return S=n[m],P=t?t(S):S,new Eu(P,S.node,Eu.BLACK,null,null);{const U=parseInt(D/2,10)+m,K=i(m,U),we=i(U+1,v);return S=n[U],P=t?t(S):S,new Eu(P,S.node,Eu.BLACK,K,we)}},h=function(m){let v=null,D=null,S=n.length;const P=function(K,we){const Le=S-K,Et=S;S-=K;const vt=i(Le+1,Et),pt=n[Le],dt=t?t(pt):pt;U(new Eu(dt,pt.node,we,null,vt))},U=function(K){v?(v.left=K,v=K):(D=K,v=K)};for(let K=0;K<m.count;++K){const we=m.nextBitIsOne(),Le=Math.pow(2,m.count-(K+1));we?P(Le,Eu.BLACK):(P(Le,Eu.BLACK),P(Le,Eu.RED))}return D}(new bj(n.length));return new ho(r||e,h)};let _R;const j_={};class ld{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(j_&&zn,"ChildrenNode.ts has not been loaded"),_R=_R||new ld({".priority":j_},{".priority":zn}),_R}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ho?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(an.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?iD(r,e.getCompare()):j_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new ld(D,v)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===j_){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(an.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&h.push(v),v=m.getNext();return h.push(e),iD(h,l.getCompare())}return j_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new an(e.name,h))),m.insert(e,e.node)}});return new ld(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===j_)return i;{const a=t.get(e.name);return a?i.remove(new an(e.name,a)):i}});return new ld(r,this.indexSet_)}}let m0,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&MO(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return m0||(m0=new n(new ho(gR),null,ld.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||m0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?m0:r}}getChild(t){const r=tn(t);return null===r?this:this.getImmediateChild(r).getChild(jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new an(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?m0:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=tn(t);if(null===i)return r;{(0,k.hu)(".priority"!==tn(t)||1===ff(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(zn,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+RO(this.getPriority().val())+":"),this.forEachChild(zn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Wk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new an(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new an(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new an(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,an.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_0?-1:0}withIndex(t){if(t===Pl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(zn),a=r.getIterator(zn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Pl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _0=new class Dj extends Wt{constructor(){super(new ho(gR),Wt.EMPTY_NODE,ld.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};function Ir(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new B_(n,Ir(e));if(n instanceof Array){let t=Wt.EMPTY_NODE;return Fi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Ir(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Ir(e))}{const t=[];let r=!1;if(Fi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Ir(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new an(l,m)))}}),0===t.length)return Wt.EMPTY_NODE;const a=iD(t,yj,l=>l.name,gR);if(r){const l=iD(t,zn.getCompare());return new Wt(a,Ir(e),new ld({".priority":l},{".priority":zn}))}return new Wt(a,Ir(e),ld.Default)}}Object.defineProperties(an,{MIN:{value:new an(ud,Wt.EMPTY_NODE)},MAX:{value:new an(Nl,_0)}}),xO.__EMPTY_NODE=Wt.EMPTY_NODE,B_.__childrenNodeConstructor=Wt,function vj(n){mR=n}(_0),function Ej(n){kO=n}(_0),function wj(n){PO=n}(Ir);class yR extends tD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!nn(e)&&".priority"!==tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?wg(e.name,t.name):a}makePost(e,t){const r=Ir(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new an(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,_0);return new an(Nl,e)}toString(){return p0(this.indexPath_,0).join("/")}}const vR=new class Sj extends tD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?wg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const r=Ir(e);return new an(t,r)}toString(){return".value"}},H_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Aj=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=H_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=H_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),LO=function(n){if(n===""+iR)return"-";const e=Qb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Nl;const a=H_.charAt(H_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},VO=function(n){if(n===""+Yk)return ud;const e=Qb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+iR:(delete t[t.length-1],t.join("")):(t[t.length-1]=H_.charAt(H_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function UO(n){return{type:"value",snapshotNode:n}}function $_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function y0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function v0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ER{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(y0(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange($_(t,r)):l.trackChildChange(v0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(zn,(i,a)=>{t.hasChild(i)||r.trackChildChange(y0(i,a))}),t.isLeafNode()||t.forEachChild(zn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(v0(i,a,l))}else r.trackChildChange($_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class w0{constructor(e){this.indexedFilter_=new ER(e.getIndex()),this.index_=e.getIndex(),this.startPost_=w0.getStartPost_(e),this.endPost_=w0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new an(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(zn,(l,h)=>{a.matches(new an(l,h))||(i=i.updateImmediateChild(l,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Rj{constructor(e){this.rangedFilter_=new w0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new an(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(P,U)=>S(U,P)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let v=0,D=!1;for(;m.hasNext();){const S=m.getNext();!D&&h(a,S)<=0&&(D=!0),D&&v<this.limit_&&h(S,l)<=0?v++:i=i.updateImmediateChild(S.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,U)=>S(U,P)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const m=new an(t,r),v=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,m);if(D&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(v0(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(y0(t,S));const we=h.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange($_(P.name,P.node)),we.updateImmediateChild(P.name,P.node)):we}}return r.isEmpty()?e:D&&l(v,m)>=0?(null!=a&&(a.trackChildChange(y0(v.name,v.node)),a.trackChildChange($_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(v.name,Wt.EMPTY_NODE)):e}}class sD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ud}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new sD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function IR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function oD(n,e){const t=n.copy();return t.index_=e,t}function BO(n){const e={};if(n.isDefault())return e;let t;return n.index_===zn?t="$priority":n.index_===vR?t="$value":n.index_===Pl?t="$key":((0,k.hu)(n.index_ instanceof yR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function jO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class aD extends EO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=c0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=aD.getListenId_(e,r),h={};this.listens_[l]=h;const m=BO(e._queryParams);this.restRequest_(a+".json",m,(v,D)=>{let S=D;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=aD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=BO(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,k.cI)(h.responseText)}catch(v){Is("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Is("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class Fj{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function uD(){return{value:null,children:new Map}}function G_(n,e,t){if(nn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=tn(e);n.children.has(r)||n.children.set(r,uD()),G_(n.children.get(r),e=jn(e),t)}}function bR(n,e){if(nn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(zn,(r,i)=>{G_(n,new An(r),i)}),bR(n,e)}}if(n.children.size>0){const t=tn(e);return e=jn(e),n.children.has(t)&&bR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function DR(n,e,t){null!==n.value?t(e,n.value):function Lj(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{DR(i,new An(e.toString()+"/"+r),t)})}class Vj{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class jj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Vj(e);const r=1e4+2e4*Math.random();h0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Fi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),h0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Da=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Da||(Da={})),Da))();function AR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class lD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Da.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new An(e));return new lD(In(),t,this.revert)}}return(0,k.hu)(tn(this.path)===e,"operationForChild called for unrelated child."),new lD(jn(this.path),this.affectedTree,this.revert)}}class E0{constructor(e,t){this.source=e,this.path=t,this.type=Da.LISTEN_COMPLETE}operationForChild(e){return nn(this.path)?new E0(this.source,In()):new E0(this.source,jn(this.path))}}class Ig{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Da.OVERWRITE}operationForChild(e){return nn(this.path)?new Ig(this.source,In(),this.snap.getImmediateChild(e)):new Ig(this.source,jn(this.path),this.snap)}}class W_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Da.MERGE}operationForChild(e){if(nn(this.path)){const t=this.children.subtree(new An(e));return t.isEmpty()?null:t.value?new Ig(this.source,In(),t.value):new W_(this.source,In(),t)}return(0,k.hu)(tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new W_(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class pf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(nn(e))return this.isFullyInitialized()&&!this.filtered_;const t=tn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Hj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function C0(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function Wj(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new an(e.childName,e.snapshotNode),i=new an(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function Gj(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(v=>{v.respondsTo(h.type)&&e.push(v.createEvent(m,n.query_))})})}function cD(n,e){return{eventCache:n,serverCache:e}}function I0(n,e,t,r){return cD(new pf(e,t,r),n.serverCache)}function $O(n,e,t,r){return cD(n.eventCache,new pf(e,t,r))}function dD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function bg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xR;class Kn{constructor(e,t=(()=>(xR||(xR=new ho(x2)),xR))()){this.value=e,this.children=t}static fromObject(e){let t=new Kn(null);return Fi(e,(r,i)=>{t=t.set(new An(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:In(),value:this.value};if(nn(e))return null;{const r=tn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(jn(e),t);return null!=a?{path:hr(new An(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(nn(e))return this;{const t=tn(e),r=this.children.get(t);return null!==r?r.subtree(jn(e)):new Kn(null)}}set(e,t){if(nn(e))return new Kn(t,this.children);{const r=tn(e),a=(this.children.get(r)||new Kn(null)).set(jn(e),t),l=this.children.insert(r,a);return new Kn(this.value,l)}}remove(e){if(nn(e))return this.children.isEmpty()?new Kn(null):new Kn(null,this.children);{const t=tn(e),r=this.children.get(t);if(r){const i=r.remove(jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Kn(null):new Kn(this.value,a)}return this}}get(e){if(nn(e))return this.value;{const t=tn(e),r=this.children.get(t);return r?r.get(jn(e)):null}}setTree(e,t){if(nn(e))return t;{const r=tn(e),a=(this.children.get(r)||new Kn(null)).setTree(jn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Kn(this.value,l)}}fold(e){return this.fold_(In(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(hr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,In(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(nn(e))return null;{const a=tn(e),l=this.children.get(a);return l?l.findOnPath_(jn(e),hr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,In(),t)}foreachOnPath_(e,t,r){if(nn(e))return this;{this.value&&r(t,this.value);const i=tn(e),a=this.children.get(i);return a?a.foreachOnPath_(jn(e),hr(t,i),r):new Kn(null)}}foreach(e){this.foreach_(In(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(hr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Cu{constructor(e){this.writeTree_=e}static empty(){return new Cu(new Kn(null))}}function b0(n,e,t){if(nn(e))return new Cu(new Kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ks(i,e);return a=a.updateChild(l,t),new Cu(n.writeTree_.set(i,a))}{const i=new Kn(t),a=n.writeTree_.setTree(e,i);return new Cu(a)}}}function RR(n,e,t){let r=n;return Fi(t,(i,a)=>{r=b0(r,hr(e,i),a)}),r}function GO(n,e){if(nn(e))return Cu.empty();{const t=n.writeTree_.setTree(e,new Kn(null));return new Cu(t)}}function MR(n,e){return null!=Dg(n,e)}function Dg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ks(t.path,e)):null}function WO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(r,i)=>{e.push(new an(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new an(r,i.value))}),e}function gf(n,e){if(nn(e))return n;{const t=Dg(n,e);return new Cu(null!=t?new Kn(t):n.writeTree_.subtree(e))}}function NR(n){return n.writeTree_.isEmpty()}function q_(n,e){return qO(In(),n.writeTree_,e)}function qO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=qO(hr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(hr(n,".priority"),r)),t}}function hD(n,e){return QO(e,n)}function Qj(n,e){if(n.snap)return ba(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ba(hr(n.path,t),e))return!0;return!1}function Xj(n){return n.visible}function zO(n,e,t){let r=Cu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)ba(t,l)?(h=Ks(t,l),r=b0(r,h,a.snap)):ba(l,t)&&(h=Ks(l,t),r=b0(r,In(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(ba(t,l))h=Ks(t,l),r=RR(r,h,a.children);else if(ba(l,t))if(h=Ks(l,t),nn(h))r=RR(r,In(),a.children);else{const m=(0,k.DV)(a.children,tn(h));if(m){const v=m.getChild(jn(h));r=b0(r,In(),v)}}}}}return r}function KO(n,e,t,r,i){if(r||i){const a=gf(n.visibleWrites,e);return!i&&NR(a)?t:i||null!=t||MR(a,In())?q_(zO(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ba(v.path,e)||ba(e,v.path))},e),t||Wt.EMPTY_NODE):null}{const a=Dg(n.visibleWrites,e);if(null!=a)return a;{const l=gf(n.visibleWrites,e);return NR(l)?t:null!=t||MR(l,In())?q_(l,t||Wt.EMPTY_NODE):null}}}function fD(n,e,t,r){return KO(n.writeTree,n.treePath,e,t,r)}function PR(n,e){return function eH(n,e,t){let r=Wt.EMPTY_NODE;const i=Dg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=gf(n.visibleWrites,e);return t.forEachChild(zn,(l,h)=>{const m=q_(gf(a,new An(l)),h);r=r.updateImmediateChild(l,m)}),WO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return WO(gf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function ZO(n,e,t,r){return function tH(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=hr(e,t);if(MR(n.visibleWrites,a))return null;{const l=gf(n.visibleWrites,a);return NR(l)?i.getChild(t):q_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function pD(n,e){return function rH(n,e){return Dg(n.visibleWrites,e)}(n.writeTree,hr(n.treePath,e))}function kR(n,e,t){return function nH(n,e,t,r){const i=hr(e,t),a=Dg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?q_(gf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function YO(n,e){return QO(hr(n.treePath,e),n.writeTree)}function QO(n,e){return{treePath:n,writeTree:e}}class aH{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,v0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,y0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,$_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,v0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const JO=new class uH{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class OR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new pf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bg(this.viewCache_),a=function oH(n,e,t,r,i,a){return function iH(n,e,t,r,i,a,l){let h;const m=gf(n.visibleWrites,e),v=Dg(m,In());if(null!=v)h=v;else{if(null==t)return[];h=q_(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),P=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=P.getNext();for(;U&&D.length<i;)0!==S(U,r)&&D.push(U),U=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function XO(n,e,t,r,i,a){const l=e.eventCache;if(null!=pD(r,t))return e;{let h,m;if(nn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=bg(e),S=PR(r,v instanceof Wt?v:Wt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=fD(r,bg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=tn(t);if(".priority"===v){(0,k.hu)(1===ff(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=ZO(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=jn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const P=ZO(r,t,l.getNode(),m);S=null!=P?l.getNode().getImmediateChild(v).updateChild(D,P):l.getNode().getImmediateChild(v)}else S=kR(r,v,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),v,S,D,i,a):l.getNode()}}return I0(e,h,l.isFullyInitialized()||nn(t),n.filter.filtersNodes())}}function gD(n,e,t,r,i,a,l,h){const m=e.serverCache;let v;const D=l?n.filter:n.filter.getIndexedFilter();if(nn(t))v=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(t,r);v=D.updateFullNode(m.getNode(),U,null)}else{const U=tn(t);if(!m.isCompleteForPath(t)&&ff(t)>1)return e;const K=jn(t),Le=m.getNode().getImmediateChild(U).updateChild(K,r);v=".priority"===U?D.updatePriority(m.getNode(),Le):D.updateChild(m.getNode(),U,Le,K,JO,null)}const S=$O(e,v,m.isFullyInitialized()||nn(t),D.filtersNodes());return XO(n,S,t,i,new OR(i,S,a),h)}function FR(n,e,t,r,i,a,l){const h=e.eventCache;let m,v;const D=new OR(i,e,a);if(nn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=I0(e,v,!0,n.filter.filtersNodes());else{const S=tn(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=I0(e,v,h.isFullyInitialized(),h.isFiltered());else{const P=jn(t),U=h.getNode().getImmediateChild(S);let K;if(nn(P))K=r;else{const we=D.getCompleteChild(S);K=null!=we?".priority"===hR(P)&&we.getChild(DO(P)).isEmpty()?we:we.updateChild(P,r):Wt.EMPTY_NODE}m=U.equals(K)?e:I0(e,n.filter.updateChild(h.getNode(),S,K,P,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function e1(n,e){return n.eventCache.isCompleteForChild(e)}function t1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function LR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=nn(t)?r:new Kn(null).setTree(t,r);const D=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const K=t1(0,e.serverCache.getNode().getImmediateChild(S),P);m=gD(n,m,new An(S),K,i,a,l,h)}}),v.children.inorderTraversal((S,P)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!U){const we=t1(0,e.serverCache.getNode().getImmediateChild(S),P);m=gD(n,m,new An(S),we,i,a,l,h)}}),m}class _H{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ER(r.getIndex()),a=function Mj(n){return n.loadsAllData()?new ER(n.getIndex()):n.hasLimit()?new Rj(n):new w0(n)}(r);this.processor_=function lH(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Wt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Wt.EMPTY_NODE,h.getNode(),null),D=new pf(m,l.isFullyInitialized(),i.filtersNodes()),S=new pf(v,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=cD(S,D),this.eventGenerator_=new Hj(this.query_)}get query(){return this.query_}}function wH(n,e){const t=bg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!nn(e)&&!t.getImmediateChild(tn(e)).isEmpty())?t.getChild(e):null}function n1(n){return 0===n.eventRegistrations_.length}function r1(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function i1(n,e,t,r){e.type===Da.MERGE&&null!==e.source.queryId&&((0,k.hu)(bg(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(dD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function dH(n,e,t,r,i){const a=new aH;let l,h;if(t.type===Da.OVERWRITE){const v=t;v.source.fromUser?l=FR(n,e,v.path,v.snap,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered()&&!nn(v.path),l=gD(n,e,v.path,v.snap,r,i,h,a))}else if(t.type===Da.MERGE){const v=t;v.source.fromUser?l=function fH(n,e,t,r,i,a,l){let h=e;return r.foreach((m,v)=>{const D=hr(t,m);e1(e,tn(D))&&(h=FR(n,h,D,v,i,a,l))}),r.foreach((m,v)=>{const D=hr(t,m);e1(e,tn(D))||(h=FR(n,h,D,v,i,a,l))}),h}(n,e,v.path,v.children,r,i,a):((0,k.hu)(v.source.fromServer,"Unknown source."),h=v.source.tagged||e.serverCache.isFiltered(),l=LR(n,e,v.path,v.children,r,i,h,a))}else if(t.type===Da.ACK_USER_WRITE){const v=t;l=v.revert?function mH(n,e,t,r,i,a){let l;if(null!=pD(r,t))return e;{const h=new OR(r,e,i),m=e.eventCache.getNode();let v;if(nn(t)||".priority"===tn(t)){let D;if(e.serverCache.isFullyInitialized())D=fD(r,bg(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Wt,"serverChildren would be complete if leaf node"),D=PR(r,S)}D=D,v=n.filter.updateFullNode(m,D,a)}else{const D=tn(t);let S=kR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),v=null!=S?n.filter.updateChild(m,D,S,jn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Wt.EMPTY_NODE,jn(t),h,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=fD(r,bg(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=pD(r,In()),I0(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function pH(n,e,t,r,i,a,l){if(null!=pD(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(nn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return gD(n,e,t,m.getNode().getChild(t),i,a,h,l);if(nn(t)){let v=new Kn(null);return m.getNode().forEachChild(Pl,(D,S)=>{v=v.set(new An(D),S)}),LR(n,e,t,v,i,a,h,l)}return e}{let v=new Kn(null);return r.foreach((D,S)=>{const P=hr(t,D);m.isCompleteForPath(P)&&(v=v.set(D,m.getNode().getChild(P)))}),LR(n,e,t,v,i,a,h,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Da.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function gH(n,e,t,r,i){const a=e.serverCache;return XO(n,$O(e,a.getNode(),a.isFullyInitialized()||nn(t),a.isFiltered()),t,r,JO,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function hH(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=dD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(UO(dD(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function cH(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,s1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function s1(n,e,t,r){return function $j(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function xj(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),C0(n,i,"child_removed",e,r,t),C0(n,i,"child_added",e,r,t),C0(n,i,"child_moved",a,r,t),C0(n,i,"child_changed",e,r,t),C0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let mD,yD;class o1{constructor(){this.views=new Map}}function VR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),i1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(i1(l,e,t,r));return a}}function a1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=fD(t,i?r:null),m=!1;h?m=!0:r instanceof Wt?(h=PR(t,r),m=!1):(h=Wt.EMPTY_NODE,m=!1);const v=cD(new pf(h,m,!1),new pf(r,i,!1));return new _H(e,v)}return l}function u1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function mf(n,e){let t=null;for(const r of n.views.values())t=t||wH(r,e);return t}function l1(n,e){return e._queryParams.loadsAllData()?_D(n):n.views.get(e._queryIdentifier)}function c1(n,e){return null!=l1(n,e)}function _f(n){return null!=_D(n)}function _D(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let RH=1;class d1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kn(null),this.pendingWriteTree_=function sH(){return{visibleWrites:Cu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UR(n,e,t,r,i){return function zj(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=b0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?z_(n,new Ig({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function yf(n,e,t=!1){const r=function Zj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Yj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Qj(h,r.path)?i=!1:ba(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function Jj(n){n.visibleWrites=zO(n.allWrites,Xj,In()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=GO(n.visibleWrites,r.path):Fi(r.children,m=>{n.visibleWrites=GO(n.visibleWrites,hr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Kn(null);return null!=r.snap?a=a.set(In(),!0):Fi(r.children,l=>{a=a.set(new An(l),!0)}),z_(n,new lD(r.path,a,t))}return[]}function D0(n,e,t){return z_(n,new Ig({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function BR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||c1(a,e))){const h=function SH(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=_f(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(r1(v,t,r)),n1(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(r1(m,t,r)),n1(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!_f(n)&&a.push(new(function bH(){return(0,k.hu)(mD,"Reference.ts has not been loaded"),mD}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function DH(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;l=h.events;const v=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,P)=>_f(P));if(v&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function VH(n){return n.fold((e,t,r)=>{if(t&&_f(t))return[_D(t)];{let i=[];return t&&(i=u1(t)),Fi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let U=0;U<P.length;++U){const K=P[U],we=K.query,Le=g1(n,K);n.listenProvider_.startListening(T0(we),wD(n,we),Le.hashFn,Le.onComplete)}}}!D&&m.length>0&&!r&&(v?n.listenProvider_.stopListening(T0(e),null):m.forEach(S=>{const P=n.queryToTagMap.get(ED(S));n.listenProvider_.stopListening(T0(S),P)})),function UH(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ED(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return l}function h1(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const U=Ks(S,r);i=i||mf(P,U),a=a||_f(P)});let h,l=n.syncPointTree_.get(r);l?(a=a||_f(l),i=i||mf(l,In())):(l=new o1,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Wt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,U)=>{const K=mf(U,In());K&&(i=i.updateImmediateChild(P,K))}));const m=c1(l,e);if(!m&&!e._queryParams.loadsAllData()){const S=ED(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=function BH(){return RH++}();n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function TH(n,e,t,r,i,a){const l=a1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function EH(n,e){n.eventRegistrations_.push(e)}(l,t),function CH(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zn,(a,l)=>{r.push($_(a,l))}),t.isFullyInitialized()&&r.push(UO(t.getNode())),s1(n,r,t.getNode(),e)}(l,t)}(l,e,t,hD(n.pendingWriteTree_,r),i,h);if(!m&&!a){const S=l1(l,e);D=D.concat(function jH(n,e,t){const r=e._path,i=wD(n,e),a=g1(n,t),l=n.listenProvider_.startListening(T0(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!_f(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((v,D,S)=>{if(!nn(v)&&D&&_f(D))return[_D(D).query];{let P=[];return D&&(P=P.concat(u1(D).map(U=>U.query))),Fi(S,(U,K)=>{P=P.concat(K)}),P}});for(let v=0;v<m.length;++v){const D=m[v];n.listenProvider_.stopListening(T0(D),wD(n,D))}}return l}(n,e,S))}return D}function vD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const v=mf(h,Ks(l,e));if(v)return v});return KO(i,e,a,t,!0)}function z_(n,e){return f1(e,n.syncPointTree_,null,hD(n.pendingWriteTree_,In()))}function f1(n,e,t,r){if(nn(n.path))return p1(n,e,t,r);{const i=e.get(In());null==t&&null!=i&&(t=mf(i,In()));let a=[];const l=tn(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const v=t?t.getImmediateChild(l):null,D=YO(r,l);a=a.concat(f1(h,m,v,D))}return i&&(a=a.concat(VR(i,n,r,t))),a}}function p1(n,e,t,r){const i=e.get(In());null==t&&null!=i&&(t=mf(i,In()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,v=YO(r,l),D=n.operationForChild(l);D&&(a=a.concat(p1(D,h,m,v)))}),i&&(a=a.concat(VR(i,n,r,t))),a}function g1(n,e){const t=e.query,r=wD(n,t);return{hashFn:()=>(function yH(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function kH(n,e,t){const r=jR(n,t);if(r){const i=HR(r),a=i.path,l=i.queryId,h=Ks(a,e);return $R(n,a,new E0(AR(l),h))}return[]}(n,t._path,r):function PH(n,e){return z_(n,new E0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function N2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return BR(n,t,null,a)}}}}function wD(n,e){const t=ED(e);return n.queryToTagMap.get(t)}function ED(n){return n._path.toString()+"$"+n._queryIdentifier}function jR(n,e){return n.tagToQueryMap.get(e)}function HR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new An(n.substr(0,e))}}function $R(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),VR(r,t,hD(n.pendingWriteTree_,e),null)}function T0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function xH(){return(0,k.hu)(yD,"Reference.ts has not been loaded"),yD}())(n._repo,n._path):n}class GR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new GR(t)}node(){return this.node_}}class WR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=hr(this.path_,e);return new WR(this.syncTree_,t)}node(){return vD(this.syncTree_,this.path_)}}const m1=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?$H(n[".sv"],e,t):"object"==typeof n[".sv"]?GH(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},$H=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},GH=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},_1=function(n,e,t,r){return zR(e,new WR(t,n),r)},qR=function(n,e,t){return zR(n,new GR(e),t)};function zR(n,e,t){const r=n.getPriority().val(),i=m1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=m1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new B_(h,Ir(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new B_(i))),l.forEachChild(zn,(h,m)=>{const v=zR(m,e.getImmediateChild(h),t);v!==m&&(a=a.updateImmediateChild(h,v))}),a}}class KR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function CD(n,e){let t=e instanceof An?e:new An(e),r=n,i=tn(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new KR(i,r,a),t=jn(t),i=tn(t)}return r}function Tg(n){return n.node.value}function ZR(n,e){n.node.value=e,YR(n)}function y1(n){return n.node.childCount>0}function ID(n,e){Fi(n.node.children,(t,r)=>{e(new KR(t,n,r))})}function v1(n,e,t,r){t&&!r&&e(n),ID(n,i=>{v1(i,e,!0,r)}),t&&r&&e(n)}function S0(n){return new An(null===n.parent?n.name:S0(n.parent)+"/"+n.name)}function YR(n){null!==n.parent&&function zH(n,e,t){const r=function WH(n){return void 0===Tg(n)&&!y1(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,YR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,YR(n))}(n.parent,n.name,n)}const KH=/[\[\].#$\/\u0000-\u001F\u007F]/,ZH=/[\[\].#$\u0000-\u001F\u007F]/,QR=10485760,bD=function(n){return"string"==typeof n&&0!==n.length&&!KH.test(n)},w1=function(n){return"string"==typeof n&&0!==n.length&&!ZH.test(n)},A0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Yb(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},kl=function(n,e,t,r){r&&void 0===e||x0((0,k.gK)(n,"value"),e,t)},x0=function(n,e,t){const r=t instanceof An?new lj(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Eg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Eg(r)+" with contents = "+e.toString());if(Yb(e))throw new Error(n+"contains "+e.toString()+" "+Eg(r));if("string"==typeof e&&e.length>QR/3&&(0,k.ug)(e)>QR)throw new Error(n+"contains a string greater than "+QR+" utf8 bytes "+Eg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Fi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!bD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Eg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function cj(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),TO(n)})(r,l),x0(n,h,r),function dj(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Eg(r)+" in addition to actual children.")}},E1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Fi(e,(l,h)=>{const m=new An(l);if(x0(i,h,hr(t,m)),".priority"===hR(m)&&!A0(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=p0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!bD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(uj);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ba(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},JR=function(n,e,t){if(!t||void 0!==e){if(Yb(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!A0(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},R0=function(n,e,t,r){if(!(r&&void 0===t||bD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},M0=function(n,e,t,r){if(!(r&&void 0===t||w1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ta=function(n,e){if(".info"===tn(e))throw new Error(n+" failed = Can't modify data under /.info/")},C1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!bD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),w1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class XH{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function DD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!fR(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function XR(n,e,t){DD(n,t),I1(n,r=>fR(r,e))}function Sa(n,e,t){DD(n,t),I1(n,r=>ba(r,e)||ba(e,r))}function I1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(e$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function e$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();vg&&Oi("event: "+t.toString()),V_(r)}}}const b1="repo_interrupt";class n${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XH,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uD(),this.transactionQueueTree_=new KR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function D1(n){const t=n.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function N0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:D1(n)})}function T1(n,e,t,r,i){n.dataUpdateCount++;const a=new An(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,k.UI)(t,v=>Ir(v));l=function FH(n,e,t,r){const i=jR(n,r);if(i){const a=HR(i),l=a.path,h=a.queryId,m=Ks(l,e),v=Kn.fromObject(t);return $R(n,l,new W_(AR(h),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Ir(t);l=function OH(n,e,t,r){const i=jR(n,r);if(null!=i){const a=HR(i),l=a.path,h=a.queryId,m=Ks(l,e);return $R(n,l,new Ig(AR(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,k.UI)(t,v=>Ir(v));l=function NH(n,e,t){const r=Kn.fromObject(t);return z_(n,new W_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Ir(t);l=D0(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=Z_(n,a)),Sa(n.eventQueue_,h,l)}function S1(n,e){eM(n,"connected",e),!1===e&&function a$(n){K_(n,"onDisconnectEvents");const e=N0(n),t=uD();DR(n.onDisconnect_,In(),(i,a)=>{const l=_1(i,a,n.serverSyncTree_,e);G_(t,i,l)});let r=[];DR(t,In(),(i,a)=>{r=r.concat(D0(n.serverSyncTree_,i,a));const l=iM(n,i);Z_(n,l)}),n.onDisconnect_=uD(),Sa(n.eventQueue_,In(),r)}(n)}function eM(n,e,t){const r=new An("/.info/"+e),i=Ir(t);n.infoData_.updateSnapshot(r,i);const a=D0(n.infoSyncTree_,r,i);Sa(n.eventQueue_,r,a)}function TD(n){return n.nextWriteId_++}function tM(n,e,t,r,i){K_(n,"set",{path:e.toString(),value:t,priority:r});const a=N0(n),l=Ir(t,r),h=vD(n.serverSyncTree_,e),m=qR(l,h,a),v=TD(n),D=UR(n.serverSyncTree_,e,m,v,!0);DD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const K="ok"===P;K||Is("set at "+e+" failed: "+P);const we=yf(n.serverSyncTree_,v,!K);Sa(n.eventQueue_,e,we),vf(0,i,P,U)});const S=iM(n,e);Z_(n,S),Sa(n.eventQueue_,S,[])}function u$(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&bR(n.onDisconnect_,e),vf(0,t,r,i)})}function A1(n,e,t,r){const i=Ir(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&G_(n.onDisconnect_,e,i),vf(0,r,a,l)})}function nM(n,e,t){let r;r=".info"===tn(e._path)?BR(n.infoSyncTree_,e,t):BR(n.serverSyncTree_,e,t),XR(n.eventQueue_,e._path,r)}function x1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(b1)}function K_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Oi(t,...e)}function vf(n,e,t,r){e&&V_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function rM(n,e,t){return vD(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function SD(n,e=n.transactionQueueTree_){if(e||AD(n,e),Tg(e)){const t=M1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function p$(n,e,t){const r=t.map(v=>v.currentWriteId),i=rM(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const D=t[v];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Ks(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,v=>{K_(n,"transaction put response",{path:m.toString(),status:v});let D=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(yf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();AD(n,CD(n.transactionQueueTree_,e)),SD(n,n.transactionQueueTree_),Sa(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)V_(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Is("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}Z_(n,e)}},l)}(n,S0(e),t)}else y1(e)&&ID(e,t=>{SD(n,t)})}function Z_(n,e){const t=R1(n,e),r=S0(t);return function g$(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],v=Ks(t,m.path);let S,D=!1;if((0,k.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(yf(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,S="maxretry",i=i.concat(yf(n.serverSyncTree_,m.currentWriteId,!0));else{const P=rM(n,m.path,l);m.currentInputSnapshot=P;const U=e[h].update(P.val());if(void 0!==U){x0("transaction failed: Data returned ",U,m.path);let K=Ir(U);"object"==typeof U&&null!=U&&(0,k.r3)(U,".priority")||(K=K.updatePriority(P.getPriority()));const Le=m.currentWriteId,Et=N0(n),vt=qR(K,P,Et);m.currentOutputSnapshotRaw=K,m.currentOutputSnapshotResolved=vt,m.currentWriteId=TD(n),l.splice(l.indexOf(Le),1),i=i.concat(UR(n.serverSyncTree_,m.path,vt,m.currentWriteId,m.applyLocally)),i=i.concat(yf(n.serverSyncTree_,Le,!0))}else D=!0,S="nodata",i=i.concat(yf(n.serverSyncTree_,m.currentWriteId,!0))}Sa(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}AD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)V_(r[h]);SD(n,n.transactionQueueTree_)}(n,M1(n,t),r),r}function R1(n,e){let t,r=n.transactionQueueTree_;for(t=tn(e);null!==t&&void 0===Tg(r);)r=CD(r,t),t=tn(e=jn(e));return r}function M1(n,e){const t=[];return N1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function N1(n,e,t){const r=Tg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ID(e,i=>{N1(n,i,t)})}function AD(n,e){const t=Tg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,ZR(e,t.length>0?t:void 0)}ID(e,r=>{AD(n,r)})}function iM(n,e){const t=S0(R1(n,e)),r=CD(n.transactionQueueTree_,e);return function qH(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{sM(n,i)}),sM(n,r),v1(r,i=>{sM(n,i)}),t}function sM(n,e){const t=Tg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(yf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ZR(e,void 0):t.length=a+1,Sa(n.eventQueue_,S0(e),i);for(let l=0;l<r.length;l++)V_(r[l])}}const oM=function(n,e){const t=y$(n),r=t.namespace;return"firebase.com"===t.domain&&Ml(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ml("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new oR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new An(t.pathString)}},y$=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(h=n.substring(0,v-1),n=n.substring(v+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function m$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const P=function _$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(v+1),10)):v=e.length;const U=e.slice(0,v);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const K=e.indexOf(".");r=e.substring(0,K).toLowerCase(),t=e.substring(K+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class P1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class k1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class O1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class F1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return u$(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ta("OnDisconnect.remove",this._path);const e=new k.BH;return A1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ta("OnDisconnect.set",this._path),kl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return A1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ta("OnDisconnect.setWithPriority",this._path),kl("OnDisconnect.setWithPriority",e,this._path,!1),JR("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function l$(n,e,t,r,i){const a=Ir(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&G_(n.onDisconnect_,e,a),vf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ta("OnDisconnect.update",this._path),E1("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function c$(n,e,t,r){if((0,k.xb)(t))return Oi("onDisconnect().update() called with empty data.  Don't do anything."),void vf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Fi(t,(l,h)=>{const m=Ir(h);G_(n.onDisconnect_,hr(e,l),m)}),vf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return nn(this._path)?null:hR(this._path)}get ref(){return new Aa(this._repo,this._path)}get _queryIdentifier(){const e=jO(this._queryParams),t=rR(e);return"{}"===t?"default":t}get _queryObject(){return jO(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof fo))return!1;const t=this._repo===e._repo,r=fR(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function aj(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function xD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function wf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ud)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Nl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===zn){if(null!=e&&!A0(e)||null!=t&&!A0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof yR||n.getIndex()===vR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function RD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Aa extends fo{constructor(e,t){super(e,t,new sD,!1)}get parent(){const e=DO(this._path);return null===e?null:new Aa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Sg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new An(e),r=Ag(this.ref,e);return new Sg(this._node.getChild(t),r,zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Sg(i,Ag(this.ref,r),zn)))}hasChild(e){const t=new An(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function L1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ag(n._root,e):n._root}function V1(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=oM(e,n._repo.repoInfo_.nodeAdmin);C1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ml("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),L1(n,t.path.toString())}function Ag(n,e){return null===tn((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),M0("child","path",t,!1)):M0("child","path",e,!1),new Aa(n._repo,hr(n._path,e));var t}function aM(n,e){n=(0,k.m9)(n),Ta("set",n._path),kl("set",e,n._path,!1);const t=new k.BH;return tM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function I$(n,e){E1("update",e,n._path,!1);const t=new k.BH;return function o$(n,e,t,r){K_(n,"update",{path:e.toString(),value:t});let i=!0;const a=N0(n),l={};if(Fi(t,(h,m)=>{i=!1,l[h]=_1(hr(e,h),Ir(m),n.serverSyncTree_,a)}),i)Oi("update() called with empty data.  Don't do anything."),vf(0,r,"ok",void 0);else{const h=TD(n),m=function MH(n,e,t,r){!function Kj(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=RR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Kn.fromObject(t);return z_(n,new W_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);DD(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,D)=>{const S="ok"===v;S||Is("update at "+e+" failed: "+v);const P=yf(n.serverSyncTree_,h,!S),U=P.length>0?Z_(n,e):e;Sa(n.eventQueue_,U,P),vf(0,r,v,D)}),Fi(t,v=>{const D=iM(n,hr(e,v));Z_(n,D)}),Sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function b$(n){return function s$(n,e){const t=function LH(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,D)=>{const S=Ks(v,t);r=r||mf(D,S)});let i=n.syncPointTree_.get(t);i?r=r||mf(i,In()):(i=new o1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new pf(r,!0,!1):null;return function vH(n){return dD(n.viewCache_)}(a1(i,e,hD(n.pendingWriteTree_,e._path),a?l.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Ir(r).withIndex(e._queryParams.getIndex()),a=D0(n.serverSyncTree_,e._path,i);return XR(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(K_(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new Sg(e,new Aa(n._repo,n._path),n._queryParams.getIndex()))}class MD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new P1("value",this,new Sg(e.snapshotNode,new Aa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new k1(this,e,t):null}matches(e){return e instanceof MD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ND{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new k1(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Ag(new Aa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new P1(e.type,this,new Sg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ND&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function P0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(D,S)=>{nM(n._repo,n,h),m(D,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new O1(t,a||void 0),h="value"===e?new MD(l):new ND(e,l);return function d$(n,e,t){let r;r=".info"===tn(e._path)?h1(n.infoSyncTree_,e,t):h1(n.serverSyncTree_,e,t),XR(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>nM(n._repo,n,h)}function uM(n,e,t,r){return P0(n,"value",e,t,r)}function U1(n,e,t,r){return P0(n,"child_added",e,t,r)}function B1(n,e,t,r){return P0(n,"child_changed",e,t,r)}function j1(n,e,t,r){return P0(n,"child_moved",e,t,r)}function H1(n,e,t,r){return P0(n,"child_removed",e,t,r)}function $1(n,e,t){let r=null;const i=t?new O1(t):null;"value"===e?r=new MD(i):e&&(r=new ND(e,i)),nM(n._repo,n,r)}class Iu{}class G1 extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("endAt",this._value,e._path,!0);const t=IR(e._queryParams,this._value,this._key);if(RD(t),wf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class T$ extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("endBefore",this._value,e._path,!1);const t=function Oj(n,e,t){let r,i;return n.index_===Pl?("string"==typeof e&&(e=VO(e)),i=IR(n,e,t)):(r=null==t?ud:VO(t),i=IR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(RD(t),wf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class W1 extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("startAt",this._value,e._path,!0);const t=CR(e._queryParams,this._value,this._key);if(RD(t),wf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class x$ extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){kl("startAfter",this._value,e._path,!1);const t=function kj(n,e,t){let r;if(n.index_===Pl)"string"==typeof e&&(e=LO(e)),r=CR(n,e,t);else{let i;i=null==t?Nl:LO(t),r=CR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(RD(t),wf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fo(e._repo,e._path,t,e._orderByCalled)}}class M$ extends Iu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function Nj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class P$ extends Iu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fo(e._repo,e._path,function Pj(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class O$ extends Iu{constructor(e){super(),this._path=e}_apply(e){xD(e,"orderByChild");const t=new An(this._path);if(nn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new yR(t),i=oD(e._queryParams,r);return wf(i),new fo(e._repo,e._path,i,!0)}}class L$ extends Iu{_apply(e){xD(e,"orderByKey");const t=oD(e._queryParams,Pl);return wf(t),new fo(e._repo,e._path,t,!0)}}class U$ extends Iu{_apply(e){xD(e,"orderByPriority");const t=oD(e._queryParams,zn);return wf(t),new fo(e._repo,e._path,t,!0)}}class j$ extends Iu{_apply(e){xD(e,"orderByValue");const t=oD(e._queryParams,vR);return wf(t),new fo(e._repo,e._path,t,!0)}}class $$ extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(kl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new G1(this._value,this._key)._apply(new W1(this._value,this._key)._apply(e))}}function bu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function IH(n){(0,k.hu)(!mD,"__referenceConstructor has already been defined"),mD=n})(Aa),function AH(n){(0,k.hu)(!yD,"__referenceConstructor has already been defined"),yD=n}(Aa);const lM={};function z1(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ml("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=oM(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${h.namespace}`,l=oM(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new f0(f0.OWNER):new F2(n.name,n.options,e);C1("Invalid Firebase Database URL",l),nn(l.path)||Ml("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function K$(n,e,t,r){let i=lM[e.name];i||(i={},lM[e.name]=i);let a=i[n.toURLString()];return a&&Ml("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new n$(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new O2(n.name,t));return new Y$(S,n)}class Y${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function r$(n,e,t){if(n.stats_=lR(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new aD(n.repoInfo_,(r,i,a,l)=>{T1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>S1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Cg(n.repoInfo_,e,(r,i,a,l)=>{T1(n,r,i,a,l)},r=>{S1(n,r)},r=>{!function i$(n,e){Fi(e,(t,r)=>{eM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function U2(n,e){const t=n.toString();return uR[t]||(uR[t]=e()),uR[t]}(n.repoInfo_,()=>new jj(n.stats_,n.server_)),n.infoData_=new Fj,n.infoSyncTree_=new d1({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=D0(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),eM(n,"connected",!1),n.serverSyncTree_=new d1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const v=l(h,m);Sa(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Aa(this._repo,In())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function z$(n,e){const t=lM[e];(!t||t[n.key]!==n)&&Ml(`Database ${e}(${n.repoInfo_}) has already been deleted.`),x1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ml("Cannot call "+e+" on a deleted database.")}}function K1(){fO.IS_TRANSPORT_INITIALIZED&&Is("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Q$(){K1(),hf.forceDisallow()}function J$(){K1(),U_.forceDisallow(),hf.forceAllow()}function nG(n,e){zk(n,e)}const iG={".sv":"timestamp"};class aG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Cg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Cg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function rG(n){Hk(zi.SDK_VERSION),(0,zi._registerComponent)(new Lo.wA("database",(e,{instanceIdentifier:t})=>z1(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,zi.registerVersion)(Bk,"0.13.0",n),(0,zi.registerVersion)(Bk,"0.13.0","esm2017")}();const dG=new Vo.Yd("@firebase/database-compat"),Z1=function(n){dG.warn("FIREBASE WARNING: "+n)};class pG{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Z1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class gG{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ef{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),M0("DataSnapshot.child","path",e,!1),new Ef(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),M0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ef(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new qo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ji{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Ji.getCancelAndContextArgs_("Query.on",r,i),h=(v,D)=>{t.call(l.context,new Ef(this.database,v),D)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return uM(this._delegate,h,m),t;case"child_added":return U1(this._delegate,h,m),t;case"child_removed":return H1(this._delegate,h,m),t;case"child_changed":return B1(this._delegate,h,m),t;case"child_moved":return j1(this._delegate,h,m),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,$1(this._delegate,e,i)}else $1(this._delegate,e)}get(){return b$(this._delegate).then(e=>new Ef(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Ji.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(v,D)=>{const S=new Ef(this.database,v);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":uM(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":U1(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":H1(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":B1(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":j1(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Ji(this.database,bu(this._delegate,function N$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new M$(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Ji(this.database,bu(this._delegate,function k$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new P$(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Ji(this.database,bu(this._delegate,function F$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return M0("orderByChild","path",n,!1),new O$(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Ji(this.database,bu(this._delegate,function V$(){return new L$}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Ji(this.database,bu(this._delegate,function B$(){return new U$}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Ji(this.database,bu(this._delegate,function H$(){return new j$}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Ji(this.database,bu(this._delegate,function A$(n=null,e){return R0("startAt","key",e,!0),new W1(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Ji(this.database,bu(this._delegate,function R$(n,e){return R0("startAfter","key",e,!0),new x$(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Ji(this.database,bu(this._delegate,function D$(n,e){return R0("endAt","key",e,!0),new G1(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Ji(this.database,bu(this._delegate,function S$(n,e){return R0("endBefore","key",e,!0),new T$(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Ji(this.database,bu(this._delegate,function G$(n,e){return R0("equalTo","key",e,!0),new $$(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ji))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new qo(this.database,new Aa(this._delegate._repo,this._delegate._path))}}class qo extends Ji{constructor(e,t){super(e,new fo(t._repo,t._path,new sD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new qo(this.database,Ag(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new qo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=aM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Z1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ta("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=I$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function C$(n,e,t){if(Ta("setWithPriority",n._path),kl("setWithPriority",e,n._path,!1),JR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return tM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function w$(n){return Ta("remove",n._path),aM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function uG(n,e,t){var r;if(n=(0,k.m9)(n),Ta("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=uM(n,()=>{});return function f$(n,e,t,r,i,a){K_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Gk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=rM(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{x0("transaction failed: Data returned ",m,l.path),l.status=0;const v=CD(n.transactionQueueTree_,e),D=Tg(v)||[];let S;D.push(l),ZR(v,D),"object"==typeof m&&null!==m&&(0,k.r3)(m,".priority")?(S=(0,k.DV)(m,".priority"),(0,k.hu)(A0(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(vD(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const P=N0(n),U=Ir(m,S),K=qR(U,h,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=K,l.currentWriteId=TD(n);const we=UR(n.serverSyncTree_,e,K,l.currentWriteId,l.applyLocally);Sa(n.eventQueue_,e,we),SD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,D)=>{let S=null;m?a.reject(m):(S=new Sg(D,new Aa(n._repo,n._path),zn),a.resolve(new aG(v,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new gG(a.committed,new Ef(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function E$(n,e){n=(0,k.m9)(n),Ta("setPriority",n._path),JR("setPriority",e,!1);const t=new k.BH;return tM(n._repo,hr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function v$(n,e){n=(0,k.m9)(n),Ta("push",n._path),kl("push",e,n._path,!0);const t=D1(n._repo),r=Aj(t),i=Ag(n,r),a=Ag(n,r);let l;return l=null!=e?aM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new qo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new qo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ta("Reference.onDisconnect",this._delegate._path),new pG(new F1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class k0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Q$,forceLongPolling:J$}}useEmulator(e,t,r={}){!function X$(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ml("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ml('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new f0(f0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new f0(l)}!function q$(n,e,t,r){n.repoInfo_=new oR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof qo){const t=V1(this._delegate,e.toString());return new qo(this,t)}{const t=L1(this._delegate,e);return new qo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=V1(this._delegate,e);return new qo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function eG(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),x1(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function tG(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function h$(n){n.persistentConnection_&&n.persistentConnection_.resume(b1)}(n._repo)}(this._delegate)}}k0.ServerValue={TIMESTAMP:function sG(){return iG}(),increment:n=>function oG(n){return{".sv":{increment:n}}}(n)};var _G=Object.freeze({__proto__:null,initStandalone:function mG({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Hk(t);const l=new Lo.zt("auth-internal",new Lo.H0("database-standalone"));return l.setComponent(new Lo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new k0(z1(n,l,void 0,e,a),n),namespace:i}}});const yG=k0.ServerValue;function Y1(n){return null==n}function Q1(n){return"function"==typeof n.set}function J1(n,e){return Q1(e)?e:n.ref(e)}function X1(n,e){if(function wG(n){return"string"==typeof n}(n))return e.stringCase();if(Q1(n))return e.firebaseCase();if(function EG(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function O0(n,e,t="on",r=dx.z){return new Os.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,mt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,CP.B)())}function eF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function bG(n,e){const{payload:t,prevKey:r,key:i}=e,a=eF(n,i),l=function IG(n,e){if(Y1(e))return 0;{const t=eF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function tF(n){return(Y1(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function nF(n,e,t){return function CG(n,e,t){return O0(n,"value","once",t).pipe(Gr(r=>{const i=[Dt(r)];return e.forEach(a=>i.push(O0(n,a,"on",t))),(0,fx.T)(...i).pipe(Zu(bG,[]))}),EP())}(n,e=tF(e),t)}function rF(n,e,t){const r=(e=tF(e)).map(i=>O0(n,i,"on",t));return(0,fx.T)(...r)}function iF(n,e){return function(r,i){return X1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function AG(n){return function(t){return t?X1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function sF(n,e){return function(){return O0(n,"value","on",e)}}!function vG(n){n.INTERNAL.registerComponent(new Lo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new k0(i,r)},"PUBLIC").setServiceProps({Reference:qo,Query:Ji,Database:k0,DataSnapshot:Ef,enableLogging:nG,INTERNAL:_G,ServerValue:yG}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(Dm.Z);const MG=new f.OlP("angularfire2.realtimeDatabaseURL"),NG=new f.OlP("angularfire2.database.use-emulator");let PG=(()=>{class n{constructor(t,r,i,a,l,h,m,v,D,S,P,U,K,we,Le){this.schedulers=h;const Et=m,vt=(0,li.on)(t,l,r);v&&Vx(vt,l,D,P,U,K,S,we),this.database=(0,li.cc)(`${vt.name}.database.${i}`,"AngularFireDatabase",vt.name,()=>{const pt=l.runOutsideAngular(()=>vt.database(i||void 0));return Et&&pt.useEmulator(...Et),pt},[Et])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>J1(this.database,t));let a=i;return r&&(a=r(i)),function xG(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:iF(r,"update"),set:iF(r,"set"),push:i=>r.push(i),remove:AG(r),snapshotChanges:i=>nF(n,i,t).pipe(Cn.iC),stateChanges:i=>rF(n,i,t).pipe(Cn.iC),auditTrail:i=>function DG(n,e,t){return function SG(n,e,t){return function TG(n,e){return O0(n,"value","on",e).pipe((0,mt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function I2(...n){const e=(0,on.jO)(n);return(0,Ii.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,la.Xf)(n[m]).subscribe((0,or.x)(r,v=>{a[m]=v,!h&&!l[m]&&(l[m]=!0,(h=l.every(zu.y))&&(l=null))},C2.Z));t.subscribe((0,or.x)(r,m=>{if(h){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,mt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function b2(n){return(0,Ii.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,or.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,mt.U)(i=>i.actions))}(n,rF(n,e).pipe(Zu((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,a)=>nF(n,i,t).pipe((0,mt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Cn.iC)}}(a,this)}object(t){return function RG(n,e){return{query:n,snapshotChanges:()=>sF(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>sF(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,mt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>J1(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(li.Dh),f.LFG(li.xv,8),f.LFG(MG,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Cn.HU),f.LFG(NG,8),f.LFG(r0,8),f.LFG(Nx,8),f.LFG(Px,8),f.LFG(kx,8),f.LFG(Ox,8),f.LFG(Fx,8),f.LFG(Lx,8),f.LFG(n0,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kG=(()=>{class n{constructor(){ru.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[PG]}),n})();const cM_firebaseConfig={apiKey:"AIzaSyD4U9LPhY567ddRSbtu_wM1yeE05NKLhLo",authDomain:"prueba-inicial-85108.firebaseapp.com",projectId:"prueba-inicial-85108",storageBucket:"prueba-inicial-85108.appspot.com",messagingSenderId:"862343000772",appId:"1:862343000772:web:8075e0480e064bf971cf91",measurementId:"G-VWBDBSTWDW"};ru.Z.initializeApp(cM_firebaseConfig);let OG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[MU]}),n.\u0275inj=f.cJS({providers:[Hb],imports:[[Ul,RU,gM,Zf,li.hO.initializeApp(cM_firebaseConfig),pU,CU,E2,kG]]}),n})();(0,f.G48)(),Td().bootstrapModule(OG).catch(n=>console.error(n))},5867:(tt,Ie,O)=>{O.d(Ie,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=O(9681);(0,f.registerVersion)("firebase","9.8.2","app")},127:(tt,Ie,O)=>{O.d(Ie,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.8.2","app-compat")},5881:(tt,Ie,O)=>{O.r(Ie);var f=O(5861),B=O(3942),N=O(2587),oe=O(2090),fe=(O(9681),O(1877),O(4859));function le(){return window}function H(){return(H=(0,f.Z)(function*(ce,Y,z){var Ae;const{BuildInfo:Qe}=le();(0,N.aq)(Y.sessionId,"AuthEvent did not contain a session ID");const lt=yield Se(Y.sessionId),xt={};return(0,N.ar)()?xt.ibi=Qe.packageName:(0,N.as)()?xt.apn=Qe.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),Qe.displayName&&(xt.appDisplayName=Qe.displayName),xt.sessionId=lt,(0,N.au)(ce,z,Y.type,void 0,null!==(Ae=Y.eventId)&&void 0!==Ae?Ae:void 0,xt)})).apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(ce){const{BuildInfo:Y}=le(),z={};(0,N.ar)()?z.iosBundleId=Y.packageName:(0,N.as)()?z.androidPackageName=Y.packageName:(0,N.at)(ce,"operation-not-supported-in-this-environment"),yield(0,N.av)(ce,z)})).apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(ce,Y,z){const{cordova:Ae}=le();let Qe=()=>{};try{yield new Promise((lt,xt)=>{let qt=null;function Vt(){var Ut;lt();const Rr=null===(Ut=Ae.plugins.browsertab)||void 0===Ut?void 0:Ut.close;"function"==typeof Rr&&Rr(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function Hn(){qt||(qt=window.setTimeout(()=>{xt((0,N.aw)(ce,"redirect-cancelled-by-user"))},2e3))}function Yr(){"visible"===(null==document?void 0:document.visibilityState)&&Hn()}Y.addPassiveListener(Vt),document.addEventListener("resume",Hn,!1),(0,N.as)()&&document.addEventListener("visibilitychange",Yr,!1),Qe=()=>{Y.removePassiveListener(Vt),document.removeEventListener("resume",Hn,!1),document.removeEventListener("visibilitychange",Yr,!1),qt&&window.clearTimeout(qt)}})}finally{Qe()}})).apply(this,arguments)}function Se(ce){return qe.apply(this,arguments)}function qe(){return(qe=(0,f.Z)(function*(ce){const Y=We(ce),z=yield crypto.subtle.digest("SHA-256",Y);return Array.from(new Uint8Array(z)).map(Qe=>Qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function We(ce){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ce);const Y=new ArrayBuffer(ce.length),z=new Uint8Array(Y);for(let Ae=0;Ae<ce.length;Ae++)z[Ae]=ce.charCodeAt(Ae);return z}class Ne extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Y=>{this.resolveInialized=Y})}addPassiveListener(Y){this.passiveListeners.add(Y)}removePassiveListener(Y){this.passiveListeners.delete(Y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Y){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(Y)),super.onEvent(Y)}initialized(){var Y=this;return(0,f.Z)(function*(){yield Y.initPromise})()}}function ne(ce){return he.apply(this,arguments)}function he(){return(he=(0,f.Z)(function*(ce){const Y=yield re()._get(se(ce));return Y&&(yield re()._remove(se(ce))),Y})).apply(this,arguments)}function Q(){const ce=[],Y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const Ae=Math.floor(Math.random()*Y.length);ce.push(Y.charAt(Ae))}return ce.join("")}function re(){return(0,N.ay)(N.b)}function se(ce){return(0,N.az)("authEvent",ce.config.apiKey,ce.name)}function Be(ce){if(!(null==ce?void 0:ce.includes("?")))return{};const[Y,...z]=ce.split("?");return(0,oe.zd)(z.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Lt(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function Sn(ce=(0,oe.z$)()){return!("file:"!==Lt()&&"ionic:"!==Lt()&&"capacitor:"!==Lt()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function ci(){try{const ce=self.localStorage,Y=N.aI();if(ce)return ce.setItem(Y,"1"),ce.removeItem(Y),!function Xi(ce=(0,oe.z$)()){return function xr(){return(0,oe.w1)()&&11===(null==document?void 0:document.documentMode)}()||function xn(ce=(0,oe.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,oe.hl)()}catch(ce){return Vi()&&(0,oe.hl)()}return!1}function Vi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fn(){return(function Zt(){return"http:"===Lt()||"https:"===Lt()}()||(0,oe.ru)()||Sn())&&!function Li(){return(0,oe.b$)()||(0,oe.UG)()}()&&ci()&&!Vi()}function es(){return Sn()&&"undefined"!=typeof document}function Br(){return(Br=(0,f.Z)(function*(){return!!es()&&new Promise(ce=>{const Y=setTimeout(()=>{ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Y),ce(!0)})})})).apply(this,arguments)}const sn={LOCAL:"local",NONE:"none",SESSION:"session"},br=N.ax,rr="persistence";function Dn(ce){return ir.apply(this,arguments)}function ir(){return(ir=(0,f.Z)(function*(ce){yield ce._initializationPromise;const Y=jt(),z=N.az(rr,ce.config.apiKey,ce.name);Y&&Y.setItem(z,ce._getPersistence())})).apply(this,arguments)}function jt(){var ce;try{return(null===(ce=function bn(){return"undefined"!=typeof window?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch(Y){return null}}const ct=N.ax;class it{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class zt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Y){var z=this;return(0,f.Z)(function*(){const Ae=Y._key();let Qe=z.eventManagers.get(Ae);return Qe||(Qe=new Ne(Y),z.eventManagers.set(Ae,Qe),z.attachCallbackListeners(Y,Qe)),Qe})()}_openPopup(Y){(0,N.at)(Y,"operation-not-supported-in-this-environment")}_openRedirect(Y,z,Ae,Qe){var lt=this;return(0,f.Z)(function*(){!function ge(ce){var Y,z,Ae,Qe,lt,xt,qt,Vt,Hn,Yr;const Ut=le();(0,N.ax)("function"==typeof(null===(Y=null==Ut?void 0:Ut.universalLinks)||void 0===Y?void 0:Y.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(void 0!==(null===(z=null==Ut?void 0:Ut.BuildInfo)||void 0===z?void 0:z.packageName),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(lt=null===(Qe=null===(Ae=null==Ut?void 0:Ut.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===lt?void 0:lt.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Vt=null===(qt=null===(xt=null==Ut?void 0:Ut.cordova)||void 0===xt?void 0:xt.plugins)||void 0===qt?void 0:qt.browsertab)||void 0===Vt?void 0:Vt.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Yr=null===(Hn=null==Ut?void 0:Ut.cordova)||void 0===Hn?void 0:Hn.InAppBrowser)||void 0===Yr?void 0:Yr.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Y);const xt=yield lt._initialize(Y);yield xt.initialized(),xt.resetRedirect(),(0,N.aD)(),yield lt._originValidation(Y);const qt=function be(ce,Y,z=null){return{type:Y,eventId:z,urlResponse:null,sessionId:Q(),postBody:null,tenantId:ce.tenantId,error:(0,N.aw)(ce,"no-auth-event")}}(Y,Ae,Qe);yield function Ke(ce,Y){return re()._set(se(ce),Y)}(Y,qt);const Vt=yield function W(ce,Y,z){return H.apply(this,arguments)}(Y,qt,z),Hn=yield function Re(ce){const{cordova:Y}=le();return new Promise(z=>{Y.plugins.browsertab.isAvailable(Ae=>{let Qe=null;Ae?Y.plugins.browsertab.openUrl(ce):Qe=Y.InAppBrowser.open(ce,(0,N.ap)()?"_blank":"_system","location=yes"),z(Qe)})})}(Vt);return function Ve(ce,Y,z){return Ge.apply(this,arguments)}(Y,xt,Hn)})()}_isIframeWebStorageSupported(Y,z){throw new Error("Method not implemented.")}_originValidation(Y){const z=Y._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function ie(ce){return ze.apply(this,arguments)}(Y)),this.originValidationPromises[z]}attachCallbackListeners(Y,z){const{universalLinks:Ae,handleOpenURL:Qe,BuildInfo:lt}=le(),xt=setTimeout((0,f.Z)(function*(){yield ne(Y),z.onEvent(Ye())}),500),qt=function(){var Yr=(0,f.Z)(function*(Ut){clearTimeout(xt);const Rr=yield ne(Y);let ns=null;Rr&&(null==Ut?void 0:Ut.url)&&(ns=function De(ce,Y){var z,Ae;const Qe=function de(ce){const Y=Be(ce),z=Y.link?decodeURIComponent(Y.link):void 0,Ae=Be(z).link,Qe=Y.deep_link_id?decodeURIComponent(Y.deep_link_id):void 0;return Be(Qe).link||Qe||Ae||z||ce}(Y);if(Qe.includes("/__/auth/callback")){const lt=Be(Qe),xt=lt.firebaseError?function ve(ce){try{return JSON.parse(ce)}catch(Y){return null}}(decodeURIComponent(lt.firebaseError)):null,qt=null===(Ae=null===(z=null==xt?void 0:xt.code)||void 0===z?void 0:z.split("auth/"))||void 0===Ae?void 0:Ae[1],Vt=qt?(0,N.aw)(qt):null;return Vt?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:Vt,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:Qe,postBody:null}}return null}(Rr,Ut.url)),z.onEvent(ns||Ye())});return function(Rr){return Yr.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,qt);const Vt=Qe,Hn=`${lt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var Yr=(0,f.Z)(function*(Ut){if(Ut.toLowerCase().startsWith(Hn)&&qt({url:Ut}),"function"==typeof Vt)try{Vt(Ut)}catch(Rr){console.error(Rr)}});return function(Ut){return Yr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(Y){var z=this;return(0,f.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(Y)})()}_openPopup(Y,z,Ae,Qe){var lt=this;return(0,f.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openPopup(Y,z,Ae,Qe)})()}_openRedirect(Y,z,Ae,Qe){var lt=this;return(0,f.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openRedirect(Y,z,Ae,Qe)})()}_isIframeWebStorageSupported(Y,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Y,z)}_originValidation(Y){return this.assertedUnderlyingResolver._originValidation(Y)}get _shouldInitProactively(){return es()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Y=this;return(0,f.Z)(function*(){if(Y.underlyingResolver)return;const z=yield function gt(){return Br.apply(this,arguments)}();Y.underlyingResolver=z?Y.cordovaResolver:Y.browserResolver})()}}function di(ce){return ce.unwrap()}function Ht(ce){return Ln(ce)}function Ln(ce){const{_tokenResponse:Y}=ce instanceof oe.ZR?ce.customData:ce;if(!Y)return null;if(!(ce instanceof oe.ZR)&&"temporaryProof"in Y&&"phoneNumber"in Y)return N.P.credentialFromResult(ce);const z=Y.providerId;if(!z||z===N.o.PASSWORD)return null;let Ae;switch(z){case N.o.GOOGLE:Ae=N.Q;break;case N.o.FACEBOOK:Ae=N.N;break;case N.o.GITHUB:Ae=N.T;break;case N.o.TWITTER:Ae=N.W;break;default:const{oauthIdToken:Qe,oauthAccessToken:lt,oauthTokenSecret:xt,pendingToken:qt,nonce:Vt}=Y;return lt||xt||Qe||qt?qt?z.startsWith("saml.")?N.aL._create(z,qt):N.J._fromParams({providerId:z,signInMethod:z,pendingToken:qt,idToken:Qe,accessToken:lt}):new N.U(z).credential({idToken:Qe,accessToken:lt,rawNonce:Vt}):null}return ce instanceof oe.ZR?Ae.credentialFromError(ce):Ae.credentialFromResult(ce)}function pn(ce,Y){return Y.catch(z=>{throw z instanceof oe.ZR&&function ts(ce,Y){var z;const Ae=null===(z=Y.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===Y.code)Y.resolver=new Z(ce,N.an(ce,Y));else if(Ae){const Qe=Ln(Y),lt=Y;Qe&&(lt.credential=Qe,lt.tenantId=Ae.tenantId||void 0,lt.email=Ae.email||void 0,lt.phoneNumber=Ae.phoneNumber||void 0)}}(ce,z),z}).then(z=>{const Qe=z.user;return{operationType:z.operationType,credential:Ht(z),additionalUserInfo:N.al(z),user:Ee.getOrCreate(Qe)}})}function j(ce,Y){return q.apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(ce,Y){const z=yield Y;return{verificationId:z.verificationId,confirm:Ae=>pn(ce,z.confirm(Ae))}})).apply(this,arguments)}class Z{constructor(Y,z){this.resolver=z,this.auth=function hi(ce){return ce.wrapped()}(Y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Y){return pn(di(this.auth),this.resolver.resolveSignIn(Y))}}class Ee{constructor(Y){this._delegate=Y,this.multiFactor=N.ao(Y)}static getOrCreate(Y){return Ee.USER_MAP.has(Y)||Ee.USER_MAP.set(Y,new Ee(Y)),Ee.USER_MAP.get(Y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Y){return this._delegate.getIdTokenResult(Y)}getIdToken(Y){return this._delegate.getIdToken(Y)}linkAndRetrieveDataWithCredential(Y){return this.linkWithCredential(Y)}linkWithCredential(Y){var z=this;return(0,f.Z)(function*(){return pn(z.auth,N.Z(z._delegate,Y))})()}linkWithPhoneNumber(Y,z){var Ae=this;return(0,f.Z)(function*(){return j(Ae.auth,N.l(Ae._delegate,Y,z))})()}linkWithPopup(Y){var z=this;return(0,f.Z)(function*(){return pn(z.auth,N.d(z._delegate,Y,it))})()}linkWithRedirect(Y){var z=this;return(0,f.Z)(function*(){return yield Dn(N.aE(z.auth)),N.g(z._delegate,Y,it)})()}reauthenticateAndRetrieveDataWithCredential(Y){return this.reauthenticateWithCredential(Y)}reauthenticateWithCredential(Y){var z=this;return(0,f.Z)(function*(){return pn(z.auth,N._(z._delegate,Y))})()}reauthenticateWithPhoneNumber(Y,z){return j(this.auth,N.r(this._delegate,Y,z))}reauthenticateWithPopup(Y){return pn(this.auth,N.e(this._delegate,Y,it))}reauthenticateWithRedirect(Y){var z=this;return(0,f.Z)(function*(){return yield Dn(N.aE(z.auth)),N.h(z._delegate,Y,it)})()}sendEmailVerification(Y){return N.ab(this._delegate,Y)}unlink(Y){var z=this;return(0,f.Z)(function*(){return yield N.ak(z._delegate,Y),z})()}updateEmail(Y){return N.ag(this._delegate,Y)}updatePassword(Y){return N.ah(this._delegate,Y)}updatePhoneNumber(Y){return N.u(this._delegate,Y)}updateProfile(Y){return N.af(this._delegate,Y)}verifyBeforeUpdateEmail(Y,z){return N.ac(this._delegate,Y,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ee.USER_MAP=new WeakMap;const $=N.ax;let J=(()=>{class ce{constructor(z,Ae){if(this.app=z,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Qe}=z.options;$(Qe,"invalid-api-key",{appName:z.name}),$(Qe,"invalid-api-key",{appName:z.name});const lt="undefined"!=typeof window?it:void 0;this._delegate=Ae.initialize({options:{persistence:Xe(Qe,z.name),popupRedirectResolver:lt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ee.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,Ae){N.G(this._delegate,z,Ae)}applyActionCode(z){return N.a2(this._delegate,z)}checkActionCode(z){return N.a3(this._delegate,z)}confirmPasswordReset(z,Ae){return N.a1(this._delegate,z,Ae)}createUserWithEmailAndPassword(z,Ae){var Qe=this;return(0,f.Z)(function*(){return pn(Qe._delegate,N.a5(Qe._delegate,z,Ae))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return N.aa(this._delegate,z)}isSignInWithEmailLink(z){return N.a8(this._delegate,z)}getRedirectResult(){var z=this;return(0,f.Z)(function*(){$(Fn(),z._delegate,"operation-not-supported-in-this-environment");const Ae=yield N.j(z._delegate,it);return Ae?pn(z._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function hn(ce,Y){(0,N.aE)(ce)._logFramework(Y)}(this._delegate,z)}onAuthStateChanged(z,Ae,Qe){const{next:lt,error:xt,complete:qt}=ke(z,Ae,Qe);return this._delegate.onAuthStateChanged(lt,xt,qt)}onIdTokenChanged(z,Ae,Qe){const{next:lt,error:xt,complete:qt}=ke(z,Ae,Qe);return this._delegate.onIdTokenChanged(lt,xt,qt)}sendSignInLinkToEmail(z,Ae){return N.a7(this._delegate,z,Ae)}sendPasswordResetEmail(z,Ae){return N.a0(this._delegate,z,Ae||void 0)}setPersistence(z){var Ae=this;return(0,f.Z)(function*(){let Qe;switch(function jr(ce,Y){br(Object.values(sn).includes(Y),ce,"invalid-persistence-type"),(0,oe.b$)()?br(Y!==sn.SESSION,ce,"unsupported-persistence-type"):(0,oe.UG)()?br(Y===sn.NONE,ce,"unsupported-persistence-type"):Vi()?br(Y===sn.NONE||Y===sn.LOCAL&&(0,oe.hl)(),ce,"unsupported-persistence-type"):br(Y===sn.NONE||ci(),ce,"unsupported-persistence-type")}(Ae._delegate,z),z){case sn.SESSION:Qe=N.a;break;case sn.LOCAL:Qe=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case sn.NONE:Qe=N.L;break;default:return N.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(Qe)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return pn(this._delegate,N.X(this._delegate))}signInWithCredential(z){return pn(this._delegate,N.Y(this._delegate,z))}signInWithCustomToken(z){return pn(this._delegate,N.$(this._delegate,z))}signInWithEmailAndPassword(z,Ae){return pn(this._delegate,N.a6(this._delegate,z,Ae))}signInWithEmailLink(z,Ae){return pn(this._delegate,N.a9(this._delegate,z,Ae))}signInWithPhoneNumber(z,Ae){return j(this._delegate,N.s(this._delegate,z,Ae))}signInWithPopup(z){var Ae=this;return(0,f.Z)(function*(){return $(Fn(),Ae._delegate,"operation-not-supported-in-this-environment"),pn(Ae._delegate,N.c(Ae._delegate,z,it))})()}signInWithRedirect(z){var Ae=this;return(0,f.Z)(function*(){return $(Fn(),Ae._delegate,"operation-not-supported-in-this-environment"),yield Dn(Ae._delegate),N.f(Ae._delegate,z,it)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return N.a4(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=sn,ce})();function ke(ce,Y,z){let Ae=ce;"function"!=typeof ce&&({next:Ae,error:Y,complete:z}=ce);const Qe=Ae;return{next:xt=>Qe(xt&&Ee.getOrCreate(xt)),error:Y,complete:z}}function Xe(ce,Y){const z=function bs(ce,Y){const z=jt();if(!z)return[];const Ae=N.az(rr,ce,Y);switch(z.getItem(Ae)){case sn.NONE:return[N.L];case sn.LOCAL:return[N.i,N.a];case sn.SESSION:return[N.a];default:return[]}}(ce,Y);if("undefined"!=typeof self&&!z.includes(N.i)&&z.push(N.i),"undefined"!=typeof window)for(const Ae of[N.b,N.a])z.includes(Ae)||z.push(Ae);return z.includes(N.L)||z.push(N.L),z}class ft{constructor(){this.providerId="phone",this._delegate=new N.P(di(B.Z.auth()))}static credential(Y,z){return N.P.credential(Y,z)}verifyPhoneNumber(Y,z){return this._delegate.verifyPhoneNumber(Y,z)}unwrap(){return this._delegate}}ft.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,ft.PROVIDER_ID=N.P.PROVIDER_ID;const Rt=N.ax;class ln{constructor(Y,z,Ae=B.Z.app()){var Qe;Rt(null===(Qe=Ae.options)||void 0===Qe?void 0:Qe.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new N.R(Y,z,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Zn(ce){ce.INTERNAL.registerComponent(new fe.wA("auth-compat",Y=>{const z=Y.getProvider("app-compat").getImmediate(),Ae=Y.getProvider("auth");return new J(z,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:ft,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:ln,TwitterAuthProvider:N.W,Auth:J,AuthCredential:N.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.2.15")}(B.Z)},8306:(tt,Ie,O)=>{O.d(Ie,{y:()=>W});var f=O(930),B=O(727),N=O(8822),oe=O(4671);var fe=O(2416),le=O(576),ye=O(2806);let W=(()=>{class Re{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ge=new Re;return ge.source=this,ge.operator=Ge,ge}subscribe(Ge,ge,Se){const qe=function ze(Re){return Re&&Re instanceof f.Lv||function ie(Re){return Re&&(0,le.m)(Re.next)&&(0,le.m)(Re.error)&&(0,le.m)(Re.complete)}(Re)&&(0,B.Nn)(Re)}(Ge)?Ge:new f.Hp(Ge,ge,Se);return(0,ye.x)(()=>{const{operator:We,source:Me}=this;qe.add(We?We.call(qe,Me):Me?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ge){Ge.error(ge)}}forEach(Ge,ge){return new(ge=H(ge))((Se,qe)=>{const We=new f.Hp({next:Me=>{try{Ge(Me)}catch(Ne){qe(Ne),We.unsubscribe()}},error:qe,complete:Se});this.subscribe(We)})}_subscribe(Ge){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ge)}[N.L](){return this}pipe(...Ge){return function _e(Re){return 0===Re.length?oe.y:1===Re.length?Re[0]:function(Ge){return Re.reduce((ge,Se)=>Se(ge),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=H(Ge))((ge,Se)=>{let qe;this.subscribe(We=>qe=We,We=>Se(We),()=>ge(qe))})}}return Re.create=Ve=>new Re(Ve),Re})();function H(Re){var Ve;return null!==(Ve=null!=Re?Re:fe.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(tt,Ie,O)=>{O.d(Ie,{x:()=>fe});var f=O(8306),B=O(727);const oe=(0,O(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=O(8737),_e=O(2806);let fe=(()=>{class ye extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ie=new le(this,this);return ie.operator=H,ie}_throwIfClosed(){if(this.closed)throw new oe}next(H){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(H)}})}error(H){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ie}=this;for(;ie.length;)ie.shift().error(H)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ie,isStopped:ze,observers:Re}=this;return ie||ze?B.Lc:(this.currentObservers=null,Re.push(H),new B.w0(()=>{this.currentObservers=null,(0,ae.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:ie,thrownError:ze,isStopped:Re}=this;ie?H.error(ze):Re&&H.complete()}asObservable(){const H=new f.y;return H.source=this,H}}return ye.create=(W,H)=>new le(W,H),ye})();class le extends fe{constructor(W,H){super(),this.destination=W,this.source=H}next(W){var H,ie;null===(ie=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ie||ie.call(H,W)}error(W){var H,ie;null===(ie=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ie||ie.call(H,W)}complete(){var W,H;null===(H=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===H||H.call(W)}_subscribe(W){var H,ie;return null!==(ie=null===(H=this.source)||void 0===H?void 0:H.subscribe(W))&&void 0!==ie?ie:B.Lc}}},930:(tt,Ie,O)=>{O.d(Ie,{Hp:()=>Ge,Lv:()=>ie});var f=O(576),B=O(727),N=O(2416),oe=O(7849),ae=O(5032);const _e=ye("C",void 0,void 0);function ye(Me,Ne,be){return{kind:Me,value:Ne,error:be}}var W=O(3410),H=O(2806);class ie extends B.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,B.Nn)(Ne)&&Ne.add(this)):this.destination=We}static create(Ne,be,Ke){return new Ge(Ne,be,Ke)}next(Ne){this.isStopped?qe(function le(Me){return ye("N",Me,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?qe(function fe(Me){return ye("E",void 0,Me)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?qe(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Re(Me,Ne){return ze.call(Me,Ne)}class Ve{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:be}=this;if(be.next)try{be.next(Ne)}catch(Ke){ge(Ke)}}error(Ne){const{partialObserver:be}=this;if(be.error)try{be.error(Ne)}catch(Ke){ge(Ke)}else ge(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(be){ge(be)}}}class Ge extends ie{constructor(Ne,be,Ke){let ne;if(super(),(0,f.m)(Ne)||!Ne)ne={next:null!=Ne?Ne:void 0,error:null!=be?be:void 0,complete:null!=Ke?Ke:void 0};else{let he;this&&N.v.useDeprecatedNextContext?(he=Object.create(Ne),he.unsubscribe=()=>this.unsubscribe(),ne={next:Ne.next&&Re(Ne.next,he),error:Ne.error&&Re(Ne.error,he),complete:Ne.complete&&Re(Ne.complete,he)}):ne=Ne}this.destination=new Ve(ne)}}function ge(Me){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Me):(0,oe.h)(Me)}function qe(Me,Ne){const{onStoppedNotification:be}=N.v;be&&W.z.setTimeout(()=>be(Me,Ne))}const We={closed:!0,next:ae.Z,error:function Se(Me){throw Me},complete:ae.Z}},727:(tt,Ie,O)=>{O.d(Ie,{Lc:()=>_e,w0:()=>ae,Nn:()=>fe});var f=O(576);const N=(0,O(3888).d)(ye=>function(H){ye(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ie,ze)=>`${ze+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var oe=O(8737);class ae{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:ie}=this;if((0,f.m)(ie))try{ie()}catch(Re){W=Re instanceof N?Re.errors:[Re]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Re of ze)try{le(Re)}catch(Ve){W=null!=W?W:[],Ve instanceof N?W=[...W,...Ve.errors]:W.push(Ve)}}if(W)throw new N(W)}}add(W){var H;if(W&&W!==this)if(this.closed)le(W);else{if(W instanceof ae){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(W)}}_hasParent(W){const{_parentage:H}=this;return H===W||Array.isArray(H)&&H.includes(W)}_addParent(W){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(W),H):H?[H,W]:W}_removeParent(W){const{_parentage:H}=this;H===W?this._parentage=null:Array.isArray(H)&&(0,oe.P)(H,W)}remove(W){const{_finalizers:H}=this;H&&(0,oe.P)(H,W),W instanceof ae&&W._removeParent(this)}}ae.EMPTY=(()=>{const ye=new ae;return ye.closed=!0,ye})();const _e=ae.EMPTY;function fe(ye){return ye instanceof ae||ye&&"closed"in ye&&(0,f.m)(ye.remove)&&(0,f.m)(ye.add)&&(0,f.m)(ye.unsubscribe)}function le(ye){(0,f.m)(ye)?ye():ye.unsubscribe()}},2416:(tt,Ie,O)=>{O.d(Ie,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tt,Ie,O)=>{O.d(Ie,{E:()=>B});const B=new(O(8306).y)(ae=>ae.complete())},8996:(tt,Ie,O)=>{O.d(Ie,{D:()=>Ne});var f=O(8421),B=O(5363),N=O(9468),_e=O(8306),le=O(2202),ye=O(576),W=O(9672);function ie(be,Ke){if(!be)throw new Error("Iterable cannot be null");return new _e.y(ne=>{(0,W.f)(ne,Ke,()=>{const he=be[Symbol.asyncIterator]();(0,W.f)(ne,Ke,()=>{he.next().then(De=>{De.done?ne.complete():ne.next(De.value)})},0,!0)})})}var ze=O(3670),Re=O(8239),Ve=O(1144),Ge=O(6495),ge=O(2206),Se=O(4532),qe=O(3260);function Ne(be,Ke){return Ke?function Me(be,Ke){if(null!=be){if((0,ze.c)(be))return function oe(be,Ke){return(0,f.Xf)(be).pipe((0,N.R)(Ke),(0,B.Q)(Ke))}(be,Ke);if((0,Ve.z)(be))return function fe(be,Ke){return new _e.y(ne=>{let he=0;return Ke.schedule(function(){he===be.length?ne.complete():(ne.next(be[he++]),ne.closed||this.schedule())})})}(be,Ke);if((0,Re.t)(be))return function ae(be,Ke){return(0,f.Xf)(be).pipe((0,N.R)(Ke),(0,B.Q)(Ke))}(be,Ke);if((0,ge.D)(be))return ie(be,Ke);if((0,Ge.T)(be))return function H(be,Ke){return new _e.y(ne=>{let he;return(0,W.f)(ne,Ke,()=>{he=be[le.h](),(0,W.f)(ne,Ke,()=>{let De,Q;try{({value:De,done:Q}=he.next())}catch(re){return void ne.error(re)}Q?ne.complete():ne.next(De)},0,!0)}),()=>(0,ye.m)(null==he?void 0:he.return)&&he.return()})}(be,Ke);if((0,qe.L)(be))return function We(be,Ke){return ie((0,qe.Q)(be),Ke)}(be,Ke)}throw(0,Se.z)(be)}(be,Ke):(0,f.Xf)(be)}},8421:(tt,Ie,O)=>{O.d(Ie,{Xf:()=>ze});var f=O(655),B=O(1144),N=O(8239),oe=O(8306),ae=O(3670),_e=O(2206),fe=O(4532),le=O(6495),ye=O(3260),W=O(576),H=O(7849),ie=O(8822);function ze(Me){if(Me instanceof oe.y)return Me;if(null!=Me){if((0,ae.c)(Me))return function Re(Me){return new oe.y(Ne=>{const be=Me[ie.L]();if((0,W.m)(be.subscribe))return be.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,B.z)(Me))return function Ve(Me){return new oe.y(Ne=>{for(let be=0;be<Me.length&&!Ne.closed;be++)Ne.next(Me[be]);Ne.complete()})}(Me);if((0,N.t)(Me))return function Ge(Me){return new oe.y(Ne=>{Me.then(be=>{Ne.closed||(Ne.next(be),Ne.complete())},be=>Ne.error(be)).then(null,H.h)})}(Me);if((0,_e.D)(Me))return Se(Me);if((0,le.T)(Me))return function ge(Me){return new oe.y(Ne=>{for(const be of Me)if(Ne.next(be),Ne.closed)return;Ne.complete()})}(Me);if((0,ye.L)(Me))return function qe(Me){return Se((0,ye.Q)(Me))}(Me)}throw(0,fe.z)(Me)}function Se(Me){return new oe.y(Ne=>{(function We(Me,Ne){var be,Ke,ne,he;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(Me);!(Ke=yield be.next()).done;)if(Ne.next(Ke.value),Ne.closed)return}catch(De){ne={error:De}}finally{try{Ke&&!Ke.done&&(he=be.return)&&(yield he.call(be))}finally{if(ne)throw ne.error}}Ne.complete()})})(Me,Ne).catch(be=>Ne.error(be))})}},6451:(tt,Ie,O)=>{O.d(Ie,{T:()=>_e});var f=O(8189),B=O(8421),N=O(515),oe=O(7669),ae=O(8996);function _e(...fe){const le=(0,oe.yG)(fe),ye=(0,oe._6)(fe,1/0),W=fe;return W.length?1===W.length?(0,B.Xf)(W[0]):(0,f.J)(ye)((0,ae.D)(W,le)):N.E}},5403:(tt,Ie,O)=>{O.d(Ie,{x:()=>B});var f=O(930);function B(oe,ae,_e,fe,le){return new N(oe,ae,_e,fe,le)}class N extends f.Lv{constructor(ae,_e,fe,le,ye,W){super(ae),this.onFinalize=ye,this.shouldUnsubscribe=W,this._next=_e?function(H){try{_e(H)}catch(ie){ae.error(ie)}}:super._next,this._error=le?function(H){try{le(H)}catch(ie){ae.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(tt,Ie,O)=>{O.d(Ie,{U:()=>N});var f=O(4482),B=O(5403);function N(oe,ae){return(0,f.e)((_e,fe)=>{let le=0;_e.subscribe((0,B.x)(fe,ye=>{fe.next(oe.call(ae,ye,le++))}))})}},8189:(tt,Ie,O)=>{O.d(Ie,{J:()=>N});var f=O(5577),B=O(4671);function N(oe=1/0){return(0,f.z)(B.y,oe)}},5577:(tt,Ie,O)=>{O.d(Ie,{z:()=>le});var f=O(4004),B=O(8421),N=O(4482),oe=O(9672),ae=O(5403),fe=O(576);function le(ye,W,H=1/0){return(0,fe.m)(W)?le((ie,ze)=>(0,f.U)((Re,Ve)=>W(ie,Re,ze,Ve))((0,B.Xf)(ye(ie,ze))),H):("number"==typeof W&&(H=W),(0,N.e)((ie,ze)=>function _e(ye,W,H,ie,ze,Re,Ve,Ge){const ge=[];let Se=0,qe=0,We=!1;const Me=()=>{We&&!ge.length&&!Se&&W.complete()},Ne=Ke=>Se<ie?be(Ke):ge.push(Ke),be=Ke=>{Re&&W.next(Ke),Se++;let ne=!1;(0,B.Xf)(H(Ke,qe++)).subscribe((0,ae.x)(W,he=>{null==ze||ze(he),Re?Ne(he):W.next(he)},()=>{ne=!0},void 0,()=>{if(ne)try{for(Se--;ge.length&&Se<ie;){const he=ge.shift();Ve?(0,oe.f)(W,Ve,()=>be(he)):be(he)}Me()}catch(he){W.error(he)}}))};return ye.subscribe((0,ae.x)(W,Ne,()=>{We=!0,Me()})),()=>{null==Ge||Ge()}}(ie,ze,ye,H)))}},5363:(tt,Ie,O)=>{O.d(Ie,{Q:()=>oe});var f=O(9672),B=O(4482),N=O(5403);function oe(ae,_e=0){return(0,B.e)((fe,le)=>{fe.subscribe((0,N.x)(le,ye=>(0,f.f)(le,ae,()=>le.next(ye),_e),()=>(0,f.f)(le,ae,()=>le.complete(),_e),ye=>(0,f.f)(le,ae,()=>le.error(ye),_e)))})}},3099:(tt,Ie,O)=>{O.d(Ie,{B:()=>_e});var f=O(8996),B=O(5698),N=O(7579),oe=O(930),ae=O(4482);function _e(le={}){const{connector:ye=(()=>new N.x),resetOnError:W=!0,resetOnComplete:H=!0,resetOnRefCountZero:ie=!0}=le;return ze=>{let Re=null,Ve=null,Ge=null,ge=0,Se=!1,qe=!1;const We=()=>{null==Ve||Ve.unsubscribe(),Ve=null},Me=()=>{We(),Re=Ge=null,Se=qe=!1},Ne=()=>{const be=Re;Me(),null==be||be.unsubscribe()};return(0,ae.e)((be,Ke)=>{ge++,!qe&&!Se&&We();const ne=Ge=null!=Ge?Ge:ye();Ke.add(()=>{ge--,0===ge&&!qe&&!Se&&(Ve=fe(Ne,ie))}),ne.subscribe(Ke),Re||(Re=new oe.Hp({next:he=>ne.next(he),error:he=>{qe=!0,We(),Ve=fe(Me,W,he),ne.error(he)},complete:()=>{Se=!0,We(),Ve=fe(Me,H),ne.complete()}}),(0,f.D)(be).subscribe(Re))})(ze)}}function fe(le,ye,...W){return!0===ye?(le(),null):!1===ye?null:ye(...W).pipe((0,B.q)(1)).subscribe(()=>le())}},9468:(tt,Ie,O)=>{O.d(Ie,{R:()=>B});var f=O(4482);function B(N,oe=0){return(0,f.e)((ae,_e)=>{_e.add(N.schedule(()=>ae.subscribe(_e),oe))})}},5698:(tt,Ie,O)=>{O.d(Ie,{q:()=>oe});var f=O(515),B=O(4482),N=O(5403);function oe(ae){return ae<=0?()=>f.E:(0,B.e)((_e,fe)=>{let le=0;_e.subscribe((0,N.x)(fe,ye=>{++le<=ae&&(fe.next(ye),ae<=le&&fe.complete())}))})}},8505:(tt,Ie,O)=>{O.d(Ie,{b:()=>ae});var f=O(576),B=O(4482),N=O(5403),oe=O(4671);function ae(_e,fe,le){const ye=(0,f.m)(_e)||fe||le?{next:_e,error:fe,complete:le}:_e;return ye?(0,B.e)((W,H)=>{var ie;null===(ie=ye.subscribe)||void 0===ie||ie.call(ye);let ze=!0;W.subscribe((0,N.x)(H,Re=>{var Ve;null===(Ve=ye.next)||void 0===Ve||Ve.call(ye,Re),H.next(Re)},()=>{var Re;ze=!1,null===(Re=ye.complete)||void 0===Re||Re.call(ye),H.complete()},Re=>{var Ve;ze=!1,null===(Ve=ye.error)||void 0===Ve||Ve.call(ye,Re),H.error(Re)},()=>{var Re,Ve;ze&&(null===(Re=ye.unsubscribe)||void 0===Re||Re.call(ye)),null===(Ve=ye.finalize)||void 0===Ve||Ve.call(ye)}))}):oe.y}},4408:(tt,Ie,O)=>{O.d(Ie,{o:()=>ae});var f=O(727);class B extends f.w0{constructor(fe,le){super()}schedule(fe,le=0){return this}}const N={setInterval(_e,fe,...le){const{delegate:ye}=N;return(null==ye?void 0:ye.setInterval)?ye.setInterval(_e,fe,...le):setInterval(_e,fe,...le)},clearInterval(_e){const{delegate:fe}=N;return((null==fe?void 0:fe.clearInterval)||clearInterval)(_e)},delegate:void 0};var oe=O(8737);class ae extends B{constructor(fe,le){super(fe,le),this.scheduler=fe,this.work=le,this.pending=!1}schedule(fe,le=0){if(this.closed)return this;this.state=fe;const ye=this.id,W=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(W,ye,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(W,this.id,le),this}requestAsyncId(fe,le,ye=0){return N.setInterval(fe.flush.bind(fe,this),ye)}recycleAsyncId(fe,le,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return le;N.clearInterval(le)}execute(fe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(fe,le);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,le){let W,ye=!1;try{this.work(fe)}catch(H){ye=!0,W=H||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:fe,scheduler:le}=this,{actions:ye}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ye,this),null!=fe&&(this.id=this.recycleAsyncId(le,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(tt,Ie,O)=>{O.d(Ie,{v:()=>N});var f=O(6063);class B{constructor(ae,_e=B.now){this.schedulerActionCtor=ae,this.now=_e}schedule(ae,_e=0,fe){return new this.schedulerActionCtor(this,ae).schedule(fe,_e)}}B.now=f.l.now;class N extends B{constructor(ae,_e=B.now){super(ae,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:_e}=this;if(this._active)return void _e.push(ae);let fe;this._active=!0;do{if(fe=ae.execute(ae.state,ae.delay))break}while(ae=_e.shift());if(this._active=!1,fe){for(;ae=_e.shift();)ae.unsubscribe();throw fe}}}},4986:(tt,Ie,O)=>{O.d(Ie,{z:()=>N});var f=O(4408);const N=new(O(7565).v)(f.o)},6063:(tt,Ie,O)=>{O.d(Ie,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(tt,Ie,O)=>{O.d(Ie,{z:()=>f});const f={setTimeout(B,N,...oe){const{delegate:ae}=f;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(B,N,...oe):setTimeout(B,N,...oe)},clearTimeout(B){const{delegate:N}=f;return((null==N?void 0:N.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(tt,Ie,O)=>{O.d(Ie,{h:()=>B});const B=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tt,Ie,O)=>{O.d(Ie,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(tt,Ie,O)=>{O.d(Ie,{_6:()=>_e,jO:()=>oe,yG:()=>ae});var f=O(576);function N(fe){return fe[fe.length-1]}function oe(fe){return(0,f.m)(N(fe))?fe.pop():void 0}function ae(fe){return function B(fe){return fe&&(0,f.m)(fe.schedule)}(N(fe))?fe.pop():void 0}function _e(fe,le){return"number"==typeof N(fe)?fe.pop():le}},8737:(tt,Ie,O)=>{function f(B,N){if(B){const oe=B.indexOf(N);0<=oe&&B.splice(oe,1)}}O.d(Ie,{P:()=>f})},3888:(tt,Ie,O)=>{function f(B){const oe=B(ae=>{Error.call(ae),ae.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Ie,{d:()=>f})},2806:(tt,Ie,O)=>{O.d(Ie,{O:()=>oe,x:()=>N});var f=O(2416);let B=null;function N(ae){if(f.v.useDeprecatedSynchronousErrorHandling){const _e=!B;if(_e&&(B={errorThrown:!1,error:null}),ae(),_e){const{errorThrown:fe,error:le}=B;if(B=null,fe)throw le}}else ae()}function oe(ae){f.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ae)}},9672:(tt,Ie,O)=>{function f(B,N,oe,ae=0,_e=!1){const fe=N.schedule(function(){oe(),_e?B.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(B.add(fe),!_e)return fe}O.d(Ie,{f:()=>f})},4671:(tt,Ie,O)=>{function f(B){return B}O.d(Ie,{y:()=>f})},1144:(tt,Ie,O)=>{O.d(Ie,{z:()=>f});const f=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(tt,Ie,O)=>{O.d(Ie,{D:()=>B});var f=O(576);function B(N){return Symbol.asyncIterator&&(0,f.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(tt,Ie,O)=>{function f(B){return"function"==typeof B}O.d(Ie,{m:()=>f})},3670:(tt,Ie,O)=>{O.d(Ie,{c:()=>N});var f=O(8822),B=O(576);function N(oe){return(0,B.m)(oe[f.L])}},6495:(tt,Ie,O)=>{O.d(Ie,{T:()=>N});var f=O(2202),B=O(576);function N(oe){return(0,B.m)(null==oe?void 0:oe[f.h])}},8239:(tt,Ie,O)=>{O.d(Ie,{t:()=>B});var f=O(576);function B(N){return(0,f.m)(null==N?void 0:N.then)}},3260:(tt,Ie,O)=>{O.d(Ie,{L:()=>oe,Q:()=>N});var f=O(655),B=O(576);function N(ae){return(0,f.FC)(this,arguments,function*(){const fe=ae.getReader();try{for(;;){const{value:le,done:ye}=yield(0,f.qq)(fe.read());if(ye)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(le)}}finally{fe.releaseLock()}})}function oe(ae){return(0,B.m)(null==ae?void 0:ae.getReader)}},4482:(tt,Ie,O)=>{O.d(Ie,{A:()=>B,e:()=>N});var f=O(576);function B(oe){return(0,f.m)(null==oe?void 0:oe.lift)}function N(oe){return ae=>{if(B(ae))return ae.lift(function(_e){try{return oe(_e,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(tt,Ie,O)=>{function f(){}O.d(Ie,{Z:()=>f})},7849:(tt,Ie,O)=>{O.d(Ie,{h:()=>N});var f=O(2416),B=O(3410);function N(oe){B.z.setTimeout(()=>{const{onUnhandledError:ae}=f.v;if(!ae)throw oe;ae(oe)})}},4532:(tt,Ie,O)=>{function f(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Ie,{z:()=>f})},655:(tt,Ie,O)=>{function oe(Q,re){var se={};for(var ve in Q)Object.prototype.hasOwnProperty.call(Q,ve)&&re.indexOf(ve)<0&&(se[ve]=Q[ve]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var de=0;for(ve=Object.getOwnPropertySymbols(Q);de<ve.length;de++)re.indexOf(ve[de])<0&&Object.prototype.propertyIsEnumerable.call(Q,ve[de])&&(se[ve[de]]=Q[ve[de]])}return se}function le(Q,re,se,ve){return new(se||(se=Promise))(function(Be,ht){function zt(hn){try{Ye(ve.next(hn))}catch(On){ht(On)}}function Ft(hn){try{Ye(ve.throw(hn))}catch(On){ht(On)}}function Ye(hn){hn.done?Be(hn.value):function de(Be){return Be instanceof se?Be:new se(function(ht){ht(Be)})}(hn.value).then(zt,Ft)}Ye((ve=ve.apply(Q,re||[])).next())})}function ge(Q){return this instanceof ge?(this.v=Q,this):new ge(Q)}function Se(Q,re,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,ve=se.apply(Q,re||[]),Be=[];return de={},ht("next"),ht("throw"),ht("return"),de[Symbol.asyncIterator]=function(){return this},de;function ht(fn){ve[fn]&&(de[fn]=function(rn){return new Promise(function(Lt,Zt){Be.push([fn,rn,Lt,Zt])>1||zt(fn,rn)})})}function zt(fn,rn){try{!function Ft(fn){fn.value instanceof ge?Promise.resolve(fn.value.v).then(Ye,hn):On(Be[0][2],fn)}(ve[fn](rn))}catch(Lt){On(Be[0][3],Lt)}}function Ye(fn){zt("next",fn)}function hn(fn){zt("throw",fn)}function On(fn,rn){fn(rn),Be.shift(),Be.length&&zt(Be[0][0],Be[0][1])}}function We(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=Q[Symbol.asyncIterator];return re?re.call(Q):(Q=function ie(Q){var re="function"==typeof Symbol&&Symbol.iterator,se=re&&Q[re],ve=0;if(se)return se.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ve>=Q.length&&(Q=void 0),{value:Q&&Q[ve++],done:!Q}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),se={},ve("next"),ve("throw"),ve("return"),se[Symbol.asyncIterator]=function(){return this},se);function ve(Be){se[Be]=Q[Be]&&function(ht){return new Promise(function(zt,Ft){!function de(Be,ht,zt,Ft){Promise.resolve(Ft).then(function(Ye){Be({value:Ye,done:zt})},ht)}(zt,Ft,(ht=Q[Be](ht)).done,ht.value)})}}}O.d(Ie,{FC:()=>Se,KL:()=>We,_T:()=>oe,mG:()=>le,qq:()=>ge})},5e3:(tt,Ie,O)=>{O.d(Ie,{$8M:()=>Ga,$Z:()=>Ep,AFp:()=>YI,AaK:()=>le,CHM:()=>ku,CRH:()=>LI,CZH:()=>Bs,CqO:()=>Vm,EJc:()=>Sw,EpF:()=>vh,F4k:()=>Lm,FYo:()=>fI,FiY:()=>lr,G48:()=>ef,GfV:()=>gI,Gpc:()=>H,JOm:()=>ps,LFG:()=>st,LSH:()=>dy,Lbi:()=>QI,MAs:()=>Rm,NdJ:()=>wh,OlP:()=>Rn,Oqu:()=>Np,PXZ:()=>Rw,Q6J:()=>Om,QGY:()=>bp,Qsj:()=>oS,R0b:()=>js,RDi:()=>Ol,Rgc:()=>Gh,SBq:()=>Uh,Sil:()=>g_,Suo:()=>FI,TTD:()=>Na,TgZ:()=>qr,VLi:()=>VS,X6Q:()=>BS,XFs:()=>gt,Xpm:()=>ft,Y36:()=>yh,YKP:()=>Us,YNc:()=>xm,Yjl:()=>Qe,Yz7:()=>rn,ZZ4:()=>sg,_Bn:()=>Nn,_UZ:()=>Cc,_Vd:()=>_l,_c5:()=>Gw,_uU:()=>Mp,aQg:()=>I_,c2e:()=>zr,cJS:()=>Zt,cg1:()=>Yi,dDg:()=>tb,deG:()=>Pf,dqk:()=>Ht,eFA:()=>ib,ekj:()=>Sv,g9A:()=>vl,h0i:()=>Ho,hGG:()=>ZS,hij:()=>Pp,iGM:()=>gw,ifc:()=>jt,ip1:()=>Xp,kL8:()=>jv,lG2:()=>Ae,n5z:()=>Yl,oAB:()=>ce,oxw:()=>Bm,q4F:()=>mI,qLn:()=>Yf,qOj:()=>iv,qZA:()=>Cp,s9C:()=>bv,sBO:()=>kw,sIi:()=>dh,s_b:()=>Xt,soG:()=>eg,tBr:()=>Ei,tb:()=>p_,tp0:()=>Ro,uIk:()=>Am,vHH:()=>Ve,vpe:()=>Ni,wAp:()=>bt,xp6:()=>lE,z2F:()=>rg,zSh:()=>Im,zs3:()=>nu});var f=O(7579),B=O(727),N=O(8306),oe=O(6451),ae=O(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function fe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ye(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=_e({__forward_ref__:_e});function H(s){return s.__forward_ref__=H,s.toString=function(){return le(this())},s}function ie(s){return ze(s)?s():s}function ze(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===H}class Ve extends Error{constructor(o,u){super(function Ge(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Se(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function Ne(s,o){const u=o?` in ${o}`:"";throw new Ve(-201,`No provider for ${Se(s)} found${u}`)}function Ft(s,o){null==s&&function Ye(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Sn(s){return Li(s,ci)||Li(s,Fn)}function Li(s,o){return s.hasOwnProperty(o)?s[o]:null}function Xi(s){return s&&(s.hasOwnProperty(Vi)||s.hasOwnProperty(es))?s[Vi]:null}const ci=_e({\u0275prov:_e}),Vi=_e({\u0275inj:_e}),Fn=_e({ngInjectableDef:_e}),es=_e({ngInjectorDef:_e});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Br;function sn(s){const o=Br;return Br=s,o}function br(s,o,u){const c=Sn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&gt.Optional?null:void 0!==o?o:void Ne(le(s),"Injector")}function jr(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),jt=(()=>{return(s=jt||(jt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",jt;var s})();const ct="undefined"!=typeof globalThis&&globalThis,it="undefined"!=typeof window&&window,di="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ct||"undefined"!=typeof global&&global||it||di,pn={},j=[],q=_e({\u0275cmp:_e}),Z=_e({\u0275dir:_e}),Ee=_e({\u0275pipe:_e}),$=_e({\u0275mod:_e}),J=_e({\u0275fac:_e}),ke=_e({__NG_ELEMENT_ID__:_e});let Xe=0;function ft(s){return jr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||j,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||jt.Emulated,id:"c",styles:s.styles||j,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,y=s.pipes;return c.id+=Xe++,c.inputs=z(s.inputs,u),c.outputs=z(s.outputs),p&&p.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(ln):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ct):null,c})}function ln(s){return lt(s)||function xt(s){return s[Z]||null}(s)}function Ct(s){return function qt(s){return s[Ee]||null}(s)}const Zn={};function ce(s){return jr(()=>{const o={type:s.type,bootstrap:s.bootstrap||j,declarations:s.declarations||j,imports:s.imports||j,exports:s.exports||j,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Zn[s.id]=s.type),o})}function z(s,o){if(null==s)return pn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const Ae=ft;function Qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function lt(s){return s[q]||null}function Vt(s,o){const u=s[$]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function Ui(s){return Array.isArray(s)&&"object"==typeof s[1]}function fi(s){return Array.isArray(s)&&!0===s[1]}function dd(s){return 0!=(8&s.flags)}function Tu(s){return 2==(2&s.flags)}function Ys(s){return 1==(1&s.flags)}function pi(s){return null!==s.template}function Cf(s){return 0!=(512&s[2])}function gi(s,o){return s.hasOwnProperty(J)?s[J]:null}class Xo{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Na(){return Pa}function Pa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Og),bf}function bf(){const s=_d(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===pn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Og(s,o,u,c){const d=_d(s)||function xs(s,o){return s[_o]=o}(s,{previous:pn,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],I=y[E];p[E]=new Xo(I&&I.currentValue,o,y===pn),s[c]=o}Na.ngInherit=!0;const _o="__ngSimpleChanges__";function _d(s){return s[_o]||null}let Ru;function Ol(s){Ru=s}function vn(s){return!!s.listen}const ka={createRenderer:(s,o)=>function Rs(){return void 0!==Ru?Ru:"undefined"!=typeof document?document:void 0}()};function mn(s){for(;Array.isArray(s);)s=s[0];return s}function yo(s,o){return mn(o[s])}function pr(s,o){return mn(o[s.index])}function Un(s,o){return s.data[o]}function gr(s,o){const u=o[s];return Ui(u)?u:u[0]}function ea(s){return 4==(4&s[2])}function rs(s){return 128==(128&s[2])}function Jr(s,o){return null==o?null:s[o]}function Xs(s){s[18]=0}function eo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const wt={lFrame:xd(null),bindingsEnabled:!0};function ta(){return wt.bindingsEnabled}function Pe(){return wt.lFrame.lView}function $t(){return wt.lFrame.tView}function ku(s){return wt.lFrame.contextLView=s,s[8]}function Tn(){let s=Id();for(;null!==s&&64===s.type;)s=s.parent;return s}function Id(){return wt.lFrame.currentTNode}function is(s,o){const u=wt.lFrame;u.currentTNode=s,u.isParent=o}function Vl(){return wt.lFrame.isParent}function ra(){return wt.lFrame.bindingIndex++}function Td(s,o){const u=wt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ul(o)}function Ul(s){wt.lFrame.currentDirectiveIndex=s}function Sd(){return wt.lFrame.currentQueryIndex}function Ad(s){wt.lFrame.currentQueryIndex=s}function Bl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ua(s,o,u){if(u&gt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&gt.Host||(d=Bl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=wt.lFrame=Eo();return c.currentTNode=o,c.lView=s,!0}function Ba(s){const o=Eo(),u=s[1];wt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Eo(){const s=wt.lFrame,o=null===s?null:s.child;return null===o?xd(s):o}function xd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Af(){const s=wt.lFrame;return wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ou=Af;function ei(){const s=Af();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Dr(){return wt.lFrame.selectedIndex}function Co(s){wt.lFrame.selectedIndex=s}function Jn(){const s=wt.lFrame;return Un(s.tView,s.selectedIndex)}function Ps(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function ja(s,o,u){Nd(s,o,3,u)}function Ha(s,o,u,c){(3&s[2])===u&&Nd(s,o,u,c)}function sr(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Nd(s,o,u,c){const p=null!=c?c:-1,y=o.length-1;let E=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(s[18]+=65536),(E<p||-1==p)&&(Lg(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Lg(s,o,u,c){const d=u[c]<0,p=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class oa{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Gl(s,o,u){const c=vn(s);let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const y=u[d++],E=u[d++],I=u[d++];c?s.setAttribute(o,E,I,y):o.setAttributeNS(y,E,I)}else{const y=p,E=u[++d];Wl(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Fu(s){return 3===s||4===s||6===s}function Wl(s){return 64===s.charCodeAt(0)}function aa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||ua(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function ua(s,o,u,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function la(s){return-1!==s}function on(s){return 32767&s}function mt(s,o){let u=function or(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Lu=!0;function no(s){const o=Lu;return Lu=s,o}let kd=0;function kr(s,o){const u=bo(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Fs(c.data,s),Fs(o,null),Fs(c.blueprint,null));const d=_i(s,o),p=s.injectorIndex;if(la(d)){const y=on(d),E=mt(d,o),I=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|I[y+A]}return o[p+8]=d,p}function Fs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function bo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function _i(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const p=d[1],y=p.type;if(c=2===y?p.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Do(s,o,u){!function mi(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ke)&&(c=u[ke]),null==c&&(c=u[ke]=kd++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function ji(s,o,u){if(u&gt.Optional)return s;Ne(o,"NodeInjector")}function os(s,o,u,c){if(u&gt.Optional&&void 0===c&&(c=null),0==(u&(gt.Self|gt.Host))){const d=s[9],p=sn(void 0);try{return d?d.get(o,c,u&gt.Optional):br(o,c,u&gt.Optional)}finally{sn(p)}}return ji(c,o,u)}function ca(s,o,u,c=gt.Default,d){if(null!==s){const p=function Od(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ke)?s[ke]:void 0;return"number"==typeof o?o>=0?255&o:as:o}(u);if("function"==typeof p){if(!Ua(o,s,c))return c&gt.Host?ji(d,u,c):os(o,u,c,d);try{const y=p(c);if(null!=y||c&gt.Optional)return y;Ne(u)}finally{Ou()}}else if("number"==typeof p){let y=null,E=bo(s,o),I=-1,A=c&gt.Host?o[16][6]:null;for((-1===E||c&gt.SkipSelf)&&(I=-1===E?_i(s,o):o[E+8],-1!==I&&Zl(c,!1)?(y=o[1],E=on(I),o=mt(I,o)):E=-1);-1!==E;){const R=o[1];if($a(p,E,R.data)){const L=Ug(E,o,u,y,c,A);if(L!==Pn)return L}I=o[E+8],-1!==I&&Zl(c,o[1].data[E+8]===A)&&$a(p,E,o)?(y=R,E=on(I),o=mt(I,o)):E=-1}}}return os(o,u,c,d)}const Pn={};function as(){return new Hi(Tn(),Pe())}function Ug(s,o,u,c,d,p){const y=o[1],E=y.data[s+8],R=Vu(E,y,u,null==c?Tu(E)&&Lu:c!=y&&0!=(3&E.type),d&gt.Host&&p===E);return null!==R?To(o,y,R,E):Pn}function Vu(s,o,u,c,d){const p=s.providerIndexes,y=o.data,E=1048575&p,I=s.directiveStart,R=p>>20,G=d?E+R:s.directiveEnd;for(let ee=c?E:E+R;ee<G;ee++){const Te=y[ee];if(ee<I&&u===Te||ee>=I&&Te.type===u)return ee}if(d){const ee=y[I];if(ee&&pi(ee)&&ee.type===u)return I}return null}function To(s,o,u,c){let d=s[u];const p=o.data;if(function Pd(s){return s instanceof oa}(d)){const y=d;y.resolving&&function qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${s}${u}`)}(Se(p[u]));const E=no(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?sn(y.injectImpl):null;Ua(s,c,gt.Default);try{d=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Md(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=Pa(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&sn(I),no(E),y.resolving=!1,Ou()}}return d}function $a(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Zl(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Hi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return ca(this._tNode,this._lView,o,c,u)}}function Yl(s){return jr(()=>{const o=s.prototype.constructor,u=o[J]||So(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[J]||So(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function So(s){return ze(s)?()=>{const o=So(ie(s));return o&&o()}:gi(s)}function Ga(s){return function Kl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(Fu(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(Tn(),s)}const Ao="__parameters__";function da(s,o,u){return jr(()=>{const c=function Uu(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(I,A,R){const L=I.hasOwnProperty(Ao)?I[Ao]:Object.defineProperty(I,Ao,{value:[]})[Ao];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(y),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Rn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Pf=new Rn("AnalyzeForEntryComponents");function Or(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Or(c,o)):o!==s&&o.push(c)}return o}function $r(s,o){s.forEach(u=>Array.isArray(u)?$r(u,o):o(u))}function Xl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ls(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vi(s,o,u){let c=qa(s,o);return c>=0?s[1|c]=u:(c=~c,function ec(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Bf(s,o){const u=qa(s,o);if(u>=0)return s[1|u]}function qa(s,o){return function io(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const hs={},Za="__NG_DI_FLAG__",rc="ngTempTokenPath",T=/\n/gm,V="__source",X=_e({provide:String,useValue:_e});let ue;function Ue(s){const o=ue;return ue=s,o}function ot(s,o=gt.Default){if(void 0===ue)throw new Ve(203,"");return null===ue?br(s,void 0,o):ue.get(s,o&gt.Optional?null:void 0,o)}function st(s,o=gt.Default){return(function bn(){return Br}()||ot)(ie(s),o)}const Yt=st;function It(s){const o=[];for(let u=0;u<s.length;u++){const c=ie(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ve(900,"");let d,p=gt.Default;for(let y=0;y<c.length;y++){const E=c[y],I=ur(E);"number"==typeof I?-1===I?d=E.token:p|=I:d=E}o.push(st(d,p))}else o.push(st(c))}return o}function ar(s,o){return s[Za]=o,s.prototype[Za]=o,s}function ur(s){return s[Za]}const Ei=ar(da("Inject",s=>({token:s})),-1),lr=ar(da("Optional"),8),Ro=ar(da("SkipSelf"),4);class Kd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function pa(s){return s instanceof Kd?s.changingThisBreaksApplicationSecurity:s}const Wf=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function dy(s){const o=function Zf(){const s=Pe();return s&&s[12]}();return o?o.sanitize(_r.URL,s)||"":function ga(s,o){const u=function iy(s){return s instanceof Kd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?pa(s):function _(s){return(s=String(s)).match(Wf)||s.match(g)?s:"unsafe:"+s}(ge(s))}const Dt="__ngContext__";function Xn(s,o){s[Dt]=o}function zu(s){const o=function Wi(s){return s[Dt]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Ku(s){return s.ngOriginalError}function Ii(s,...o){s.error(...o)}class Yf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function z0(s){return s&&s.ngErrorLogger||Ii}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Ku(o);for(;u&&Ku(u);)u=Ku(u);return u||null}}const gy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Di(s){return s instanceof Function?s():s}var ps=(()=>((ps=ps||{})[ps.Important=1]="Important",ps[ps.DashCase=2]="DashCase",ps))();function my(s,o){return undefined(s,o)}function Jf(s){const o=s[3];return fi(o)?o[3]:o}function nm(s){return eE(s[13])}function rm(s){return eE(s[4])}function eE(s){for(;null!==s&&!fi(s);)s=s[4];return s}function Xd(s,o,u,c,d){if(null!=c){let p,y=!1;fi(c)?p=c:Ui(c)&&(y=!0,c=c[0]);const E=mn(c);0===s&&null!==u?null==d?Cy(o,u,E):cc(o,u,E,d||null,!0):1===s&&null!==u?cc(o,u,E,d||null,!0):2===s?function Sy(s,o,u){const c=Xf(s,o);c&&function qD(s,o,u,c){vn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function rE(s,o,u,c,d){const p=u[7];p!==mn(u)&&Xd(o,s,c,p,d);for(let E=10;E<u.length;E++){const I=u[E];tp(I[1],I,s,o,c,p)}}(o,s,p,u,d)}}function vy(s,o,u){if(vn(s))return s.createElement(o,u);{const c=null!==u?function xu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function No(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,eo(d,-1)),u.splice(c,1)}function im(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&No(d,c),o>0&&(s[u-1][4]=c[4]);const p=ls(s,10+o);!function eh(s,o){tp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Ey(s,o){if(!(256&o[2])){const u=o[11];vn(u)&&u.destroyNode&&tp(s,o,u,3,null,null),function $D(s){let o=s[13];if(!o)return sm(s[1],s);for(;o;){let u=null;if(Ui(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Ui(o)&&sm(o[1],o),o=o[3];null===o&&(o=s),Ui(o)&&sm(o[1],o),u=o&&o[4]}o=u}}(o)}}function sm(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ni(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof oa)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],I=p[y+1];try{I.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function yM(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):mn(o[y]),I=c[d=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],I,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),p+=2}else{const y=c[d=u[p+1]];u[p].call(y)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&vn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&fi(o[3])){u!==o[3]&&No(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Po(s,o,u){return function nE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===jt.None||d===jt.Emulated)return null}return pr(c,u)}(s,o.parent,u)}function cc(s,o,u,c,d){vn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Cy(s,o,u){vn(s)?s.appendChild(o,u):o.appendChild(u)}function Iy(s,o,u,c,d){null!==c?cc(s,o,u,c,d):Cy(s,o,u)}function Xf(s,o){return vn(s)?s.parentNode(o):o.parentNode}let ep=function Dy(s,o,u){return 40&s.type?pr(s,u):null};function Qu(s,o,u,c){const d=Po(s,c,o),p=o[11],E=function by(s,o,u){return ep(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)Iy(p,d,u[I],E,!1);else Iy(p,d,u,E,!1)}function om(s,o){if(null!==o){const u=o.type;if(3&u)return pr(o,s);if(4&u)return Ty(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return om(s,c);{const d=s[o.index];return fi(d)?Ty(-1,d):mn(d)}}if(32&u)return my(o,s)()||mn(s[o.index]);{const c=Ju(s,o);return null!==c?Array.isArray(c)?c[0]:om(Jf(s[16]),c):om(s,o.next)}}return null}function Ju(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ty(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return om(c,d)}return o[7]}function am(s,o,u,c,d,p,y){for(;null!=u;){const E=c[u.index],I=u.type;if(y&&0===o&&(E&&Xn(mn(E),c),u.flags|=4),64!=(64&u.flags))if(8&I)am(s,o,u.child,c,d,p,!1),Xd(o,s,d,E,p);else if(32&I){const A=my(u,c);let R;for(;R=A();)Xd(o,s,d,R,p);Xd(o,s,d,E,p)}else 16&I?th(s,o,c,u,d,p):Xd(o,s,d,E,p);u=y?u.projectionNext:u.next}}function tp(s,o,u,c,d,p){am(u,c,s.firstChild,o,d,p,!1)}function th(s,o,u,c,d,p){const y=u[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Xd(o,s,d,I[A],p);else am(s,o,I,y[3],d,p,!0)}function iE(s,o,u){vn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function np(s,o,u){vn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function rp(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const Ay="ng-template";function ZD(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==rp(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function sE(s){return 4===s.type&&s.value!==Ay}function YD(s,o,u){return o===(4!==s.type||u?s.value:Ay)}function cm(s,o,u){let c=4;const d=s.attrs||[],p=function XD(s){for(let o=0;o<s.length;o++)if(Fu(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!YD(s,I,u)||""===I&&1===o.length){if(ko(c))return!1;y=!0}}else{const A=8&c?I:o[++E];if(8&c&&null!==s.attrs){if(!ZD(s.attrs,A,u)){if(ko(c))return!1;y=!0}continue}const L=QD(8&c?"class":I,d,sE(s),u);if(-1===L){if(ko(c))return!1;y=!0;continue}if(""!==A){let G;G=L>p?"":d[L+1].toLowerCase();const ee=8&c?G:null;if(ee&&-1!==rp(ee,A,0)||2&c&&A!==G){if(ko(c))return!1;y=!0}}}}else{if(!y&&!ko(c)&&!ko(I))return!1;if(y&&ko(I))continue;y=!1,c=I|1&c}}return ko(c)||y}function ko(s){return 0==(1&s)}function QD(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function aE(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function oE(s,o,u=!1){for(let c=0;c<o.length;c++)if(cm(s,o[c],u))return!0;return!1}function dm(s,o){return s?":not("+o.trim()+")":o}function eu(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!ko(y)&&(o+=dm(p,d),d=""),c=y,p=p||!ko(c);u++}return""!==d&&(o+=dm(p,d)),o}const Nt={};function lE(s){dc($t(),Pe(),Dr()+s,!1)}function dc(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ja(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Ha(o,p,0,u)}Co(u)}function hm(s,o){return s<<17|o<<2}function gs(s){return s>>17&32767}function fm(s){return 2|s}function Oo(s){return(131068&s)>>2}function ip(s,o){return-131069&s|o<<2}function hc(s){return 1|s}function Uy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];Ad(d),y.contentQueries(2,o[p],p)}}}function ap(s,o,u,c,d,p,y,E,I,A){const R=o.blueprint.slice();return R[0]=d,R[2]=140|c,Xs(R),R[3]=R[15]=s,R[8]=u,R[10]=y||s&&s[10],R[11]=E||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function sh(s,o,u,c,d){let p=s.data[o];if(null===p)p=function By(s,o,u,c,d){const p=Id(),y=Vl(),I=s.data[o]=function bE(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,d),function Sf(){return wt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const y=function Ns(){const s=wt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return is(p,!0),p}function oh(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function tl(s,o,u){Ba(o);try{const c=s.viewQuery;null!==c&&Zy(1,c,u);const d=s.template;null!==d&&up(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Uy(s,o),s.staticViewQueries&&Zy(2,s.viewQuery,u);const p=s.components;null!==p&&function ym(s,o){for(let u=0;u<o.length;u++)NE(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ei()}}function mc(s,o,u,c){const d=o[2];if(256!=(256&d)){Ba(o);try{Xs(o),function na(s){return wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&up(s,o,u,2,c);const y=3==(3&d);if(y){const A=s.preOrderCheckHooks;null!==A&&ja(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Ha(o,A,0,null),sr(o,0)}if(function vT(s){for(let o=nm(s);null!==o;o=rm(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(1024&d[2])&&eo(p,1),d[2]|=1024}}}(o),function yT(s){for(let o=nm(s);null!==o;o=rm(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];rs(c)&&mc(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Uy(s,o),y){const A=s.contentCheckHooks;null!==A&&ja(o,A)}else{const A=s.contentHooks;null!==A&&Ha(o,A,1),sr(o,1)}!function vE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Co(~d);else{const p=d,y=u[++c],E=u[++c];Td(y,p),E(2,o[p])}}}finally{Co(-1)}}(s,o);const E=s.components;null!==E&&function _m(s,o){for(let u=0;u<o.length;u++)wT(s,o[u])}(o,E);const I=s.viewQuery;if(null!==I&&Zy(2,I,c),y){const A=s.viewCheckHooks;null!==A&&ja(o,A)}else{const A=s.viewHooks;null!==A&&Ha(o,A,2),sr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,eo(o[3],-1))}finally{ei()}}}function wE(s,o,u,c){const d=o[10],y=ea(o);try{!y&&d.begin&&d.begin(),y&&tl(s,o,c),mc(s,o,u,c)}finally{!y&&d.end&&d.end()}}function up(s,o,u,c,d){const p=Dr(),y=2&c;try{Co(-1),y&&o.length>20&&dc(s,o,20,!1),u(c,d)}finally{Co(p)}}function _c(s,o,u){!ta()||(function dT(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||kr(u,o),Xn(c,o);const y=u.initialInputs;for(let E=d;E<p;E++){const I=s.data[E],A=pi(I);A&&mT(o,u,I);const R=To(o,s,E,u);Xn(R,o),null!==y&&RE(0,E-d,R,I,0,y),A&&(gr(u.index,o)[8]=R)}}(s,o,u,pr(u,o)),128==(128&u.flags)&&function hT(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function Va(){return wt.lFrame.currentDirectiveIndex}();try{Co(y);for(let I=c;I<d;I++){const A=s.data[I],R=o[I];Ul(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&TE(A,R)}}finally{Co(-1),Ul(E)}}(s,o,u))}function vm(s,o,u=pr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function EE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=wm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function wm(s,o,u,c,d,p,y,E,I,A){const R=20+c,L=R+d,G=function sT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Nt);return u}(R,L),ee="function"==typeof A?A():A;return G[1]={type:s,blueprint:G,template:u,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function IE(s,o,u,c){const d=kE(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&OE(s).push(c,d.length-1))}function lp(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function Ti(s,o,u,c,d,p,y,E){const I=pr(o,u);let R,A=o.inputs;!E&&null!=A&&(R=A[c])?(Yy(s,u,R,c,d),Tu(o)&&function uT(s,o){const u=gr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function aT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,vn(p)?p.setProperty(I,c,d):Wl(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}function Hy(s,o,u,c){let d=!1;if(ta()){const p=function fT(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];oE(u,y.selectors,!1)&&(d||(d=[]),Do(kr(u,o),s,y.type),pi(y)?($y(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==p){d=!0,SE(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const L=p[R];L.providersResolver&&L.providersResolver(L)}let E=!1,I=!1,A=oh(s,o,p.length,null);for(let R=0;R<p.length;R++){const L=p[R];u.mergedAttrs=aa(u.mergedAttrs,L.hostAttrs),AE(s,u,o,A,L),gT(A,L,y),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const G=L.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}!function oT(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,y=[];let E=null,I=null;for(let A=o.directiveStart;A<c;A++){const R=d[A],L=R.inputs,G=null===p||sE(o)?null:ME(L,p);y.push(G),E=lp(L,A,E),I=lp(R.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=I}(s,u)}y&&function pT(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new Ve(-301,!1);c.push(o[d],p)}}}(u,c,y)}return u.mergedAttrs=aa(u.mergedAttrs,u.attrs),d}function DE(s,o,u,c,d,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function cT(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=I&&E.push(I),E.push(c,d,y)}}function TE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function $y(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function gT(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;pi(o)&&(u[""]=s)}}function SE(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function AE(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=gi(d.type)),y=new oa(p,pi(d),null);s.blueprint[c]=y,u[c]=y,DE(s,o,0,c,oh(s,u,d.hostVars,Nt),d)}function mT(s,o,u){const c=pr(o,s),d=EE(u),p=s[10],y=uh(s,ap(s,d,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=y}function Fo(s,o,u,c,d,p){const y=pr(s,o);!function xE(s,o,u,c,d,p,y){if(null==p)vn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?ge(p):y(p,c||"",d);vn(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,p,s.value,u,c,d)}function RE(s,o,u,c,d,p){const y=p[o];if(null!==y){const E=c.setInput;for(let I=0;I<y.length;){const A=y[I++],R=y[I++],L=y[I++];null!==E?c.setInput(u,L,A,R):u[R]=L}}}function ME(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function Gy(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function wT(s,o){const u=gr(o,s);if(rs(u)){const c=u[1];80&u[2]?mc(c,u,c.template,u[8]):u[5]>0&&Wy(u)}}function Wy(s){for(let c=nm(s);null!==c;c=rm(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const y=p[1];mc(y,p,y.template,p[8])}else p[5]>0&&Wy(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=gr(u[c],s);rs(d)&&d[5]>0&&Wy(d)}}function NE(s,o){const u=gr(o,s),c=u[1];(function ET(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),tl(c,u,u[8])}function uh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function qy(s){for(;s;){s[2]|=64;const o=Jf(s);if(Cf(s)&&!o)return s;s=o}return null}function Ky(s){!function zy(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=zu(u),d=c[1];wE(d,c,d.template,u)}}(s[8])}function Zy(s,o,u){Ad(0),o(s,u)}const PE=(()=>Promise.resolve(null))();function kE(s){return s[7]||(s[7]=[])}function OE(s){return s.cleanup||(s.cleanup=[])}function FE(s,o){const u=s[9],c=u?u.get(Yf,null):null;c&&c.handleError(o)}function Yy(s,o,u,c,d){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],I=o[y],A=s.data[y];null!==A.setInput?A.setInput(I,d,c,E):I[E]=d}}function qi(s,o,u){const c=yo(o,s);!function yy(s,o,u){vn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function tu(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=ye(d,E):2==p&&(c=ye(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Cm=new Rn("INJECTOR",-1);class LE{get(o,u=hs){if(u===hs){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}const Im=new Rn("Set Injector scope."),ch={},Qy={};let VE;function nl(){return void 0===VE&&(VE=new LE),VE}function Jy(s,o=null,u=null,c){const d=UE(s,o,u,c);return d._resolveInjectorDefTypes(),d}function UE(s,o=null,u=null,c){return new bT(s,u,o||nl(),c)}class bT{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&$r(u,E=>this.processProvider(E,o,u)),$r([o],E=>this.processInjectorType(E,[],p)),this.records.set(Cm,yc(void 0,this));const y=this.records.get(Im);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:le(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=hs,c=gt.Default){this.assertNotDestroyed();const d=Ue(this),p=sn(void 0);try{if(!(c&gt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function MT(s){return"function"==typeof s||"object"==typeof s&&s instanceof Rn}(o)&&Sn(o);E=I&&this.injectableDefInScope(I)?yc(bm(o),ch):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&gt.Self?nl():this.parent).get(o,u=c&gt.Optional&&u===hs?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[rc]=y[rc]||[]).unshift(le(o)),d)throw y;return function so(s,o,u,c){const d=s[rc];throw o[V]&&d.unshift(o[V]),s.message=function Ls(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):le(E)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[rc]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{sn(p),Ue(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(le(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(o,u,c){if(!(o=ie(o)))return!1;let d=Xi(o);const p=null==d&&o.ngModule||void 0,y=void 0===p?o:p,E=-1!==c.indexOf(y);if(void 0!==p&&(d=Xi(p)),null==d)return!1;if(null!=d.imports&&!E){let R;c.push(y);try{$r(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:G,providers:ee}=R[L];$r(ee,Te=>this.processProvider(Te,G,ee||j))}}this.injectorDefTypes.add(y);const I=gi(y)||(()=>new y);this.records.set(y,yc(I,ch));const A=d.providers;if(null!=A&&!E){const R=o;$r(A,L=>this.processProvider(L,R,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let d=rl(o=ie(o))?o:ie(o&&o.provide);const p=function TT(s,o,u){return jE(s)?yc(void 0,s.useValue):yc(BE(s),ch)}(o);if(rl(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=yc(void 0,ch,!0),y.factory=()=>It(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,p)}hydrate(o,u){return u.value===ch&&(u.value=Qy,u.value=u.factory()),"object"==typeof u.value&&u.value&&function HE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ie(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function bm(s){const o=Sn(s),u=null!==o?o.factory:gi(s);if(null!==u)return u;if(s instanceof Rn)throw new Ve(204,!1);if(s instanceof Function)return function DT(s){const o=s.length;if(o>0)throw function cs(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Ve(204,!1);const u=function xr(s){const o=s&&(s[ci]||s[Fn]);if(o){const u=function xn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ve(204,!1)}function BE(s,o,u){let c;if(rl(s)){const d=ie(s);return gi(d)||bm(d)}if(jE(s))c=()=>ie(s.useValue);else if(function AT(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...It(s.deps||[]));else if(function ST(s){return!(!s||!s.useExisting)}(s))c=()=>st(ie(s.useExisting));else{const d=ie(s&&(s.useClass||s.provide));if(!function RT(s){return!!s.deps}(s))return gi(d)||bm(d);c=()=>new d(...It(s.deps))}return c}function yc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function jE(s){return null!==s&&"object"==typeof s&&X in s}function rl(s){return"function"==typeof s}let nu=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return Jy({name:""},c,u,"");{const p=null!==(d=u.name)&&void 0!==d?d:"";return Jy({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=hs,s.NULL=new LE,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>st(Cm)}),s.__NG_ELEMENT_ID__=-1,s})();function kT(s,o){Ps(zu(s)[1],Tn())}function iv(s){let o=function rv(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(pi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ve(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const y=s;y.inputs=hp(s.inputs),y.declaredInputs=hp(s.declaredInputs),y.outputs=hp(s.outputs);const E=d.hostBindings;E&&Ki(s,E);const I=d.viewQuery,A=d.contentQueries;if(I&&Sm(s,I),A&&KE(s,A),fe(s.inputs,d.inputs),fe(s.declaredInputs,d.declaredInputs),fe(s.outputs,d.outputs),pi(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===iv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function zE(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=aa(d.hostAttrs,u=aa(u,d.hostAttrs))}}(c)}function hp(s){return s===pn?{}:s===j?[]:s}function Sm(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function KE(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function Ki(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let fp=null;function sl(){if(!fp){const s=Ht.Symbol;if(s&&s.iterator)fp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(fp=c)}}}return fp}function dh(s){return!!av(s)&&(Array.isArray(s)||!(s instanceof Map)&&sl()in s)}function av(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ri(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Am(s,o,u,c){const d=Pe();return ri(d,ra(),o)&&($t(),Fo(Jn(),d,s,o,u,c)),Am}function ol(s,o,u,c){return ri(s,ra(),u)?o+ge(u)+c:Nt}function xm(s,o,u,c,d,p,y,E){const I=Pe(),A=$t(),R=s+20,L=A.firstCreatePass?function uv(s,o,u,c,d,p,y,E,I){const A=o.consts,R=sh(o,s,4,y||null,Jr(A,E));Hy(o,u,R,Jr(A,I)),Ps(o,R);const L=R.tViews=wm(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,A,I,o,u,c,d,p,y):A.data[R];is(L,!1);const G=I[11].createComment("");Qu(A,I,G,L),Xn(G,I),uh(I,I[R]=Gy(G,I,G,L)),Ys(L)&&_c(A,I,L),null!=y&&vm(I,L,E)}function Rm(s){return function Ms(s,o){return s[o]}(function bd(){return wt.lFrame.contextLView}(),20+s)}function yh(s,o=gt.Default){const u=Pe();return null===u?st(s,o):ca(Tn(),u,ie(s),o)}function Ep(){throw new Error("invalid")}function Om(s,o,u){const c=Pe();return ri(c,ra(),o)&&Ti($t(),Jn(),c,s,o,c[11],u,!1),Om}function Ec(s,o,u,c,d){const y=d?"class":"style";Yy(s,u,o.inputs[y],y,c)}function qr(s,o,u,c){const d=Pe(),p=$t(),y=20+s,E=d[11],I=d[y]=vy(E,o,function Fg(){return wt.lFrame.currentNamespace}()),A=p.firstCreatePass?function hC(s,o,u,c,d,p,y){const E=o.consts,A=sh(o,s,2,d,Jr(E,p));return Hy(o,u,A,Jr(E,y)),null!==A.attrs&&tu(A,A.attrs,!1),null!==A.mergedAttrs&&tu(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,d,0,o,u,c):p.data[y];is(A,!0);const R=A.mergedAttrs;null!==R&&Gl(E,I,R);const L=A.classes;null!==L&&np(E,I,L);const G=A.styles;return null!==G&&iE(E,I,G),64!=(64&A.flags)&&Qu(p,d,I,A),0===function Ed(){return wt.lFrame.elementDepthCount}()&&Xn(I,d),function Fa(){wt.lFrame.elementDepthCount++}(),Ys(A)&&(_c(p,d,A),function jy(s,o,u){if(dd(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}(p,A,d)),null!==c&&vm(d,A),qr}function Cp(){let s=Tn();Vl()?function La(){wt.lFrame.isParent=!1}():(s=s.parent,is(s,!1));const o=s;!function Cd(){wt.lFrame.elementDepthCount--}();const u=$t();return u.firstCreatePass&&(Ps(u,s),dd(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Vg(s){return 0!=(16&s.flags)}(o)&&Ec(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function wn(s){return 0!=(32&s.flags)}(o)&&Ec(u,o,Pe(),o.stylesWithoutHost,!1),Cp}function Cc(s,o,u,c){return qr(s,o,u,c),Cp(),Cc}function vh(){return Pe()}function bp(s){return!!s&&"function"==typeof s.then}function Lm(s){return!!s&&"function"==typeof s.subscribe}const Vm=Lm;function wh(s,o,u,c){const d=Pe(),p=$t(),y=Tn();return function gC(s,o,u,c,d,p,y,E){const I=Ys(c),R=s.firstCreatePass&&OE(s),L=o[8],G=kE(o);let ee=!0;if(3&c.type||E){const Ze=pr(c,o),rt=E?E(Ze):Ze,xe=G.length,yt=E?en=>E(mn(en[c.index])):c.index;if(vn(u)){let en=null;if(!E&&I&&(en=function pC(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===u&&d[p+1]===c){const E=o[7],I=d[p+2];return E.length>I?E[I]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==en)(en.__ngLastListenerFn__||en).__ngNextListenerFn__=p,en.__ngLastListenerFn__=p,ee=!1;else{p=Ch(c,o,L,p,!1);const En=u.listen(rt,d,p);G.push(p,En),R&&R.push(d,yt,xe,xe+1)}}else p=Ch(c,o,L,p,!0),rt.addEventListener(d,p,y),G.push(p),R&&R.push(d,yt,xe,y)}else p=Ch(c,o,L,p,!1);const Te=c.outputs;let He;if(ee&&null!==Te&&(He=Te[d])){const Ze=He.length;if(Ze)for(let rt=0;rt<Ze;rt+=2){const Hs=o[He[rt]][He[rt+1]].subscribe(p),ed=G.length;G.push(p,Hs),R&&R.push(d,c.index,ed,-(ed+1))}}}(p,d,d[11],y,s,o,!!u,c),wh}function Um(s,o,u,c){try{return!1!==u(c)}catch(d){return FE(s,d),!1}}function Ch(s,o,u,c,d){return function p(y){if(y===Function)return c;const E=2&s.flags?gr(s.index,o):o;0==(32&o[2])&&qy(E);let I=Um(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)I=Um(o,0,A,y)&&I,A=A.__ngNextListenerFn__;return d&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Bm(s=1){return function xf(s){return(wt.lFrame.contextLView=function jl(s,o){for(;s>0;)o=o[15],s--;return o}(s,wt.lFrame.contextLView))[8]}(s)}function bv(s,o,u){return Ic(s,"",o,"",u),bv}function Ic(s,o,u,c,d){const p=Pe(),y=ol(p,o,u,c);return y!==Nt&&Ti($t(),Jn(),p,s,y,p[11],d,!1),Ic}function CC(s,o,u,c,d){const p=s[u+1],y=null===o;let E=c?gs(p):Oo(p),I=!1;for(;0!==E&&(!1===I||y);){const R=s[E+1];Tc(s[E],o)&&(I=!0,s[E+1]=c?hc(R):fm(R)),E=c?gs(R):Oo(R)}I&&(s[u+1]=c?fm(p):hc(p))}function Tc(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&qa(s,o)>=0}function Sv(s,o){return function co(s,o,u,c){const d=Pe(),p=$t(),y=function Xr(s){const o=wt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function RC(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[Dr()],y=function xC(s,o){return o>=s.expandoStartIndex}(s,u);(function Dh(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function MC(s,o,u,c){const d=function sa(s){const o=wt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Sc(u=Rp(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(u=Rp(d,s,o,u,c),null===p){let I=function HT(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Oo(c))return s[gs(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Rp(null,s,o,I[1],c),I=Sc(I,o.attrs,c),function NC(s,o,u,c){s[gs(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function PC(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Sc(c,s[p].hostAttrs,u);return Sc(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function Dc(s,o,u,c,d,p){let y=p?o.classBindings:o.styleBindings,E=gs(y),I=Oo(y);s[c]=u;let R,A=!1;if(Array.isArray(u)){const L=u;R=L[1],(null===R||qa(L,R)>0)&&(A=!0)}else R=u;if(d)if(0!==I){const G=gs(s[E+1]);s[c+1]=hm(G,E),0!==G&&(s[G+1]=ip(s[G+1],c)),s[E+1]=function Ny(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=hm(E,0),0!==E&&(s[E+1]=ip(s[E+1],c)),E=c;else s[c+1]=hm(I,0),0===E?E=c:s[I+1]=ip(s[I+1],c),I=c;A&&(s[c+1]=fm(s[c+1])),CC(s,R,c,!0),CC(s,R,c,!1),function EC(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&qa(p,o)>=0&&(u[c+1]=hc(u[c+1]))}(o,R,s,c,p),y=hm(E,I),p?o.classBindings=y:o.styleBindings=y}(d,p,o,u,y,c)}}(p,s,y,c),o!==Nt&&ri(d,y,o)&&function OC(s,o,u,c,d,p,y,E){if(!(3&o.type))return;const I=s.data,A=I[E+1];Wm(function cE(s){return 1==(1&s)}(A)?FC(I,o,u,d,Oo(A),y):void 0)||(Wm(p)||function My(s){return 2==(2&s)}(A)&&(p=FC(I,null,u,d,E,y)),function lm(s,o,u,c,d){const p=vn(s);if(o)d?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:ps.DashCase;if(null==d)p?s.removeStyle(u,c,y):u.style.removeProperty(c);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=ps.Important),p?s.setStyle(u,c,d,y):u.style.setProperty(c,d,E?"important":"")}}}(c,y,yo(Dr(),u),d,p))}(p,p.data[Dr()],d,d[11],s,d[y+1]=function qm(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(pa(s)))),s}(o,u),c,y)}(s,o,null,!0),Sv}function Rp(s,o,u,c,d){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=Sc(c,p.hostAttrs,d),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function Sc(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vi(s,y,!!u||o[++p]))}return void 0===s?null:s}function FC(s,o,u,c,d,p){const y=null===o;let E;for(;d>0;){const I=s[d],A=Array.isArray(I),R=A?I[1]:I,L=null===R;let G=u[d+1];G===Nt&&(G=L?j:void 0);let ee=L?Bf(G,c):R===c?G:void 0;if(A&&!Wm(ee)&&(ee=Bf(I,c)),Wm(ee)&&(E=ee,y))return E;const Te=s[d+1];d=y?gs(Te):Oo(Te)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(E=Bf(I,c))}return E}function Wm(s){return void 0!==s}function Mp(s,o=""){const u=Pe(),c=$t(),d=s+20,p=c.firstCreatePass?sh(c,d,1,o,null):c.data[d],y=u[d]=function _y(s,o){return vn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Qu(c,u,y,p),is(p,!1)}function Np(s){return Pp("",s,""),Np}function Pp(s,o,u){const c=Pe(),d=ol(c,s,o,u);return d!==Nt&&qi(c,Dr(),d),Pp}const pl=void 0;var ZC=["en",[["a","p"],["AM","PM"],pl],[["AM","PM"],pl,pl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pl,"{1} 'at' {0}",pl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function KC(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ac={};function Yi(s){const o=function Hv(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=xc(o);if(u)return u;const c=o.split("-")[0];if(u=xc(c),u)return u;if("en"===c)return ZC;throw new Error(`Missing locale data for the locale "${s}".`)}function jv(s){return Yi(s)[bt.PluralCase]}function xc(s){return s in Ac||(Ac[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),Ac[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const Fp="en-US";let Mc=Fp;function Fc(s,o,u,c,d){if(s=ie(s),Array.isArray(s))for(let p=0;p<s.length;p++)Fc(s[p],o,u,c,d);else{const p=$t(),y=Pe();let E=rl(s)?s:ie(s.provide),I=BE(s);const A=Tn(),R=1048575&A.providerIndexes,L=A.directiveStart,G=A.providerIndexes>>20;if(rl(s)||!s.multi){const ee=new oa(I,d,yh),Te=Vs(E,o,d?R:R+G,L);-1===Te?(Do(kr(A,y),p,E),r_(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(ee),y.push(ee)):(u[Te]=ee,y[Te]=ee)}else{const ee=Vs(E,o,R+G,L),Te=Vs(E,o,R,R+G),He=ee>=0&&u[ee],Ze=Te>=0&&u[Te];if(d&&!Ze||!d&&!He){Do(kr(A,y),p,E);const rt=function ai(s,o,u,c,d){const p=new oa(s,u,yh);return p.multi=[],p.index=o,p.componentProviders=0,lI(p,d,c&&!u),p}(d?Cr:cI,u.length,d,c,I);!d&&Ze&&(u[Te].providerFactory=rt),r_(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),u.push(rt),y.push(rt)}else r_(p,s,ee>-1?ee:Te,lI(u[d?Te:ee],I,!d&&c));!d&&c&&Ze&&u[Te].componentProviders++}}}function r_(s,o,u,c){const d=rl(o),p=function xT(s){return!!s.useClass}(o);if(d||p){const I=(p?ie(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=A.indexOf(u);-1===R?A.push(u,[c,I]):A[R+1].push(c,I)}else A.push(u,I)}}}function lI(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Vs(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function cI(s,o,u,c){return Lh(this.multi,[])}function Cr(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=To(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),Lh(d,p);for(let I=y;I<E.length;I++)p.push(E[I])}else p=[],Lh(d,p);return p}function Lh(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Nn(s,o=[]){return u=>{u.providersResolver=(c,d)=>function n_(s,o,u){const c=$t();if(c.firstCreatePass){const d=pi(s);Fc(u,c.data,c.blueprint,d,!0),Fc(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Lc{}class sS{resolveComponentFactory(o){throw function iS(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _l=(()=>{class s{}return s.NULL=new sS,s})();function i_(){return fu(Tn(),Pe())}function fu(s,o){return new Uh(pr(s,o))}let Uh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=i_,s})();function hI(s){return s instanceof Uh?s.nativeElement:s}class fI{}let oS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function pI(){const s=Pe(),u=gr(Tn().index,s);return function aS(s){return s[11]}(Ui(u)?u:s)}(),s})(),uS=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class gI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const mI=new gI("13.3.10"),Xv={};function jo(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(mn(p)),fi(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&jo(I[1],I,A,c)}const y=u.type;if(8&y)jo(s,o,u.child,c);else if(32&y){const E=my(u,o);let I;for(;I=E();)c.push(I)}else if(16&y){const E=Ju(o,u);if(Array.isArray(E))c.push(...E);else{const I=Jf(o[16]);jo(I[1],I,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class wa{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return jo(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(fi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(im(o,c),ls(u,c))}this._attachedToViewContainer=!1}Ey(this._lView[1],this._lView)}onDestroy(o){IE(this._lView[1],this._lView,null,o)}markForCheck(){qy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function dp(s,o,u){const c=o[10];c.begin&&c.begin();try{mc(s,o,s.template,u)}catch(d){throw FE(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function wy(s,o){tp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=o}}class lS extends wa{constructor(o){super(o),this._view=o}detectChanges(){Ky(this._view)}checkNoChanges(){}get context(){return null}}class ew extends _l{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=lt(o);return new yl(u,this.ngModule)}}function tw(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class yl extends Lc{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function nh(s){return s.map(eu).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return tw(this.componentDef.inputs)}get outputs(){return tw(this.componentDef.outputs)}create(o,u,c,d){const p=(d=d||this.ngModule)?function _I(s,o){return{get:(u,c,d)=>{const p=s.get(u,Xv,d);return p!==Xv||c===Xv?p:o.get(u,c,d)}}}(o,d.injector):o,y=p.get(fI,ka),E=p.get(uS,null),I=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function Em(s,o,u){if(vn(s))return s.selectRootElement(o,u===jt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):vy(y.createRenderer(null,this.componentDef),A,function pu(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),L=this.componentDef.onPush?576:528,G=function qE(s,o){return{components:[],scheduler:s||gy,clean:PE,playerHandler:o||null,flags:0}}(),ee=wm(0,null,null,1,0,null,null,null,null,null),Te=ap(null,ee,G,L,null,null,y,I,E,p);let He,Ze;Ba(Te);try{const rt=function Wr(s,o,u,c,d,p){const y=u[1];u[20]=s;const I=sh(y,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(tu(I,A,!0),null!==s&&(Gl(d,s,A),null!==I.classes&&np(d,s,I.classes),null!==I.styles&&iE(d,s,I.styles)));const R=c.createRenderer(s,o),L=ap(u,EE(o),null,o.onPush?64:16,u[20],I,c,R,p||null,null);return y.firstCreatePass&&(Do(kr(I,u),y,o.type),$y(y,I),SE(I,u.length,1)),uh(u,L),u[20]=L}(R,this.componentDef,Te,y,I);if(R)if(c)Gl(I,R,["ng-version",mI.full]);else{const{attrs:xe,classes:yt}=function uE(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!ko(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);xe&&Gl(I,R,xe),yt&&yt.length>0&&np(I,R,yt.join(" "))}if(Ze=Un(ee,20),void 0!==u){const xe=Ze.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const en=u[yt];xe.push(null!=en?Array.from(en):null)}}He=function iu(s,o,u,c,d){const p=u[1],y=function lT(s,o,u){const c=Tn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),AE(s,c,o,oh(s,o,1,null),u));const d=To(o,s,c.directiveStart,c);Xn(d,o);const p=pr(c,o);return p&&Xn(p,o),d}(p,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(I=>I(y,o)),o.contentQueries){const I=Tn();o.contentQueries(1,y,I.directiveStart)}const E=Tn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Co(E.index),DE(u[1],E,0,E.directiveStart,E.directiveEnd,o),TE(o,y)),y}(rt,this.componentDef,Te,G,[kT]),tl(ee,Te,null)}finally{ei()}return new nw(this.componentType,He,fu(Ze,Te),Te,Ze)}}class nw extends class dI{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new lS(d),this.componentType=o}get injector(){return new Hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ho{}class Us{}const Vc=new Map;class wI extends Ho{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ew(this);const c=Vt(o);this._bootstrapComponents=Di(c.bootstrap),this._r3Injector=UE(o,u,[{provide:Ho,useValue:this},{provide:_l,useValue:this.componentFactoryResolver}],le(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=nu.THROW_IF_NOT_FOUND,c=gt.Default){return o===nu||o===Ho||o===Cm?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class o_ extends Us{constructor(o){super(),this.moduleType=o,null!==Vt(o)&&function sw(s){const o=new Set;!function u(c){const d=Vt(c,!0),p=d.id;null!==p&&(function iw(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${le(o)} vs ${le(o.name)}`)}(p,Vc.get(p),c),Vc.set(p,c));const y=Di(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new wI(this.moduleType,o)}}function Hc(s){return o=>{setTimeout(s,void 0,o)}}const Ni=class TI extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,p,y;let E=o,I=u||(()=>null),A=c;if(o&&"object"==typeof o){const L=o;E=null===(d=L.next)||void 0===d?void 0:d.bind(L),I=null===(p=L.error)||void 0===p?void 0:p.bind(L),A=null===(y=L.complete)||void 0===y?void 0:y.bind(L)}this.__isAsync&&(I=Hc(I),E&&(E=Hc(E)),A&&(A=Hc(A)));const R=super.subscribe({next:E,error:I,complete:A});return o instanceof B.w0&&o.add(R),R}};function SI(){return this._results[sl()]()}class c_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=sl(),c=c_.prototype;c[u]||(c[u]=SI)}get changes(){return this._changes||(this._changes=new Ni)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Or(o);(this._changesDetected=!function Ud(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Gh=(()=>{class s{}return s.__NG_ELEMENT_ID__=_S,s})();const Wp=Gh,cw=class extends Wp{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=ap(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),tl(u,c,o),new wa(c)}};function _S(){return tr(Tn(),Pe())}function tr(s,o){return 4&s.type?new cw(o,s,fu(s,o)):null}let Xt=(()=>{class s{}return s.__NG_ELEMENT_ID__=AI,s})();function AI(){return MI(Tn(),Pe())}const xI=Xt,gu=class extends xI{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return fu(this._hostTNode,this._hostLView)}get injector(){return new Hi(this._hostTNode,this._hostLView)}get parentInjector(){const o=_i(this._hostTNode,this._hostLView);if(la(o)){const u=mt(o,this._hostLView),c=on(o);return new Hi(u[1].data[c+8],u)}return new Hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=RI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,p){const y=o&&!function Gn(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const L=u||{};E=L.index,c=L.injector,d=L.projectableNodes,p=L.ngModuleRef}const I=y?o:new yl(lt(o)),A=c||this.parentInjector;if(!p&&null==I.ngModule){const G=(y?A:this.parentInjector).get(Ho,null);G&&(p=G)}const R=I.create(A,d,void 0,p);return this.insert(R.hostView,E),R}insert(o,u){const c=o._lView,d=c[1];if(function Ll(s){return fi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[3],G=new gu(L,L[6],L[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function GD(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],Xl(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function WD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,p);const E=Ty(p,y),I=c[11],A=Xf(I,y[7]);return null!==A&&function tE(s,o,u,c,d,p){c[0]=d,c[6]=o,tp(s,c,u,1,d,p)}(d,y[6],I,c,A,E),o.attachToViewContainerRef(),Xl(vs(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=RI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=im(this._lContainer,u);c&&(ls(vs(this._lContainer),u),Ey(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=im(this._lContainer,u);return c&&null!=ls(vs(this._lContainer),u)?new wa(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function RI(s){return s[8]}function vs(s){return s[8]||(s[8]=[])}function MI(s,o){let u;const c=o[s.index];if(fi(c))u=c;else{let d;if(8&s.type)d=mn(c);else{const p=o[11];d=p.createComment("");const y=pr(s,o);cc(p,Xf(p,y),d,function zD(s,o){return vn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=u=Gy(c,o,d,s),uh(o,u)}return new gu(u,s,o)}class hw{constructor(o){this.queryList=o,this.matches=null}clone(){return new hw(this.queryList)}setDirty(){this.queryList.setDirty()}}class _n{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new _n(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Ur(o,u).matches&&this.queries[u].setDirty()}}class NI{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Wh{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new Wh(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class $c{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new $c(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,zp(u,p)),this.matchTNodeWithReadOption(o,u,Vu(u,o,p,!1,!1))}else c===Gh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Vu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Uh||d===Xt||d===Gh&&4&u.type)this.addMatch(u.index,-2);else{const p=Vu(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function zp(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function PI(s,o,u,c){return-1===u?function d_(s,o){return 11&s.type?fu(s,o):4&s.type?tr(s,o):null}(o,s):-2===u?function kI(s,o,u){return u===Uh?fu(o,s):u===Gh?tr(o,s):u===Xt?MI(o,s):void 0}(s,o,c):To(s,s[1],u,o)}function fw(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,y=u.matches,E=[];for(let I=0;I<y.length;I+=2){const A=y[I];E.push(A<0?null:PI(o,p[A],y[I+1],u.metadata.read))}d.matches=E}return d.matches}function pw(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const y=fw(s,o,d,u);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)c.push(y[E/2]);else{const A=p[E+1],R=o[-I];for(let L=10;L<R.length;L++){const G=R[L];G[17]===G[3]&&pw(G[1],G,A,c)}if(null!==R[9]){const L=R[9];for(let G=0;G<L.length;G++){const ee=L[G];pw(ee[1],ee,A,c)}}}}}return c}function gw(s){const o=Pe(),u=$t(),c=Sd();Ad(c+1);const d=Ur(u,c);if(s.dirty&&ea(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?pw(u,o,c,[]):fw(u,o,d,c);s.reset(p,hI),s.notifyOnChanges()}return!0}return!1}function FI(s,o,u,c){const d=$t();if(d.firstCreatePass){const p=Tn();(function mw(s,o,u){null===s.queries&&(s.queries=new Wh),s.queries.track(new $c(o,u))})(d,new NI(o,u,c),p.index),function vS(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function qh(s,o,u){const c=new c_(4==(4&u));IE(s,o,c,c.destroy),null===o[19]&&(o[19]=new _n),o[19].queries.push(new hw(c))}(d,Pe(),u)}function LI(){return function yS(s,o){return s[19].queries[o].queryList}(Pe(),Sd())}function Ur(s,o){return s.queries.getByIndex(o)}function Jp(...s){}const Xp=new Rn("Application Initializer");let Bs=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Jp,this.reject=Jp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(bp(p))u.push(p);else if(Vm(p)){const y=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(st(Xp,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const YI=new Rn("AppId",{providedIn:"root",factory:function zh(){return`${Dw()}${Dw()}${Dw()}`}});function Dw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vl=new Rn("Platform Initializer"),QI=new Rn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),p_=new Rn("appBootstrapListener");let zr=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const eg=new Rn("LocaleId",{providedIn:"root",factory:()=>Yt(eg,gt.Optional|gt.SkipSelf)||function Tw(){return"undefined"!=typeof $localize&&$localize.locale||Fp}()}),Sw=new Rn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JI{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let g_=(()=>{class s{compileModuleSync(u){return new o_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Di(Vt(u).declarations).reduce((y,E)=>{const I=lt(E);return I&&y.push(new yl(I)),y},[]);return new JI(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Yh=(()=>Promise.resolve(0))();function zc(s){"undefined"==typeof Zone?Yh.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class js{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ni(!1),this.onMicrotaskEmpty=new Ni(!1),this.onStable=new Ni(!1),this.onError=new Ni(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function XI(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eb(s){const o=()=>{!function FS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,__(s),s.isCheckStableRunning=!0,m_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),__(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,y,E)=>{try{return y_(s),u.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Qh(s)}},onInvoke:(u,c,d,p,y,E,I)=>{try{return y_(s),u.invoke(d,p,y,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Qh(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,__(s),m_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!js.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(js.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,Aw,Jp,Jp);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Aw={};function m_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function __(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function y_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Qh(s){s._nesting--,m_(s)}class Kc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ni,this.onMicrotaskEmpty=new Ni,this.onStable=new Ni,this.onError=new Ni}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let tb=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{js.assertNotInAngularZone(),zc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zc(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(st(js))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),nb=(()=>{class s{constructor(){this._applications=new Map,xw.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return xw.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class LS{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function VS(s){xw=s}let xw=new LS,Go=null;const wl=new Rn("AllowMultipleToken"),El=new Rn("PlatformOnDestroy");class Rw{constructor(o,u){this.name=o,this.token=u}}function ib(s,o,u=[]){const c=`Platform: ${o}`,d=new Rn(c);return(p=[])=>{let y=Jh();if(!y||y.injector.get(wl,!1)){const E=[...u,...p,{provide:d,useValue:!0}];s?s(E):function v_(s){if(Go&&!Go.get(wl,!1))throw new Ve(400,"");Go=s;const o=s.get(Nw),u=s.get(vl,null);u&&u.forEach(c=>c())}(function tg(s=[],o){return nu.create({name:o,providers:[{provide:Im,useValue:"platform"},{provide:El,useValue:()=>Go=null},...s]})}(E,c))}return function sb(s){const o=Jh();if(!o)throw new Ve(401,"");return o}()}}function Jh(){var s;return null!==(s=null==Go?void 0:Go.get(Nw))&&void 0!==s?s:null}let Nw=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function ws(s,o){let u;return u="noop"===s?new Kc:("zone.js"===s?void 0:s)||new js({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:js,useValue:E}];return E.run(()=>{const A=nu.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(A),L=R.injector.get(Yf,null);if(!L)throw new Ve(402,"");return E.runOutsideAngular(()=>{const G=E.onError.subscribe({next:ee=>{L.handleError(ee)}});R.onDestroy(()=>{w_(this._modules,R),G.unsubscribe()})}),function ob(s,o,u){try{const c=u();return bp(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,E,()=>{const G=R.injector.get(Bs);return G.runInitializers(),G.donePromise.then(()=>(function gl(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&(Mc=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(eg,Fp)||Fp),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const d=ng({},c);return function rb(s,o,u){const c=new o_(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(rg);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(El,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(st(nu))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ng(s,o){return Array.isArray(o)?o.reduce(ng,s):Object.assign(Object.assign({},s),o)}let rg=(()=>{class s{constructor(u,c,d,p){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new N.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{js.assertNotInAngularZone(),zc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{js.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),R.unsubscribe()}});this.isStable=(0,oe.T)(y,E.pipe((0,ae.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ve(405,"");let d;d=u instanceof Lc?u:this._injector.get(_l).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const p=function US(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ho),E=d.create(nu.NULL,[],c||d.selector,p),I=E.location.nativeElement,A=E.injector.get(tb,null),R=A&&E.injector.get(nb);return A&&R&&R.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),w_(this.components,E),R&&R.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;w_(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(p_,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(st(js),st(nu),st(Yf),st(Bs))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function w_(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Pw=!0,Cl=!1;function BS(){return Cl=!0,Pw}function ef(){if(Cl)throw new Error("Cannot enable prod mode after platform setup.");Pw=!1}let kw=(()=>{class s{}return s.__NG_ELEMENT_ID__=ab,s})();function ab(s){return function HS(s,o,u){if(Tu(s)&&!u){const c=gr(s.index,o);return new wa(c,c)}return 47&s.type?new wa(o[16],o):null}(Tn(),Pe(),16==(16&s))}class db{constructor(){}supports(o){return dh(o)}create(o){return new fb(o)}}const hb=(s,o)=>o;class fb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||hb}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<pb(c,d,p)?u:c,E=pb(y,d,p),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{p||(p=[]);const A=E-d,R=I-d;if(A!=R){for(let G=0;G<A;G++){const ee=G<p.length?p[G]:p[G]=0,Te=ee+G;R<=Te&&Te<A&&(p[G]=ee+1)}p[y.previousIndex]=R-A}}E!==I&&o(y,E,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!dh(o))throw new Ve(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else d=0,function ov(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[sl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new Uw(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Bw),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bw),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Uw{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Bw{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new qS,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function pb(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class jw{constructor(){}supports(o){return o instanceof Map||av(o)}create(){return new zS}}class zS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||av(o)))throw new Ve(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new nf(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class nf{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xc(){return new sg([new db])}let sg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Xc()),deps:[[s,new Ro,new lr]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ve(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Xc}),s})();function $w(){return new I_([new jw])}let I_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||$w()),deps:[[s,new Ro,new lr]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new Ve(901,"")}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:$w}),s})();const Gw=ib(null,"core",[]);let ZS=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(st(rg))},s.\u0275mod=ce({type:s}),s.\u0275inj=Zt({}),s})()},3942:(tt,Ie,O)=>{O.d(Ie,{Z:()=>Ve});var f=O(2090),B=O(4859),N=O(9681),oe=O(1877);class ae{constructor(ge,Se){this._delegate=ge,this.firebase=Se,(0,N._addComponent)(ge,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,Se=N._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(ge);return!We.isInitialized()&&"EXPLICIT"===(null===(qe=We.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Se})}_removeServiceInstance(ge,Se=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Se)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function ye(){const Ge=function le(Ge){const ge={},Se={__esModule:!0,initializeApp:function Me(ne,he={}){const De=N.initializeApp(ne,he);if((0,f.r3)(ge,De.name))return ge[De.name];const Q=new Ge(De,Se);return ge[De.name]=Q,Q},app:We,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(ne){const he=ne.name,De=he.replace("-compat","");if(N._registerComponent(ne)&&"PUBLIC"===ne.type){const Q=(re=We())=>{if("function"!=typeof re[De])throw fe.create("invalid-app-argument",{appName:he});return re[De]()};void 0!==ne.serviceProps&&(0,f.ZB)(Q,ne.serviceProps),Se[De]=Q,Ge.prototype[De]=function(...re){return this._getService.bind(this,he).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?Se[De]:null},removeApp:function qe(ne){delete ge[ne]},useAsService:function Ke(ne,he){return"serverAuth"===he?null:he},modularAPIs:N}};function We(ne){if(!(0,f.r3)(ge,ne=ne||N._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:ne});return ge[ne]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Ne(){return Object.keys(ge).map(ne=>ge[ne])}}),We.App=Ge,Se}(ae);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function ge(Se){(0,f.ZB)(Ge,Se)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ge}(),H=new oe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=W;!function Re(Ge){(0,N.registerVersion)("@firebase/app-compat","0.1.26",Ge)}()},9681:(tt,Ie,O)=>{O.r(Ie),O.d(Ie,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>fn,_addOrOverwriteComponent:()=>rn,_apps:()=>hn,_clearComponents:()=>Li,_components:()=>On,_getProvider:()=>Zt,_registerComponent:()=>Lt,_removeServiceInstance:()=>Sn,deleteApp:()=>gt,getApp:()=>Fn,getApps:()=>es,initializeApp:()=>Vi,onLog:()=>sn,registerVersion:()=>bn,setLogLevel:()=>br});var f=O(5861),B=O(4859),N=O(1877),oe=O(2090),ae=O(8766);class _e{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function fe($){const J=$.getComponent();return"VERSION"===(null==J?void 0:J.type)}(ke)){const Xe=ke.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(ke=>ke).join(" ")}}const le="@firebase/app",W=new N.Yd("@firebase/app"),Ft="[DEFAULT]",Ye={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,On=new Map;function fn($,J){try{$.container.addComponent(J)}catch(ke){W.debug(`Component ${J.name} failed to register with FirebaseApp ${$.name}`,ke)}}function rn($,J){$.container.addOrOverwriteComponent(J)}function Lt($){const J=$.name;if(On.has(J))return W.debug(`There were multiple attempts to register component ${J}.`),!1;On.set(J,$);for(const ke of hn.values())fn(ke,$);return!0}function Zt($,J){const ke=$.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),$.container.getProvider(J)}function Sn($,J,ke=Ft){Zt($,J).clearInstance(ke)}function Li(){On.clear()}const xn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Xi{constructor(J,ke,Xe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const ci="9.8.2";function Vi($,J={}){"object"!=typeof J&&(J={name:J});const ke=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},J),Xe=ke.name;if("string"!=typeof Xe||!Xe)throw xn.create("bad-app-name",{appName:String(Xe)});const ft=hn.get(Xe);if(ft){if((0,oe.vZ)($,ft.options)&&(0,oe.vZ)(ke,ft.config))return ft;throw xn.create("duplicate-app",{appName:Xe})}const Rt=new B.H0(Xe);for(const Ct of On.values())Rt.addComponent(Ct);const ln=new Xi($,ke,Rt);return hn.set(Xe,ln),ln}function Fn($=Ft){const J=hn.get($);if(!J)throw xn.create("no-app",{appName:$});return J}function es(){return Array.from(hn.values())}function gt($){return Br.apply(this,arguments)}function Br(){return(Br=(0,f.Z)(function*($){const J=$.name;hn.has(J)&&(hn.delete(J),yield Promise.all($.container.getProviders().map(ke=>ke.delete())),$.isDeleted=!0)})).apply(this,arguments)}function bn($,J,ke){var Xe;let ft=null!==(Xe=Ye[$])&&void 0!==Xe?Xe:$;ke&&(ft+=`-${ke}`);const Rt=ft.match(/\s|\//),ln=J.match(/\s|\//);if(Rt||ln){const Ct=[`Unable to register library "${ft}" with version "${J}":`];return Rt&&Ct.push(`library name "${ft}" contains illegal characters (whitespace or "/")`),Rt&&ln&&Ct.push("and"),ln&&Ct.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void W.warn(Ct.join(" "))}Lt(new B.wA(`${ft}-version`,()=>({library:ft,version:J}),"VERSION"))}function sn($,J){if(null!==$&&"function"!=typeof $)throw xn.create("invalid-log-argument");(0,N.Am)($,J)}function br($){(0,N.Ub)($)}const Dn="firebase-heartbeat-store";let ir=null;function bs(){return ir||(ir=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:($,J)=>{0===J&&$.createObjectStore(Dn)}}).catch($=>{throw xn.create("storage-open",{originalErrorMessage:$.message})})),ir}function ct(){return(ct=(0,f.Z)(function*($){try{return(yield bs()).transaction(Dn).objectStore(Dn).get(hi($))}catch(J){throw xn.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function it($,J){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*($,J){try{const Xe=(yield bs()).transaction(Dn,"readwrite");return yield Xe.objectStore(Dn).put(J,hi($)),Xe.done}catch(ke){throw xn.create("storage-set",{originalErrorMessage:ke.message})}})).apply(this,arguments)}function hi($){return`${$.name}!${$.options.appId}`}class Ln{constructor(J){this.container=J,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new q(ke),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var J=this;return(0,f.Z)(function*(){const Xe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ft=pn();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ft&&!J._heartbeatsCache.heartbeats.some(Rt=>Rt.date===ft))return J._heartbeatsCache.heartbeats.push({date:ft,agent:Xe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Rt=>{const ln=new Date(Rt.date).valueOf();return Date.now()-ln<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,f.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const ke=pn(),{heartbeatsToSend:Xe,unsentEntries:ft}=function j($,J=1024){const ke=[];let Xe=$.slice();for(const ft of $){const Rt=ke.find(ln=>ln.agent===ft.agent);if(Rt){if(Rt.dates.push(ft.date),Z(ke)>J){Rt.dates.pop();break}}else if(ke.push({agent:ft.agent,dates:[ft.date]}),Z(ke)>J){ke.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:ke,unsentEntries:Xe}}(J._heartbeatsCache.heartbeats),Rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:Xe}));return J._heartbeatsCache.lastSentHeartbeatDate=ke,ft.length>0?(J._heartbeatsCache.heartbeats=ft,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Rt})()}}function pn(){return(new Date).toISOString().substring(0,10)}class q{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,f.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function jt($){return ct.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var ke=this;return(0,f.Z)(function*(){var Xe;if(yield ke._canUseIndexedDBPromise){const Rt=yield ke.read();return it(ke.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:Rt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var ke=this;return(0,f.Z)(function*(){var Xe;if(yield ke._canUseIndexedDBPromise){const Rt=yield ke.read();return it(ke.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...J.heartbeats]})}})()}}function Z($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}!function Ee($){Lt(new B.wA("platform-logger",J=>new _e(J),"PRIVATE")),Lt(new B.wA("heartbeat",J=>new Ln(J),"PRIVATE")),bn(le,"0.7.25",$),bn(le,"0.7.25","esm2017"),bn("fire-js","")}("")},4859:(tt,Ie,O)=>{O.d(Ie,{H0:()=>le,wA:()=>N,zt:()=>ae});var f=O(5861),B=O(2090);class N{constructor(W,H,ie){this.name=W,this.instanceFactory=H,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const oe="[DEFAULT]";class ae{constructor(W,H){this.name=W,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const H=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(H)){const ie=new B.BH;if(this.instancesDeferred.set(H,ie),this.isInitialized(H)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:H});ze&&ie.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(H).promise}getImmediate(W){var H;const ie=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),ze=null!==(H=null==W?void 0:W.optional)&&void 0!==H&&H;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Re){if(ze)return null;throw Re}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function fe(ye){return"EAGER"===ye.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(H){}for(const[H,ie]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:ze});ie.resolve(Re)}catch(Re){}}}}clearInstance(W=oe){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,f.Z)(function*(){const H=Array.from(W.instances.values());yield Promise.all([...H.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...H.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=oe){return this.instances.has(W)}getOptions(W=oe){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:H={}}=W,ie=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ie,options:H});for(const[Re,Ve]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Re)&&Ve.resolve(ze);return ze}onInit(W,H){var ie;const ze=this.normalizeInstanceIdentifier(H),Re=null!==(ie=this.onInitCallbacks.get(ze))&&void 0!==ie?ie:new Set;Re.add(W),this.onInitCallbacks.set(ze,Re);const Ve=this.instances.get(ze);return Ve&&W(Ve,ze),()=>{Re.delete(W)}}invokeOnInitCallbacks(W,H){const ie=this.onInitCallbacks.get(H);if(ie)for(const ze of ie)try{ze(W,H)}catch(Re){}}getOrInitializeService({instanceIdentifier:W,options:H={}}){let ie=this.instances.get(W);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=W,ye===oe?void 0:ye),options:H}),this.instances.set(W,ie),this.instancesOptions.set(W,H),this.invokeOnInitCallbacks(ie,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,ie)}catch(ze){}var ye;return ie||null}normalizeInstanceIdentifier(W=oe){return this.component?this.component.multipleInstances?W:oe:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const H=this.getProvider(W.name);if(H.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);H.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const H=new ae(W,this);return this.providers.set(W,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(tt,Ie,O)=>{O.d(Ie,{Am:()=>ye,Ub:()=>le,Yd:()=>fe,in:()=>B});const f=[];var B=(()=>{return(W=B||(B={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",B;var W})();const N={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},oe=B.INFO,ae={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},_e=(W,H,...ie)=>{if(H<W.logLevel)return;const ze=(new Date).toISOString(),Re=ae[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${ze}]  ${W.name}:`,...ie)};class fe{constructor(H){this.name=H,this._logLevel=oe,this._logHandler=_e,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in B))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function le(W){f.forEach(H=>{H.setLogLevel(W)})}function ye(W,H){for(const ie of f){let ze=null;H&&H.level&&(ze=N[H.level]),ie.userLogHandler=null===W?null:(Re,Ve,...Ge)=>{const ge=Ge.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(qe){return null}}).filter(Se=>Se).join(" ");Ve>=(null!=ze?ze:Re.logLevel)&&W({level:B[Ve].toLowerCase(),message:ge,args:Ge,type:Re.name})}}}},8766:(tt,Ie,O)=>{O.d(Ie,{Lj:()=>Me,X3:()=>We});var f=O(5861);let N,oe;const fe=new WeakMap,le=new WeakMap,ye=new WeakMap,W=new WeakMap,H=new WeakMap;let Re={get(he,De,Q){if(he instanceof IDBTransaction){if("done"===De)return le.get(he);if("objectStoreNames"===De)return he.objectStoreNames||ye.get(he);if("store"===De)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Se(he[De])},set:(he,De,Q)=>(he[De]=Q,!0),has:(he,De)=>he instanceof IDBTransaction&&("done"===De||"store"===De)||De in he};function ge(he){return"function"==typeof he?function Ge(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...De){return he.apply(qe(this),De),Se(fe.get(this))}:function(...De){return Se(he.apply(qe(this),De))}:function(De,...Q){const re=he.call(qe(this),De,...Q);return ye.set(re,De.sort?De.sort():[De]),Se(re)}}(he):(he instanceof IDBTransaction&&function ze(he){if(le.has(he))return;const De=new Promise((Q,re)=>{const se=()=>{he.removeEventListener("complete",ve),he.removeEventListener("error",de),he.removeEventListener("abort",de)},ve=()=>{Q(),se()},de=()=>{re(he.error||new DOMException("AbortError","AbortError")),se()};he.addEventListener("complete",ve),he.addEventListener("error",de),he.addEventListener("abort",de)});le.set(he,De)}(he),((he,De)=>De.some(Q=>he instanceof Q))(he,function ae(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Re):he)}function Se(he){if(he instanceof IDBRequest)return function ie(he){const De=new Promise((Q,re)=>{const se=()=>{he.removeEventListener("success",ve),he.removeEventListener("error",de)},ve=()=>{Q(Se(he.result)),se()},de=()=>{re(he.error),se()};he.addEventListener("success",ve),he.addEventListener("error",de)});return De.then(Q=>{Q instanceof IDBCursor&&fe.set(Q,he)}).catch(()=>{}),H.set(De,he),De}(he);if(W.has(he))return W.get(he);const De=ge(he);return De!==he&&(W.set(he,De),H.set(De,he)),De}const qe=he=>H.get(he);function We(he,De,{blocked:Q,upgrade:re,blocking:se,terminated:ve}={}){const de=indexedDB.open(he,De),Be=Se(de);return re&&de.addEventListener("upgradeneeded",ht=>{re(Se(de.result),ht.oldVersion,ht.newVersion,Se(de.transaction))}),Q&&de.addEventListener("blocked",()=>Q()),Be.then(ht=>{ve&&ht.addEventListener("close",()=>ve()),se&&ht.addEventListener("versionchange",()=>se())}).catch(()=>{}),Be}function Me(he,{blocked:De}={}){const Q=indexedDB.deleteDatabase(he);return De&&Q.addEventListener("blocked",()=>De()),Se(Q).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Ke=new Map;function ne(he,De){if(!(he instanceof IDBDatabase)||De in he||"string"!=typeof De)return;if(Ke.get(De))return Ke.get(De);const Q=De.replace(/FromIndex$/,""),re=De!==Q,se=be.includes(Q);if(!(Q in(re?IDBIndex:IDBObjectStore).prototype)||!se&&!Ne.includes(Q))return;const ve=function(){var de=(0,f.Z)(function*(Be,...ht){const zt=this.transaction(Be,se?"readwrite":"readonly");let Ft=zt.store;return re&&(Ft=Ft.index(ht.shift())),(yield Promise.all([Ft[Q](...ht),se&&zt.done]))[0]});return function(ht){return de.apply(this,arguments)}}();return Ke.set(De,ve),ve}!function Ve(he){Re=he(Re)}(he=>lF(uF({},he),{get:(De,Q,re)=>ne(De,Q)||he.get(De,Q,re),has:(De,Q)=>!!ne(De,Q)||he.has(De,Q)}))},5861:(tt,Ie,O)=>{function f(N,oe,ae,_e,fe,le,ye){try{var W=N[le](ye),H=W.value}catch(ie){return void ae(ie)}W.done?oe(H):Promise.resolve(H).then(_e,fe)}function B(N){return function(){var oe=this,ae=arguments;return new Promise(function(_e,fe){var le=N.apply(oe,ae);function ye(H){f(le,_e,fe,ye,W,"next",H)}function W(H){f(le,_e,fe,ye,W,"throw",H)}ye(void 0)})}}O.d(Ie,{Z:()=>B})}},tt=>{tt(tt.s=1748)}]);